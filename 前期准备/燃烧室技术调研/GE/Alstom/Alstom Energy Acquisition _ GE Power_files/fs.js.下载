//!Portions of this code are licensed under the following license:
//!  * @overview es6-promise - a tiny implementation of Promises/A+.
//!  * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
//!  * @license   Licensed under MIT license
//!  *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
//!  * @version   4.1.0+f9a5575b
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=34)}([function(e,t,r){"use strict";t.__esModule=!0,t.EVENT_MUT_INSERT=2,t.EVENT_MUT_REMOVE=3,t.EVENT_MUT_ATTR=4,t.EVENT_MUT_ATTR_CURVE=5,t.EVENT_MUT_TEXT=6,t.EVENT_MUT_SKIPIDS=7,t.EVENT_MOUSEMOVE=8,t.EVENT_MOUSEMOVE_CURVE=9,t.EVENT_SCROLL_LAYOUT=10,t.EVENT_SCROLL_LAYOUT_CURVE=11,t.EVENT_MOUSEDOWN=12,t.EVENT_MOUSEUP=13,t.EVENT_KEYDOWN=14,t.EVENT_KEYUP=15,t.EVENT_CLICK=16,t.EVENT_FOCUS=17,t.EVENT_VALUECHANGE=18,t.EVENT_RESIZE_LAYOUT=19,t.EVENT_DOMLOADED=20,t.EVENT_LOAD=21,t.EVENT_PLACEHOLDER_SIZE=22,t.UnloadReasonUnknown=0,t.UnloadReasonApi=1,t.UnloadReasonFsShutdownFrame=2,t.UnloadReasonHibernation=3,t.UnloadReasonReidentify=4,t.UnloadReasonSettingsBlocked=5,t.UnloadReasonSize=6,t.UnloadReasonUnload=7,t.EVENT_UNLOAD=23,t.EVENT_BLUR=24,t.EVENT_SET_FRAME_BASE=25,t.EVENT_TOUCHSTART=32,t.EVENT_TOUCHEND=33,t.EVENT_TOUCHCANCEL=34,t.EVENT_TOUCHMOVE=35,t.EVENT_TOUCHMOVE_CURVE=36,t.EVENT_NAVIGATE=37,t.EVENT_PLAY=38,t.EVENT_PAUSE=39,t.EVENT_RESIZE_VISUAL=40,t.EVENT_RESIZE_VISUAL_CURVE=41,t.EVENT_LOG=48,t.EVENT_ERROR=49,t.EVENT_DBL_CLICK=50,t.EVENT_FORM_SUBMIT=51,t.EVENT_WINDOW_FOCUS=52,t.EVENT_WINDOW_BLUR=53,t.EVENT_HEARTBEAT=54,t.EVENT_WATCHED_ELEM=56,t.PerfEntryTiming=0,t.PerfEntryNavigation=1,t.PerfEntryResource=2,t.PerfEntryPaint=3,t.PerfEntryMark=4,t.PerfEntryMeasure=5,t.PerfEntryMemory=6,t.EVENT_PERF_ENTRY=57,t.RecFeaturePerformance=0,t.RecFeaturePerformanceEntries=1,t.RecFeaturePerformanceMemory=2,t.RecFeatureConsole=3,t.RecFeatureAjax=4,t.RecFeaturePerformanceObserver=5,t.EVENT_REC_FEAT_SUPPORTED=58,t.EVENT_SELECT=59,t.EVENT_CSSRULE_INSERT=60,t.EVENT_CSSRULE_DELETE=61,t.ThrottledStyleSheetHooks=0,t.ThrottledSetPropertyHooks=1,t.EVENT_FAIL_THROTTLED=62,t.EVENT_AJAX_REQUEST=63,t.EVENT_SCROLL_VISUAL_OFFSET=64,t.EVENT_SCROLL_VISUAL_OFFSET_CURVE=65,t.EVENT_MEDIA_QUERY_CHANGE=66,t.EVENT_RESOURCE_TIMING_BUFFER_FULL=67,t.EVENT_MUT_SHADOW=68,t.EVENT_DISABLE_STYLESHEET=69,t.EVENT_FULLSCREEN=70,t.EVENT_FULLSCREEN_ERROR=71,t.EVENT_SYS_SETMETA=8192,t.EVENT_SYS_SETVAR=8193,t.EVENT_SYS_RESOURCEHASH=8195,t.EVENT_SYS_SETCONSENT=8196,t.EVENT_SYS_CUSTOM=8197,t.EVENT_SYS_REPORTCONSENT=8198,t.EVENT_COOKED_LOAD_MELTED="load-melted",t.EVENT_COOKED_LOAD="load",t.EVENT_COOKED_UNLOAD="unload",t.EVENT_COOKED_NAVIGATE="navigate",t.EVENT_COOKED_CLICK="click",t.EVENT_COOKED_TAP="tap",t.EVENT_COOKED_FOCUS="focus",t.EVENT_COOKED_CHANGE="change",t.EVENT_COOKED_MOUSE_THRASH="thrash",t.EVENT_FORM_ABANDONED="abandon",t.EVENT_COOKED_ELEM_SEEN="seen",t.EVENT_COOKED_REQUEST="request",t.EVENT_COOKED_LONG_CLICK="long_click",t.EVENT_COOKED_UNHANDLED_CLICK="unhandled_click",t.EVENT_COOKED_UNHANDLED_LONG_CLICK="unhandled_long_click",t.EVENT_COOKED_BACKGROUNDED="backgrounded",t.EVENT_COOKED_CRASHED="crashed",t.EVENT_COOKED_CUSTOM="custom",t.EVENT_COOKED_USERVAR="uservar",t.EVENT_COOKED_CUSTOM_ERROR="custom_error",t.EVENT_COOKED_USERVAR_ERROR="uservar_error",t.EVENT_COOKED_REDACTED="redacted",t.isUserActionEvent=function(e){switch(e){case t.EVENT_MOUSEDOWN:case t.EVENT_MOUSEMOVE:case t.EVENT_MOUSEMOVE_CURVE:case t.EVENT_MOUSEUP:case t.EVENT_KEYDOWN:case t.EVENT_KEYUP:case t.EVENT_TOUCHSTART:case t.EVENT_TOUCHEND:case t.EVENT_TOUCHMOVE:case t.EVENT_TOUCHMOVE_CURVE:case t.EVENT_TOUCHCANCEL:case t.EVENT_CLICK:case t.EVENT_SCROLL_LAYOUT:case t.EVENT_SCROLL_LAYOUT_CURVE:case t.EVENT_SCROLL_VISUAL_OFFSET:case t.EVENT_SCROLL_VISUAL_OFFSET_CURVE:case t.EVENT_NAVIGATE:return!0;}return!1},t.MAX_LOGS_PER_PAGE=1024,t.AjaxBodyElide=0,t.AjaxBodyRecord=1,t.AjaxBodyWhitelist=2,t.BlockUnset=0,t.BlockExclude=1,t.BlockBlock=2,t.BlockRecord=3,t.MutationProcessingInterval=250,t.CurveSamplingInterval=142,t.DefaultBundleUploadInterval=5e3,t.HeartbeatInitial=4e3,t.HeartbeatMax=256200,t.PageInactivityTimeout=18e5,t.BackoffMax=3e5,t.ScrollSampleInterval=t.MutationProcessingInterval/5,t.InactivityThreshold=4e3,t.MaxPayloadLength=16384,t.SwanSongLocalStorageKey="_fs_swan_song",t.UidLocalStorageKey="_fs_uid"},function(e,t,r){"use strict";var n,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n["throw"](e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n["return"]:o[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};t.__esModule=!0;var c=r(8),h=r(9),d=r(4),l=r(3),f=r(17);t._native_bind=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return e.bind.apply(e,u([t],r))},t._js_bind=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){var n=Array.prototype.slice.call(arguments);e.call.apply(e,u([t],r,n))}},t.bind=Function.prototype.bind?t._native_bind:t._js_bind,t._native_map=function(e,t,r){return e.map(t,r)},t._js_map=function(e,t,r){for(var n=Array(e.length),i=0;i<e.length;i++)n[i]=t.call(r,e[i],i,e);return n},t.map=Array.prototype.map?t._native_map:t._js_map,t._native_trim=function(e){return e.trim()},t._js_trim=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.trim=String.prototype.trim?t._native_trim:t._js_trim,t._native_filter=function(e,t,r){return e.filter(t,r)},t._js_filter=function(e,t,r){for(var n=Array(e.length),i=0;i<e.length;i++)n[i]=t.call(r,e[i],i,e);return n},t.filter=Array.prototype.filter?t._native_filter:t._js_filter;function p(){var e=function(e){return e.matches||e.msMatchesSelector||e.webkitMatchesSelector},t=e(window.Element.prototype),r=window.document?window.document.documentElement:void 0;return!r||t&&r instanceof window.Element||(t=e(r)),[t,function(e,r){return t.call(e,r)}]}t.isArray=d.windex.arrayIsArray?function(e){return d.windex.arrayIsArray(e)}:function(e){return"[object Array]"==d.windex.objectToString(e)},t._native_keys=function(e){return d.windex.objectKeys(e)},t._js_keys=function(e){var t=[];for(var r in e)d.windex.objectHasOwnProp(e,r)&&t.push(r);return t},t.keys="function"==typeof d.windex.objectKeys?t._native_keys:t._js_keys,t.setMatchesSelector=function(e){t.matchesSelector=e},t.setUpMatchesSelector=p,n=a(p(),2),t._native_matchesSelector=n[0],t.matchesSelector=n[1],t.hasPrefix=function(e,t){return 0==e.lastIndexOf(t,0)},t.hasSuffix=function(e,t){return!(t.length>e.length)&&e.substring(e.length-t.length)==t},t.forIn=function(e,t){for(var r in e)d.windex.objectHasOwnProp(e,r)&&t(e[r],r,e)},t.forInAsync=function(e,t){return o(this,void 0,h.FSPromise,function(){var r,n,i,o;return s(this,function(s){switch(s.label){case 0:for(n in r=[],e)r.push(n);i=0,s.label=1;case 1:return i<r.length?(o=r[i],d.windex.objectHasOwnProp(e,o)?[4,t(e[o],o,e)]:[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2];}})})},t.firstKey=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return t},t.firstValue=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},t.hasNKeys=function(e,t){var r=0;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&++r>t)return!1;return r==t},t.hasMoreThanNKeys=function(e,t){var r=0;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&++r>t)return!0;return!1};t.nextSibling=c.uaIsIE?function(e){var t=e.nextSibling;return t&&e.parentNode&&t===e.parentNode.firstChild?null:t}:function(e){return e.nextSibling};t.forEachNextSibling=c.uaIsIE?function(e,t){if(e){var r=e.parentNode?e.parentNode.firstChild:null;do{t(e),e=e.nextSibling}while(e&&e!=r)}}:function(e,t){for(;e;e=e.nextSibling)t(e)};function _(e,t){if(!e)return f.doNothing;var r=function(e){try{var t=window;return t.Zone&&t.Zone.root&&"function"==typeof t.Zone.root.wrap?t.Zone.root.wrap(e):e}catch(t){return e}}(e);return t&&(r=r.bind(t)),f.guard(r,function(e){l.logIfDebug("Unexpected error: "+e)})}function g(e){var t="Internal error: unable to determine what JSON error was";try{t=(t=""+e).replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(e){}return"\""+t+"\""}t.previousSibling=c.uaIsIE?function(e){var t=e.previousSibling;return t&&e.parentNode&&t===e.parentNode.lastChild?null:t}:function(e){return e.previousSibling},t.values=function(e){if(d.windex.objectValues)return d.windex.objectValues(e||{});var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},t.$entry=_,t.stringify=function(e){var t,r=Array.prototype.toJSON,n=String.prototype.toJSON;r&&(Array.prototype.toJSON=void 0),n&&(String.prototype.toJSON=void 0);try{t=d.windex.jsonStringify(e)}catch(e){t=g(e)}finally{r&&(Array.prototype.toJSON=r),n&&(String.prototype.toJSON=n)}return t},t.jsonErrorString=g,t.doctypeString=function(e){var t=e.doctype;if(!t)return"";var r="<!DOCTYPE ";return r+=t.name,t.publicId&&(r+=" PUBLIC \""+t.publicId+"\""),t.systemId&&(r+=" \""+t.systemId+"\""),r+">"},t.parseJson=function(e){return d.windex.jsonParse(e)},t.tryGetScreenDims=function(e){var t=0,r=0;return null==e.screen?[t,r]:(t=parseInt(String(e.screen.width)),r=parseInt(String(e.screen.height)),[t=isNaN(t)?0:t,r=isNaN(r)?0:r])};var v=function(){function e(e,t){this.target=e,this.propertyName=t,this._before=f.doNothing,this._afterSync=f.doNothing,this._afterAsync=f.doNothing,this.on=!1,this.attached=!1,this["native"]=e[t]}return e.prototype.before=function(e){return this._before=_(e),this},e.prototype.afterSync=function(e){return this._afterSync=_(e),this},e.prototype.afterAsync=function(e){var t=this;return this._afterAsync=_(function(e){d.windex.setWindowTimeout(window,f.guard(function(){t._afterAsync(e)}),0)}),this},e.prototype.disable=function(){this.on=!1,this.target[this.propertyName]==this.shim&&(this.target[this.propertyName]=this["native"],this.attached=!1)},e.prototype.enable=function(){if(this.on=!0,this.attached)return!0;this.shim||(this.shim=this.makeShim());try{this.target[this.propertyName]=this.shim}catch(e){return!1}return this.attached=!0,!0},e.prototype.makeShim=function(){var e=this;return function(){var t={that:this,args:arguments};e.on&&e._before(t);var r=e["native"].apply(this,arguments);return e.on&&(e._afterSync(t),e._afterAsync(t)),r}},e}(),y={};t.activateHook=function(e,t){if(!e||"function"!=typeof e[t])return null;var r;y[t]=y[t]||[];for(var n=0;n<y[t].length;n++)y[t][n].obj==e&&(r=y[t][n].hook);return r||(r=new v(e,t),y[t].push({obj:e,hook:r})),r.enable()?r:null},t.shimProp=function(e,t,r){var n=Object.getOwnPropertyDescriptor(e.prototype,t);if(!n||!n.set)return function(){};var o=n.set,s=_(r),a=!0;function u(e){o.call(this,e),a&&s(this,e)}return Object.defineProperty(e.prototype,t,i({},n,{set:u})),function(){a=!1;var r=Object.getOwnPropertyDescriptor(e.prototype,t);r&&u===r.set&&Object.defineProperty(e.prototype,t,i({},r,{set:o}))}}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(20),i=r(3),o=r(10);r(0);var s=r(17),a=r(11),u=10,c="[anonymous]",h=/function\s*([\w\-$]+)?\s*\(/i;function d(e){return e.stack||e.backtrace||e.stacktrace}var l=function(){function e(){}return e.wrap=function(t,r){return void 0===r&&(r="error"),s.guard(t,function(t){return e.sendToBugsnag(t,r)})},e.errorLimit=15,e.sendToBugsnag=function(t,r,s){if(!(e.errorLimit<=0)){e.errorLimit--,"string"==typeof t&&(t=new Error(t));var l=n.getCookies(document).fs_uid,f=l?n.parseIdentityCookie(l):void 0;f&&f.orgId!=o._fs_org(window)&&(f=void 0);var p=new Date(1572623383e3).toISOString(),_={projectRoot:window.location.origin,deviceTime:a.now(),inIframe:function(){try{return window.self!==window.top}catch(e){return!0}}(),CompiledTimestamp:1572623383,CompiledTime:p,orgId:o._fs_org(window),"userId:sessionId":f?f.userId+":"+f.sessionId:"NA",context:document.location&&document.location.pathname,message:t.message,name:"Recording Error",releaseStage:"production "+p,severity:r,language:navigator.language||navigator.userLanguage||"en-GB",stacktrace:d(t)||function(){var e,t;try{throw new Error("")}catch(r){e="<generated>\n",t=d(r)}if(!t){e="<generated-ie>\n";var r=[];try{for(var n=arguments.callee.caller.caller;n&&r.length<u;){var o=h.test(n.toString())&&RegExp.$1||c;r.push(o),n=n.caller}}catch(e){i.logIfDebug(e)}t=r.join("\n")}return e+t}()};if(s)for(var g in s)_["aux_"+g]=s[g];var v=[];for(var g in _)v.push(encodeURIComponent(g)+"="+encodeURIComponent(_[g]));new Image().src="https://"+o._fs_rec_host(window)+"/rec/except?"+v.join("&")}},e}();t.FsBugSnag=l;var f={};t.assert=function(e,t,r){if(void 0===r&&(r=1),e)return!0;if(f[t]=f[t]||0,f[t]++,f[t]>r)return!1;var n=new Error("Assertion failed: "+t);return l.sendToBugsnag(n,"error"),e}},function(e,t,r){"use strict";t.__esModule=!0;var n=!1;function i(){return n}t.initDebug=function(e){n=e},t.isDebug=i,t.logIfDebug=function(e){i()&&window.console&&console.log(e)}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s};t.__esModule=!0,r(26);var i=r(8),o=r(3),s=r(2),a=r(9);function u(e,t){try{return{done:t,jsonParse:e.JSON.parse,jsonStringify:e.JSON.stringify,arrayShift:c(e.Array.prototype.shift),arrayIsArray:e.Array.isArray,objectToString:c(e.Object.prototype.toString),objectKeys:e.Object.keys,objectValues:e.Object.values||null,objectHasOwnProp:c(e.Object.prototype.hasOwnProperty),matchMedia:h(e.matchMedia),setWindowTimeout:c(e.setTimeout),setWindowInterval:c(e.setInterval),clearWindowTimeout:c(e.clearTimeout),clearWindowInterval:c(e.clearInterval),requestWindowAnimationFrame:h(e.requestAnimationFrame),requestWindowIdleCallback:h(e.requestIdleCallback)}}catch(e){return}}function c(e){return function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.apply(t,r)}}function h(e){return e?c(e):null}t.initWindex=function(e){try{if(i.uaIsIE||i.uaIsEdge||function(e){var t=[function(){throw new Error("")},Function.prototype.toString],r=n(t.map(function(e){try{return void e.call(null)}catch(e){return e.stack||""}}),2),i=r[0],o=r[1];if(!i||!o)return!1;for(var s="\n".charCodeAt(0),a=Math.min(i.length,o.length),u=1,c=u;c<a;c++){var h=i.charCodeAt(i.length-c),d=o.charCodeAt(o.length-c);if(h!=d)break;d!=s&&c!=a-1||(u=c)}if(o.slice(0,o.length-u+1).match(/\.js:\d+([:)]|$)/m))return!1;var l=function(e){return"function"==typeof e&&Function.prototype.toString.call(e).indexOf("[native code]")<0};return!(l(e.JSON.parse)||l(e.JSON.stringify)||l(e.Array)||l(e.Array.prototype.shift)||l(e.Array.isArray)||l(e.Object.prototype.toString)||l(e.Object.keys)||l(e.Object.values)||l(e.Object.prototype.hasOwnProperty)||l(e.setTimeout)||l(e.setInterval)||l(e.clearTimeout)||l(e.clearInterval)||l(e.requestIdleCallback))}(e))return t.windex.done=!0,a.FSPromise.resolve();if(!e.document||t.windex.done)return a.FSPromise.resolve();o.logIfDebug("Window object doesn't look clean; creating windex.");var r=e.document.createElement("iframe");r.id="FullStory-iframe",r.className="fs-hide",r.style.display="none";var c=e.document.body||e.document.head||e.document.documentElement||e.document;try{c.appendChild(r)}catch(e){return a.FSPromise.resolve()}if(r.src="about:blank",!r.contentWindow)return a.FSPromise.resolve();var h,d=u(r.contentWindow,!0);if(r.parentNode&&r.parentNode.removeChild(r),!d)return a.FSPromise.resolve();var l=new a.FSPromise(function(e){return h=e});return setTimeout(function(){try{if(!d)throw"";d.jsonParse("[]").push(0),t._setWindex(d)}catch(e){t.windex.done=!0}h()}),l}catch(e){return s.FsBugSnag.sendToBugsnag(e,"error"),a.FSPromise.resolve()}},t._makeWindex=u,t.windex=u(window,!1),t._setWindex=function(e){for(var r in t.windex)t.windex[r]=e[r]}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});t.__esModule=!0;var o=r(1),s=r(2),a=r(9),u=r(4),c=r(11),h=function(){function e(){var t=this;this._wrappedTick=s.FsBugSnag.wrap(function(){t.unregister(),t._tick()}),this._due=0,this._id=e.nextId++}return e._rearm=function(){e.checkedAlready=!1,e.lastCheck=0},e.checkForBrokenSchedulers=function(){if(u.windex.requestWindowAnimationFrame&&!e.checkedAlready){var t=c.now();if(!(t-e.lastCheck<100)){e.lastCheck=t,e.checkedAlready=!0;var r=[];return o.forIn(e.registry,function(e){var n=e.maybeForceTick(t);n&&r.push(n)}),a.FSPromise.all(r).then(function(){u.windex.requestWindowAnimationFrame(window,s.FsBugSnag.wrap(function(){e.checkedAlready=!1}))})}}},e.stopAll=function(){o.forIn(this.registry,function(e){return e.stop()})},e.prototype.setTick=function(e){this._tick=e},e.prototype.stop=function(){this.cancel(),delete e.registry[this._id]},e.prototype.register=function(t){this._due=c.now()+100+1.5*t,e.registry[this._id]=this},e.prototype.unregister=function(){delete e.registry[this._id]},e.prototype.maybeForceTick=function(e){if(e>this._due)return a.FSPromise.resolve().then(this._wrappedTick)["catch"](function(){})},e.registry={},e.nextId=0,e.checkedAlready=!1,e.lastCheck=0,e}();t.Scheduler=h;var d=function(e){function t(t){var r=e.call(this)||this;return r._interval=t,r._handle=-1,r}return i(t,e),t.prototype.start=function(e){var t=this;-1==this._handle&&(this.setTick(function(){e(),t.register(t._interval)}),this._handle=u.windex.setWindowInterval(window,this._wrappedTick,this._interval),this.register(this._interval))},t.prototype.cancel=function(){-1!=this._handle&&(u.windex.clearWindowInterval(window,this._handle),this._handle=-1,this.setTick(function(){}))},t}(h);t.RealTicker=d;var l=function(e){function t(t,r,n){void 0===r&&(r=0);for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=e.call(this)||this;return s.delay=r,s.timer=-1,s.setTick(function(){t.apply(void 0===n?window:n,i),s.stop()}),s}return i(t,e),t.prototype.start=function(e){return void 0===e&&(e=this.delay),this.delay=e,u.windex.clearWindowTimeout(window,this.timer),this.timer=u.windex.setWindowTimeout(window,this._wrappedTick,this.delay),this.register(e),this},t.prototype.cancel=function(){-1!=this.timer&&(u.windex.clearWindowTimeout(window,this.timer),this.timer=-1)},t}(h);t.RealTimeout=l,t.idleMoment=function(e){return new a.FSPromise(function(t){u.windex.requestWindowIdleCallback?u.windex.requestWindowIdleCallback(window,s.FsBugSnag.wrap(t),e):u.windex.setWindowTimeout(window,s.FsBugSnag.wrap(function(){return t(new f(c.now()+25))}),e&&e.timeout||50)})};var f=function(){function e(e){this.deadlineTime=e,this.didTimeout=this.deadlineTime<=c.now()}return e.prototype.timeRemaining=function(){return this.deadlineTime-c.now()},e}(),p=function(){function e(e,t,r){this.limit=e,this.breaker=r,this.remaining=0,this.ticker=new d(t),this.open()}return e.prototype.guard=function(e){var t=this;return function(){return 0==t.remaining?(t.breaker(),void t.remaining--):t.remaining<0?void 0:(t.remaining--,e.apply(this,arguments))}},e.prototype.close=function(){return this.ticker.stop(),this},e.prototype.open=function(){var e=this;return this.remaining=this.limit,this.ticker.start(function(){e.remaining=e.limit}),this},e}();t.Throttle=p;var _=function(){function e(){this._startTime=this.wallTime()}return e.prototype.wallTime=function(){return c.now()},e.prototype.now=function(){return this.wallTime()-this._startTime},e.prototype.startTime=function(){return this._startTime},e.prototype.setStartTime=function(e){this._startTime=e},e}();t.Timekeeper=_},function(e,t,r){"use strict";t.__esModule=!0;var n=r(14),i=r(2);t._mirrors={};var o=1;function s(e){var t=a(e);return!!t&&t.watchKind==n.WatchKind.Exclude}function a(e){return e?t._mirrors[e._fs]:null}function u(e){try{return e&&e._fs||0}catch(e){return 0}}function c(e,r){e.parent&&(r.unobserveSubtree(e.node),e.parent.child==e&&(e.parent.child=e.next),e.parent.lastChild==e&&(e.parent.lastChild=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent=e.prev=e.next=null,delete t._mirrors[e.id],e.node._fs==e.id&&(e.node._fs=0),e.id=0,e.child&&h(e.child))}function h(e){for(var r=[e];r.length>0&&r.length<1e4;){var n=r.pop();delete t._mirrors[n.id],n.node._fs==n.id&&(n.node._fs=0),n.id=0,n.next&&r.push(n.next),n.child&&r.push(n.child)}i.assert(r.length<1e4,"clearIds is fast")}t.tryTokenize=function(e){var t=o;try{return e(),!0}catch(e){return o=t,!1}},t.clearMirrors=function(){t._mirrors={},o=1},t.newMirror=function(e){var r={id:o++,node:e};return t._mirrors[r.id]=r,e._fs=r.id,r},t.isWatched=function(e){var t=a(e);return!!t&&void 0!==t.watchKind},t.isExcluded=s,t.isMasked=function(e){var t=a(e);return!!t&&!!t.mask},t.watchKind=function(e){var t=a(e);return t?t.watchKind:void 0},t.mirrorFor=a,t.fsid=u,t.fsidIfNotExcluded=function(e){return s(e)?0:u(e)},t.insertMirror=function(e,t,r,n){c(t,n),t.parent=e,t.next=r,r&&(t.prev=r.prev,r.prev=t),null==t.next?(t.prev=e.lastChild,e.lastChild=t):t.next.prev=t,null==t.prev?e.child=t:t.prev.next=t},t.removeMirror=c,t.clearIds=h},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s};t.__esModule=!0;var i=r(46),o=r(13),s=r(12),a=r(6),u=r(0),c=r(2),h=r(28),d="(redacted)";t.MaxTextSizeBytes=16e6,t.setMaxTextSizeBytes=function(e){t.MaxTextSizeBytes=e},t.scrubTextNode=function(e,r){var n=e.textContent;if(!n)return"";if(!r&&!(r=a.mirrorFor(e)))return"";var i=n.length;return i>t.MaxTextSizeBytes?(c.FsBugSnag.sendToBugsnag("Ignoring huge text node with length ["+i+"]","warning"),""):e.parentNode&&"style"==o.tagName(e.parentNode)?n:r.mask?h.maskText(n):n};var l={ATTRIBUTENAME:"attributeName",ATTRIBUTETYPE:"attributeType",BASEFREQUENCY:"baseFrequency",BASEPROFILE:"baseProfile",CALCMODE:"calcMode",CLIPPATHUNITS:"clipPathUnits",CONTENTSCRIPTTYPE:"contentScriptType",CONTENTSTYLETYPE:"contentStyleType",DIFFUSECONSTANT:"diffuseConstant",EDGEMODE:"edgeMode",EXTERNALRESOURCESREQUIRED:"externalResourcesRequired",FILTERRES:"filterRes",FILTERUNITS:"filterUnits",GLYPHREF:"glyphRef",GRADIENTTRANSFORM:"gradientTransform",GRADIENTUNITS:"gradientUnits",KERNELMATRIX:"kernelMatrix",KERNELUNITLENGTH:"kernelUnitLength",KEYPOINTS:"keyPoints",KEYSPLINES:"keySplines",KEYTIMES:"keyTimes",LENGTHADJUST:"lengthAdjust",LIMITINGCONEANGLE:"limitingConeAngle",MARKERHEIGHT:"markerHeight",MARKERUNITS:"markerUnits",MARKERWIDTH:"markerWidth",MASKCONTENTUNITS:"maskContentUnits",MASKUNITS:"maskUnits",NUMOCTAVES:"numOctaves",PATHLENGTH:"pathLength",PATTERNCONTENTUNITS:"patternContentUnits",PATTERNTRANSFORM:"patternTransform",PATTERNUNITS:"patternUnits",POINTSATX:"pointsAtX",POINTSATY:"pointsAtY",POINTSATZ:"pointsAtZ",PRESERVEALPHA:"preserveAlpha",PRESERVEASPECTRATIO:"preserveAspectRatio",PRIMITIVEUNITS:"primitiveUnits",REFX:"refX",REFY:"refY",REPEATCOUNT:"repeatCount",REPEATDUR:"repeatDur",REQUIREDEXTENSIONS:"requiredExtensions",REQUIREDFEATURES:"requiredFeatures",SPECULARCONSTANT:"specularConstant",SPECULAREXPONENT:"specularExponent",SPREADMETHOD:"spreadMethod",STARTOFFSET:"startOffset",STDDEVIATION:"stdDeviation",STITCHTILES:"stitchTiles",SURFACESCALE:"surfaceScale",SYSTEMLANGUAGE:"systemLanguage",TABLEVALUES:"tableValues",TARGETX:"targetX",TARGETY:"targetY",TEXTLENGTH:"textLength",VIEWBOX:"viewBox",VIEWTARGET:"viewTarget",XCHANNELSELECTOR:"xChannelSelector",YCHANNELSELECTOR:"yChannelSelector",ZOOMANDPAN:"zoomAndPan"};function f(e,t,r){switch(r.source){case"dom":switch(n=r.type){case"frame":case"iframe":return _(e,t);default:return p(e,t);}case"event":switch(n=r.type){case u.EVENT_AJAX_REQUEST:case u.EVENT_NAVIGATE:return p(e,t);case u.EVENT_SET_FRAME_BASE:return _(e,t);default:return i.assertExhaustive(n);}case"log":return _(e,t);case"page":var n;switch(n=r.type){case"base":return _(e,t);case"referrer":case"url":return p(e,t);default:return i.assertExhaustive(n);}case"perfEntry":switch(r.type){case"frame":case"iframe":case"navigation":return _(e,t);default:return p(e,t);}default:return i.assertExhaustive(r);}}function p(e,t){return g(e,t,function(e){if(!(e in v)){var t=["password","token","^jwt$"];switch("4K3FQ"!==e&&"NQ829"!==e&&t.push("^code$"),e){case"2FVM4":t.push("^e$","^eref$","^fn$");break;case"35500":t.push("share_token","password-reset-key");break;case"1HWDJ":t.push("email_id","invite","join");break;case"J82WF":t=[".*"];break;case"8MM83":t=["^creditCard"];break;case"PAN8Z":t.push("code","hash","ol","aeh");}v[e]=new RegExp(t.join("|"),"i")}return v[e]}(t))}function _(e,t){return g(e,t,y)}function g(e,t,r){var i=s.parseUrl("",e);return i.hash.indexOf("access_token")>=0&&(i.hash="#"+d),"AGQFM"==t&&i.pathname.indexOf("reset_password")>=0&&(i.pathname=i.pathname.replace(/(\/reset_password\/).*$/i,"$1"+d)),i.search.length>0&&(i.search=function(e,t){return e.split("?").map(function(e){return function(e,t){return e.replace("?","").split("&").map(function(e){return e.split("=")}).map(function(e){var r=n(e),i=r[0],o=r[1],s=r.slice(2);return t.test(i)&&void 0!==o?[i,d].concat(s):[i,o].concat(s)}).map(function(e){var t=n(e),r=t[0],i=t[1],o=t.slice(2);return void 0===i?r:[r,i].concat(o).join("=")}).join("&")}(e,t)}).join("?")}(i.search,r)),i.href.substring(0,2048)}t.scrubAttrName=function(e){return /[a-z]/.test(e)?e:l[e]||e.toLowerCase()},t.scrubAttrValue=function(e,t,r,n){var i=o.tagName(t);switch(i){case"frame":case"iframe":switch(r){case"src":n=f(n,e,{source:"dom",type:i});break;case"srcdoc":return null;}}if(a.isExcluded(t))switch(r){case"alt":case"checked":case"data":case"placeholder":case"src":case"srcset":case"href":case"title":case"value":return null;}else if(a.isMasked(t))switch(r){case"checked":case"data":return null;case"alt":case"placeholder":case"title":case"value":return h.maskText(n);}return n},t.scrubUrl=f;var v={};var y=new RegExp(".*","i")},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0;var i=navigator.userAgent;t.uaIsIE=i.indexOf("MSIE ")>-1||i.indexOf("Trident/")>-1,t.uaIsIE11=t.uaIsIE&&i.indexOf("rv:11")>-1,t.uaIsEdge=i.indexOf("Edge/")>-1,t.uaIsSafari=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent),t.uaPrefixedPropety=function(e,t){var r,i,o=0===t.indexOf("on")?function(e){return"on"+e+t.slice(2)}:function(e){return""+e+t.charAt(0).toUpperCase()+t.slice(1)},s=[function(){return t},function(){return o("webkit")},function(){return o("moz")},function(){return o("ms")}];try{for(var a=n(s),u=a.next();!u.done;u=a.next()){var c=(0,u.value)();if(c in e)return c}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a["return"])&&i.call(a)}finally{if(r)throw r.error}}return t}},function(e,t,r){"use strict";function n(e){return"function"==typeof e}t.__esModule=!0;var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,s=function(e,t){_[o]=e,_[o+1]=t,2===(o+=2)&&c()};var a=window.MutationObserver||window.WebKitMutationObserver,u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof self&&void 0!==self.importScripts&&"undefined"!=typeof MessageChannel;var c,h,d,l,f,p,_=new Array(1e3);function g(){for(var e=0;e<o;e+=2){(0,_[e])(_[e+1]),_[e]=void 0,_[e+1]=void 0}o=0}function v(e,t){var r=arguments,n=this,i=new this.constructor(E);void 0===i[m]&&U(i);var o,a=n._state;return a?(o=r[a-1],s(function(){return D(a,i,o,n._result)})):O(n,i,e,t),i}function y(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return R(t,e),t}a?(l=0,f=new a(g),p=document.createTextNode(""),f.observe(p,{characterData:!0}),c=function(){var e=l=++l%2;p.data=e+""}):u?((d=new MessageChannel).port1.onmessage=g,c=function(){return d.port2.postMessage(0)}):(h=setTimeout,c=function(){return h(g,1)});var m=Math.random().toString(36).substring(16);function E(){}var w=void 0,S=1,b=2,T=new F;function I(e){try{return e.then}catch(e){return T.error=e,T}}function N(e,t,r){t.constructor===e.constructor&&r===v&&t.constructor.resolve===y?function(e,t){t._state===S?k(e,t._result):t._state===b?C(e,t._result):O(t,void 0,function(t){return R(e,t)},function(t){return C(e,t)})}(e,t):r===T?(C(e,T.error),T.error=null):void 0===r?k(e,t):n(r)?function(e,t,r){s(function(e){var n=!1,i=function(e,t,r,n,i){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?R(e,r):k(e,r))},function(t){n||(n=!0,C(e,t))},e._label);!n&&i&&(n=!0,C(e,i))},e)}(e,t,r):k(e,t)}function R(e,t){var r;e===t?C(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=t)||"object"==typeof r&&null!==r?N(e,t,I(t)):k(e,t)}function x(e){e._onerror&&e._onerror(e._result),A(e)}function k(e,t){e._state===w&&(e._result=t,e._state=S,0!==e._subscribers.length&&s(A,e))}function C(e,t){e._state===w&&(e._state=b,e._result=t,s(x,e))}function O(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+S]=r,i[o+b]=n,0===o&&e._state&&s(A,e)}function A(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,s=0;s<t.length;s+=3)n=t[s],i=t[s+r],n?D(r,n,i,o):i(o);e._subscribers.length=0}}function F(){this.error=null}var M=new F;function D(e,t,r,i){var o,s,a,u,c=n(r);if(c){if((o=function(e,t){try{return e(t)}catch(e){return M.error=e,M}}(r,i))===M?(u=!0,s=o.error,o.error=null):a=!0,t===o)return void C(t,new TypeError("A promises callback cannot return that same promise."))}else o=i,a=!0;t._state!==w||(c&&a?R(t,o):u?C(t,s):e===S?k(t,o):e===b&&C(t,o))}var P=0;function U(e){e[m]=P++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[m]||U(this.promise),i(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}L.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===w&&r<e;r++)this._eachEntry(t[r],r)},L.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===y){var i=I(e);if(i===v&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===V){var o=new r(E);N(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},L.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===w&&(this._remaining--,e===b?C(n,r):this._result[t]=r),0===this._remaining&&k(n,this._result)},L.prototype._willSettleAt=function(e,t){var r=this;O(e,void 0,function(e){return r._settledAt(S,t,e)},function(e){return r._settledAt(b,t,e)})};var V=function(e){this[m]=P++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof V?function(e,t){try{t(function(t){R(e,t)},function(t){C(e,t)})}catch(t){C(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())};V.all=function(e){return new L(this,e).promise},V.race=function(e){var t=this;return i(e)?new t(function(r,n){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(r,n)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},V.resolve=y,V.reject=function(e){var t=new this(E);return C(t,e),t},V._setAsap=function(e){s=e},V._asap=s,V.prototype={constructor:V,then:v,"catch":function(e){return this.then(null,e)}},t.FSPromise="function"==typeof window.Promise?window.Promise:V},function(e,t,r){"use strict";t.__esModule=!0;var n=r(16),i=r(25);function o(e){return e._fs_ext_host||e._fs_host}function s(e){if(!e)return e;if(i.isLocalhost(i.domainFromHost(e)))return e;return 0==e.indexOf("www.")?"rs."+e.slice(4):0==e.indexOf("app.")?"rs."+e.slice(4):"rs."+e}function a(e){return e?i.isLocalhost(i.domainFromHost(e))?e:0==e.indexOf("www.")?"app."+e.slice(4):"app."+e:e}function u(e){return e?e+"/s/fs.js":void 0}t._fs_debug=function(e){return!!e._fs_ext_debug||!!e._fs_debug},t._fs_script=function(e){return e._fs_script||u(o(e))},t._fs_rec_host=function(e){return e._fs_rec_host||s(o(e))},t._fs_app_host=function(e){return e._fs_app_host||a(o(e))},t._fs_org=function(e){return e._fs_ext_org||e._fs_org},t._fs_csp=function(e){return e._fs_csp},t._fs_cookie_domain=function(e){return e._fs_cookie_domain},t._fs_ready=function(e){return e._fs_ready},t._fs_run_in_iframe=function(e){return!!e._fs_run_in_iframe},t._fs_is_outer_script=function(e){return!!e._fs_is_outer_script},t._fs_replay_flags=function(e){return e._fs_replay_flags},t._fs_transport=function(e){return e._fs_transport},t.set_fs_shutdown=function(e,t){e._fs_shutdown=t},t._fs_use_socket=function(e){return!!e._fs_use_socket},t.FS_q_drain=function(e){var t=n.getBrowserApi(e);if(!t)return[];var r=t.q;return r?(delete t.q,r):[]},t.FS_q_push=function(e,t){var r=n.getBrowserApi(e);if(r){var i=r.q;i||(i=r.q=[]),i.push(t)}},t.defaultGceHost=s,t.defaultAppHost=a,t.defaultScript=u},function(e,t,r){"use strict";t.__esModule=!0,t.now=function(){var e=Date.now();return"number"!=typeof e?new Date().getTime():e}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(22),i=new(function(){function e(){var e=n.theDummyDoc(),t=e.getElementById("urlresolver-base");t||((t=e.createElement("base")).id="urlresolver-base",e.head.appendChild(t));var r=e.getElementById("urlresolver-parser");r||((r=e.createElement("a")).id="urlresolver-parser",e.head.appendChild(r)),this.base=t,this.parser=r}return e.prototype.parseUrl=function(e,t){this.base.setAttribute("href",e),this.parser.setAttribute("href",t);var r=document.createElement("a");return r.href=this.parser.href,r},e.prototype.resolveUrl=function(e,t){return this.parseUrl(e,t).href},e.prototype.resolveToDocument=function(e,t){var r=o(e);return null==r?t:this.resolveUrl(r,t)},e}());function o(e){var t=e.document,r=e.location.href;if("string"==typeof t.baseURI)r=t.baseURI;else{var n=t.getElementsByTagName("base")[0];n&&n.href&&(r=n.href)}return"about:blank"==r&&e.parent!=e?o(e.parent):r}t.parseUrl=function(e,t){return i.parseUrl(e,t)},t.resolveUrl=function(e,t){return i.resolveUrl(e,t)},t.resolveUrlToDocument=function(e,t){return i.resolveToDocument(e,t)},t.baseUri=o},function(e,t,r){"use strict";t.__esModule=!0,t.tagName=function(e){var t=e;return t.tagName?"object"==typeof t.tagName?"form":t.tagName.toLowerCase():null}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0;var i,o=r(1),s=r(27),a=r(2),u=r(0);!function(e){e[e.Exclude=1]="Exclude",e[e.Mask=2]="Mask",e[e.Unmask=3]="Unmask",e[e.Watch=4]="Watch"}(i=t.WatchKind||(t.WatchKind={}));var c={1:"exclude",2:"mask",3:"unmask",4:"watch"},h=function(){function e(){this._hasWatched=!1,this._rules=Object.create?Object.create(null):{},this._rules[i.Exclude]=[],this._rules[i.Mask]=[],this._rules[i.Unmask]=[],this._rules[i.Watch]=[],this._consentRules=Object.create?Object.create(null):{},this._consentRules[i.Exclude]=[],this._consentRules[i.Mask]=[],this._consentRules[i.Unmask]=[],this._consentRules[i.Watch]=[]}return e.prototype.isWatched=function(e){var t,r,s,a,u,c,h,d;this._hasWatched=!0;var l=[i.Exclude,i.Mask,i.Unmask,i.Watch];try{for(var f=n(l),p=f.next();!p.done;p=f.next()){var _=p.value;try{for(var g=(s=void 0,n(this._rules[_])),v=g.next();!v.done;v=g.next()){var y=v.value;if(o.matchesSelector(e,y))return _}}catch(e){s={error:e}}finally{try{v&&!v.done&&(a=g["return"])&&a.call(g)}finally{if(s)throw s.error}}}}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=f["return"])&&r.call(f)}finally{if(t)throw t.error}}if(!this._consent)try{for(var m=n(l),E=m.next();!E.done;E=m.next()){_=E.value;try{for(var w=(h=void 0,n(this._consentRules[_])),S=w.next();!S.done;S=w.next()){y=S.value;if(o.matchesSelector(e,y))return _}}catch(e){h={error:e}}finally{try{S&&!S.done&&(d=w["return"])&&d.call(w)}finally{if(h)throw h.error}}}}catch(e){u={error:e}}finally{try{E&&!E.done&&(c=m["return"])&&c.call(m)}finally{if(u)throw u.error}}return null},e.prototype.addElementBlock=function(e){var t=i.Exclude;switch(e.Type){case u.BlockUnset:case u.BlockExclude:t=i.Exclude;break;case u.BlockBlock:t=i.Mask;break;case u.BlockRecord:t=i.Unmask;}return this.addRule(t,e.Consent,e.Selector)},e.prototype.addRule=function(e,t,r){if(this.tryToAddRule(e,t,r))return!0;switch(e){case i.Watch:case i.Unmask:break;case i.Mask:case i.Exclude:default:this._rules[e]=["*"];}return!1},e.prototype.tryToAddRule=function(e,t,r){try{return!(!r.match(s.WATCH_RULE_COMMENT)&&""!=o.trim(r))||this.mergeRule(e,t,r)}catch(e){return a.FsBugSnag.sendToBugsnag("Error adding block rule '"+r+"': "+e,"error"),!1}},e.prototype.getConsent=function(){return this._consent},e.prototype.initializeConsent=function(e){void 0===this._consent&&this.setConsent(e)},e.prototype.setConsent=function(e){this._consent!==e&&(this._consent=e,this._hasWatched&&this.onConsentChange&&this.onConsentChange())},e.prototype.mergeRule=function(e,t,r){var n=t?this._consentRules:this._rules,s=document.documentElement||document.createElement("div");try{o.matchesSelector(s,r)}catch(t){return a.FsBugSnag.sendToBugsnag("Browser rejected '"+c[e]+"' rule '"+r+"': "+t.toString(),"error"),!1}switch(e){case i.Exclude:case i.Mask:case i.Unmask:case i.Watch:break;default:e=i.Exclude;}if(0==n[e].length)return n[e].push(r),!0;var u=n[e].length-1,h=n[e][u].concat(", ",r);try{o.matchesSelector(s,h)}catch(t){return n[e].push(r),a.FsBugSnag.sendToBugsnag("Browser rejected merged '"+c[e]+"' rule when adding '"+r+"': "+t.toString(),"warning"),!0}return n[e][u]=h,!0},e.prototype.allConsentSensitiveElements=function(e){for(var t,r,o=[],s=i.Exclude;s<=i.Unmask;s++)try{for(var a=(t=void 0,n(this._consentRules[s])),u=a.next();!u.done;u=a.next())for(var c=u.value,h=e.querySelectorAll(c),d=0;d<h.length;d++)o.push(h[d])}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=a["return"])&&r.call(a)}finally{if(t)throw t.error}}return o},e}();t.Watcher=h},function(e,t,r){"use strict";t.__esModule=!0,t.Node_ELEMENT_NODE=1,t.Node_ATTRIBUTE_NODE=2,t.Node_TEXT_NODE=3,t.Node_CDATA_SECTION_NODE=4,t.Node_ENTITY_REFERENCE_NODE=5,t.Node_ENTITY_NODE=6,t.Node_PROCESSING_INSTRUCTION_NODE=7,t.Node_COMMENT_NODE=8,t.Node_DOCUMENT_NODE=9,t.Node_DOCUMENT_TYPE_NODE=10,t.Node_DOCUMENT_FRAGMENT_NODE=11,t.Node_NOTATION_NODE=12,t.XHR_UNSENT=0,t.XHR_OPENED=1,t.XHR_HEADERS_RECEIVED=2,t.XHR_LOADING=3,t.XHR_DONE=4,t.XHR_STATUS_ABORTED=0},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}t.__esModule=!0,n(r(38)),n(r(24))},function(e,t,r){"use strict";t.__esModule=!0,t.guard=function(e,t){return function(){try{return e.apply(this,arguments)}catch(e){try{t&&t(e)}catch(e){}}}},t.doNothing=function(){}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};t.__esModule=!0;var o=i(r(39)),s=r(1),a=r(40),u=r(3),c=r(41),h=r(10),d=r(16),l=r(30),f=r(61),p=r(14),_=r(0),g=r(5),v=r(2),y=r(63),m=r(19),E=r(9),w=r(4),S=r(7),b=r(6);function T(e,t){var r=b.fsid(e)+" ";return e.id&&(r+="#"+e.id),r+="[src="+S.scrubUrl(e.src,t,{source:"log",type:"debug"})+"]"}t.FS_REQUEST_FRAME_ID="RequestFrameId",t.FS_GREET_CHILD_FRAME="GreetFrame",t.FS_SET_FRAME_ID_CMD="SetFrameId",t.FS_IFRAME_EVENTS="EvtBundle",t.FS_SHUTDOWN_FRAME="ShutdownFrame",t.FS_RESTART_FRAME="RestartFrame",t.FS_SET_CONSENT="SetConsent",t.FS_INIT_MOBILE_CMD="InitFrameMobile",t.defaultInjector=function(e){var t=e.transport,r=e.frame,n=e.orgId,i=e.scheme,o=e.script,s=e.recHost,a=e.appHost,c=T(r,n);u.logIfDebug("Injecting into Frame "+c);try{if(function(e){return e.id==e.name&&N.test(e.id)}(r))return void u.logIfDebug("Blacklisted iframe: "+c);if(function(e){if(!e.contentDocument||!e.contentWindow||!e.contentWindow.location)return!0;return function(e){return!!e.src&&"about:blank"!=e.src&&e.src.indexOf("javascript:")<0}(e)&&e.src!=e.contentWindow.location.href&&"loading"==e.contentDocument.readyState}(r))return void u.logIfDebug("Frame not yet loaded: "+c);var h=r.contentWindow,l=r.contentDocument;if(!h||!l)return void u.logIfDebug("Missing contentWindow or contentDocument: "+c);if(!l.head)return void u.logIfDebug("Missing contentDocument.head: "+c);if(d.getBrowserApi(h))return void u.logIfDebug("FS already defined in Frame contentWindow: "+c+". Ignoring.");h._fs_org=n,h._fs_script=o,h._fs_rec_host=s,h._fs_app_host=a,h._fs_debug=u.isDebug(),h._fs_run_in_iframe=!0,t&&(h._fs_transport=t);var f=l.createElement("script");f.async=!0,f.crossOrigin="anonymous",f.src=i+"//"+o,"testdrive"==n&&(f.src+="?allowMoo=true"),l.head.appendChild(f)}catch(e){u.logIfDebug("iFrame no injecty. Probably not same origin.")}};var I,N=/^fb\d{18}$/;!function(e){e[e.NoInfoYet=1]="NoInfoYet",e[e.Enabled=2]="Enabled",e[e.Disabled=3]="Disabled"}(I=t.GetCurrentSessionEnabledState||(t.GetCurrentSessionEnabledState={}));var R=function(){function e(e,t,r,n){var i=this;this._ctx=e,this._transport=r,this._injector=n,this._bundleUploadInterval=_.DefaultBundleUploadInterval,this._iFrames=[],this._pendingChildFrameIdInits=[],this._listeners=new a.DomListeners,this._getCurrentSessionEnabled=I.NoInfoYet,this._resourceUploadingEnabled=!1,this._tickerTasks=[],this._watcher=new p.Watcher,this._queue=new f.EventQueue(e,this._transport,function(e){for(var t=i._eventWatcher.bundleEvents(e),r=void 0;r=i._tickerTasks.pop();)r();return t},t),this._eventWatcher=new c.EventWatcher(e,this._queue,this._watcher,this._listeners,function(e){i.onFrameCreated(e)},function(e){i.beforeFrameRemoved(e)},new y.ResourceUploader(e,this._queue,new m.HttpResourceProtocol(e))),this._consoleWatcher=new l.ConsoleWatcher(e,this._queue,this._listeners),this._scheme=e.options.scheme,this._script=e.options.script,this._recHost=e.options.recHost,this._appHost=e.options.appHost,this._orgId=e.options.orgId,this._wnd=e.window}return e.prototype.bundleUploadInterval=function(){return this._bundleUploadInterval},e.prototype.start=function(e,t){var r=this;this._onFullyStarted=t,"onpagehide"in this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(e){r.onUnload()}):this._listeners.add(this._wnd,"unload",!1,function(e){r.onUnload()}),this._listeners.add(this._wnd,"message",!1,function(e){if("string"==typeof e.data){var t=e.source;r.postMessageReceived(t,k(e.data))}});var n=this._wnd.Document?this._wnd.Document.prototype:this._wnd.document;this._docCloseHook=s.activateHook(n,"close"),this._docCloseHook&&this._docCloseHook.afterAsync(function(){r._listeners.refresh()})},e.prototype.queue=function(){return this._queue},e.prototype.eventWatcher=function(){return this._eventWatcher},e.prototype.console=function(){return this._consoleWatcher},e.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()},e.prototype.onLoad=function(){this._eventWatcher.onLoad()},e.prototype.shutdown=function(e){this._eventWatcher.shutdown(e),this._consoleWatcher.disable(),this._listeners&&this._listeners.clear(),this._docCloseHook&&this._docCloseHook.disable(),this.tellAllFramesTo([t.FS_SHUTDOWN_FRAME])},e.prototype.tellAllFramesTo=function(e){for(var t=0;t<this._iFrames.length;t++){var r=this._iFrames[t];r.contentWindow&&x(r.contentWindow,e)}},e.prototype.getCurrentSessionURL=function(e){var t=this._getCurrentSessionEnabled;if(t==I.NoInfoYet)return null;if(t==I.Disabled)return this._scheme+"//"+this._appHost+"/opt/upgrade";var r=this.getCurrentSession();return r?(e&&(r+=":"+this._ctx.time.wallTime()),this._scheme+"//"+this._appHost+"/ui/"+this._ctx.options.orgId+"/session/"+encodeURIComponent(r)):null},e.prototype.getCurrentSession=function(){var e=this._getCurrentSessionEnabled;return e==I.NoInfoYet||e==I.Disabled?null:this._userId?this._userId+":"+this._sessionId:null},e.prototype.setConsent=function(e){this._watcher.setConsent(e),this.tellAllFramesTo([t.FS_SET_CONSENT,e])},e.prototype.pageSignature=function(){return this._userId+":"+this._sessionId+":"+this._pageId},e.prototype.fireFsReady=function(e){void 0===e&&(e=!1);var t=h._fs_ready(this._wnd);if(t)try{e?t(!0):t()}catch(e){u.logIfDebug("exception in _fs_ready(): "+e)}},e.prototype.onUnload=function(){this._queue.addUnload(_.UnloadReasonUnload),g.Scheduler.stopAll()},e.prototype.handleResponse=function(e){this._pageRsp=e,this._userId=e.UserIntId,this._sessionId=e.SessionIntId,this._pageId=e.PageIntId,this._serverPageStart=e.PageStart,this._getCurrentSessionEnabled=e.GetCurrentSessionEnabled?I.Enabled:I.Disabled,"number"==typeof e.BundleUploadInterval&&(this._bundleUploadInterval=e.BundleUploadInterval),e.ResourceUploadingEnabled&&this.enableResourceUploading(),e.AjaxWatcherEnabled&&this.enableAjaxWatcher(),e.ConsoleWatcherEnabled&&this.enableConsoleWatcher(),e.AjaxWatcherEnabled&&e.AjaxWatches&&this._eventWatcher.ajaxWatcher().setWatches(e.AjaxWatches),this.addAllWatchRules(e.WhitelistElementsEnabled,e.ElementBlocks,e.ElementWatches),this._watcher.initializeConsent(!!e.Consented)},e.prototype.addAllWatchRules=function(e,t,r){var i,s;try{for(var a=n(o["default"]),u=a.next();!u.done;u=a.next()){var c=u.value;this._watcher.addElementBlock(c)}}catch(e){i={error:e}}finally{try{u&&!u.done&&(s=a["return"])&&s.call(a)}finally{if(i)throw i.error}}if(e&&this._watcher.addElementBlock({Type:p.WatchKind.Mask,Consent:!1,Selector:"body"}),t)for(var h=0;h<t.length;++h)this._watcher.addElementBlock(t[h]);if(r)for(h=0;h<r.length;++h)this._watcher.addRule(p.WatchKind.Watch,!1,r[h].Selector)},e.prototype.fullyStarted=function(){this._onFullyStarted()},e.prototype.enableResourceUploading=function(){this._resourceUploadingEnabled=!0,this._eventWatcher.initResourceUploading()},e.prototype.enableAjaxWatcher=function(){this.eventWatcher().ajaxWatcher().enable()},e.prototype.enableConsoleWatcher=function(){this.console().enable()},e.prototype.flushPendingChildFrameInits=function(){if(this._pendingChildFrameIdInits.length>0){for(var e=0;e<this._pendingChildFrameIdInits.length;e++)this._pendingChildFrameIdInits[e]();this._pendingChildFrameIdInits=[]}},e.prototype.inject=function(e){var t=this,r={send:function(r,n,i){E.FSPromise.resolve().then(v.FsBugSnag.wrap(function(){t.postMessageReceived(e.contentWindow,[r,w.windex.jsonParse(n),i])}))}};this._injector({frame:e,transport:r,orgId:this._orgId,scheme:this._scheme,script:this._script,recHost:this._recHost,appHost:this._appHost})},e.prototype.onFrameCreated=function(e){var r=this;if(b.fsid(e)){this._iFrames.push(e);var n=function(e){var t=e.src,r=location.protocol+"//"+location.host;return!t||"about:blank"==t||s.hasPrefix(t,"javascript:")||s.hasPrefix(t,r)}(e),i=!1;if(e.contentWindow)try{i=!!d.getBrowserApi(e.contentWindow)}catch(e){i=!0}(!n||i)&&e.contentWindow&&e.contentWindow.postMessage?(u.logIfDebug("Cross-origin iframe "+T(e,this._orgId)),x(e.contentWindow,[t.FS_GREET_CHILD_FRAME])):n?(u.logIfDebug("Attempting to setup Frame "+T(e,this._orgId)),this.inject(e),e.addEventListener("load",v.FsBugSnag.wrap(function(t){try{r._tickerTasks.push(function(){u.logIfDebug("onload for frame "+T(e,r._orgId)),r.inject(e)})}catch(t){v.FsBugSnag.sendToBugsnag(t,"error")}}))):u.logIfDebug("Frame Doesn't need injecting. Probably cross domain "+T(e,this._orgId))}else u.logIfDebug("fsid missing or invalid for iFrame "+T(e,this._orgId))},e.prototype.beforeFrameRemoved=function(e){for(var t=0;t<this._iFrames.length;t++){if(e==this._iFrames[t])return void this._iFrames.splice(t,1)}},e.prototype.postMessageReceived=function(e,r){if(!e||e.parent==this._wnd)switch(r[0]){case t.FS_IFRAME_EVENTS:var n=r[1],i=this.pageSignature(),o=r[2];if(i!=o)return v.FsBugSnag.sendToBugsnag("Page signature mismatch: "+i+" != "+o,"warning"),void(e&&x(e,[t.FS_SHUTDOWN_FRAME]));n.length>0&&this._transport.enqueueEvents(i,n);break;case t.FS_REQUEST_FRAME_ID:if(!e)return void u.logIfDebug("No MessageEvent.source, iframe may have unloaded.");var s=this.iFrameWndToFsId(e);s?(u.logIfDebug("Responding to FID request for frame "+s),this.sendFrameIdToInnerFrame(e,s)):u.logIfDebug("No FrameId found. Hoping to send one later.");}},e.prototype.sendFrameIdToInnerFrame=function(e,r){var n=this,i=function(){var i=[];0!=n._frameId&&(i=n._parentIds?n._parentIds.concat(n._frameId):[n._frameId]);var o=n._ctx.time.startTime();x(e,[t.FS_SET_FRAME_ID_CMD,r,i,o,n._scheme,n._script,n._appHost,n._orgId,n._pageRsp])};null==this._frameId?this._pendingChildFrameIdInits.push(i):i()},e.prototype.iFrameWndToFsId=function(e){for(var t=0;t<this._iFrames.length;t++)if(this._iFrames[t].contentWindow==e)return b.fsid(this._iFrames[t]);return u.logIfDebug("Unable to locate frame for window"),NaN},e}();function x(e,t){e&&e.postMessage&&e.postMessage(s.stringify({__fs:t}),"*")}function k(e){try{var t=s.parseJson(e);if("__fs"in t)return t.__fs}catch(e){}return[]}t.AbstractRecorder=R,t.parsePostMessageData=k},function(e,t,r){"use strict";t.__esModule=!0;var n=r(1),i=r(3),o=r(2),s=r(9),a=r(15),u=r(0),c=function(){function e(e){this._byteCount=0,this._scheme=e.options.scheme,this._recHost=e.options.recHost}return e.prototype.page=function(e,t,r){this.post("/rec/page",n.stringify(e),function(e){try{t(n.parseJson(e))}catch(e){r(0)}},r)},e.prototype.bundle=function(e){var t=n.stringify(e.bundle);this._byteCount+=t.length,i.logIfDebug("total bytes written: "+this._byteCount);var r=d(e.bundle.Seq,e);return this.post(r,t,function(t){try{e.win(n.parseJson(t))}catch(r){o.FsBugSnag.sendToBugsnag("Failed to JSON parse /rec/bundle response: "+t+": "+r,"error"),e.lose(0)}},e.lose),this._byteCount},e.prototype.bundleBeacon=function(e){return f(this._scheme,this._recHost,e)},e.prototype.exponentialBackoffMs=function(e,t){var r=Math.min(u.BackoffMax,5e3*Math.pow(2,e));return t?r+.25*Math.random()*r:r},e.prototype.post=function(e,t,r,n){l(this._scheme,this._recHost,e,t,r,n)},e}();t.HttpProtocol=c;var h=function(){function e(e){this._scheme=e.options.scheme,this._recHost=e.options.recHost}return e.prototype.newResources=function(e,t){var r=this;return new s.FSPromise(function(i,o){l(r._scheme,r._recHost,"/rec/newResources?OrgId="+e,n.stringify(t),i,o)})},e.prototype.uploadResource=function(e){var t=this;return new s.FSPromise(function(r,n){l(t._scheme,t._recHost,"/rec/uploadResource",e,r,n)})},e}();function d(e,t){var r="/rec/bundle?OrgId="+t.orgId+"&UserId="+t.userId+"&SessionId="+t.sessionId+"&PageId="+t.pageId+"&Seq="+e;return null!=t.serverPageStart&&(r+="&PageStart="+t.serverPageStart),null!=t.serverBundleTime&&(r+="&PrevBundleTime="+t.serverBundleTime),null!=t.lastUserActivityTime&&(r+="&LastActivityTime="+t.lastUserActivityTime),null!=t.deltaT&&(r+="&DeltaT="+t.deltaT),r}function l(e,t,r,n,i,s){var u="//"+t+r,c=!1,h=new XMLHttpRequest;if("withCredentials"in h)h.onreadystatechange=function(){if(h.readyState==a.XHR_DONE){if(c)return;c=!0;try{200==h.status?i(h.responseText):s&&s(h.status)}catch(e){o.FsBugSnag.sendToBugsnag(e,"error")}}},h.open("POST",e+u,!0),h.withCredentials=!0,"function"!=typeof n.append&&h.setRequestHeader("Content-Type","text/plain"),h.send(n);else{var d=new XDomainRequest;d.onload=function(){i(d.responseText)},d.onerror=function(){s&&s("Not Found"==d.responseText?404:500)},d.onprogress=function(){},d.open("POST",u),d.send(n)}}function f(e,t,r){var i=e+"//"+t+d(r.bundle.Seq,r)+"&SkipResponseBody=true";return"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(i,n.stringify(r.bundle))}t.HttpResourceProtocol=h,t.bundleUrl=d,t.bundleBeacon=f},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s};t.__esModule=!0;var i=r(3),o=r(11);t.BAD_APP_IDS=["","0","1","-1","true","false","n/a","nan","undefined","null","nil","the_id_that_you_use_in_your_app_for_this_user"];var s=["811c9dc5","350ca8af","340ca71c","14cd0a2b","4db211e5","0b069958","3613e041","2f8f13ba","9b61ad43","77074ba4","0da3f8ec","1c750511"],a=function(){return Math.floor(o.now()/1e3)};t.freshCookieExpirationTimeSeconds=function(){return a()+31536e3},t.parseIdentityCookie=function(e){if(!e)return null;var r=n(e.split("/"),2),o=r[0],u=r[1],c=parseInt(u),h=a(),d=t.freshCookieExpirationTimeSeconds();if(isNaN(c)&&(c=d),c<=h)return null;c>d&&(c=d);var l=o.split("`");if(l.length<3)return null;var f=n(l,4),p=f[0],_=f[1],g=f[2],v=f[3],y="";void 0!==v&&(y=decodeURIComponent(v),(t.BAD_APP_IDS.indexOf(y)>=0||s.indexOf(y)>=0)&&(i.logIfDebug("Ignoring invalid app key \""+y+"\" from cookie."),y=""));var m=n(g.split(":"),2);return{expirationAbsTimeSeconds:c,host:p,orgId:_,userId:m[0],sessionId:m[1]||"",appKeyHash:y}},t.getCookies=function(e){for(var t={},r=e.cookie.split(";"),n=0;n<r.length;n++){var i=r[n].replace(/^\s+|\s+$/g,"").split("=");t[i[0]]||(t[i[0]]=i[1])}return t}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s};t.__esModule=!0;var i=r(4);function o(e){return e&&e.body&&e.documentElement?"BackCompat"==e.compatMode?[e.body.clientWidth,e.body.clientHeight]:[e.documentElement.clientWidth,e.documentElement.clientHeight]:[0,0]}t.getDocumentClientArea=o;var s=function(){function e(e,t){var r,i;this.hasKnownPosition=!1,this.pageLeft=0,this.pageTop=0,this.width=0,this.height=0,this.clientWidth=0,this.clientHeight=0;var s=e.document;if(s&&s.documentElement&&s.body){if("visualViewport"in e){var a=s.documentElement.getBoundingClientRect();this.hasKnownPosition=!0,this.pageLeft=0==a.left?0:-a.left,this.pageTop=0==a.top?0:-a.top}if(r=n(o(s),2),this.clientWidth=r[0],this.clientHeight=r[1],void 0!==t&&this.clientWidth==t.clientWidth&&this.clientHeight==t.clientHeight&&t.width>0&&t.height>0)return this.width=t.width,void(this.height=t.height);i=n(this.computeLayoutViewportSizeFromMediaQueries(e),2),this.width=i[0],this.height=i[1]}}return e.prototype.computeLayoutViewportSizeFromMediaQueries=function(e){var t=this.findMediaValue(e,"width",this.clientWidth,this.clientWidth+128);void 0===t&&(t=this.tryToGet(e,"innerWidth")),void 0===t&&(t=this.clientWidth);var r=this.findMediaValue(e,"height",this.clientHeight,this.clientHeight+128);return void 0===r&&(r=this.tryToGet(e,"innerHeight")),void 0===r&&(r=this.clientHeight),[t,r]},e.prototype.findMediaValue=function(e,t,r,n){if(i.windex.matchMedia){var o=i.windex.matchMedia(e,"(min-"+t+": "+r+"px)");if(null!=o){if(o.matches&&i.windex.matchMedia(e,"(max-"+t+": "+r+"px)").matches)return r;for(;r<=n;){var s=Math.floor((r+n)/2);if(i.windex.matchMedia(e,"(min-"+t+": "+s+"px)").matches){if(i.windex.matchMedia(e,"(max-"+t+": "+s+"px)").matches)return s;r=s+1}else n=s-1}}}},e.prototype.tryToGet=function(e,t){try{return e[t]}catch(e){return}},e}();function a(e,t){return new s(e,t)}t.getLayoutViewport=a;var u=function(){return function(e,t){this.offsetLeft=0,this.offsetTop=0,this.pageLeft=0,this.pageTop=0,this.width=0,this.height=0,this.scale=0;var r=e.document;if(r.body){var n="BackCompat"==r.compatMode;"pageXOffset"in e?(this.pageLeft=e.pageXOffset,this.pageTop=e.pageYOffset):r.scrollingElement?(this.pageLeft=r.scrollingElement.scrollLeft,this.pageTop=r.scrollingElement.scrollTop):n?(this.pageLeft=r.body.scrollLeft,this.pageTop=r.body.scrollTop):r.documentElement&&(r.documentElement.scrollLeft>0||r.documentElement.scrollTop>0)?(this.pageLeft=r.documentElement.scrollLeft,this.pageTop=r.documentElement.scrollTop):(this.pageLeft=r.body.scrollLeft||0,this.pageTop=r.body.scrollTop||0),this.offsetLeft=this.pageLeft-t.pageLeft,this.offsetTop=this.pageTop-t.pageTop;try{var i=e.innerWidth,o=e.innerHeight}catch(e){return}if(0!=i&&0!=o){this.scale=t.width/i,this.scale<1&&(this.scale=1);var s=t.width-t.clientWidth,a=t.height-t.clientHeight;this.width=i-s/this.scale,this.height=o-a/this.scale}}}}();t.getVisualViewport=function(e,t){return"visualViewport"in e?e.visualViewport:(void 0===t&&(t=a(e)),new u(e,t))}},function(e,t,r){"use strict";t.__esModule=!0;var n={};var i="__default";t.theDummyDoc=function(e){void 0===e&&(e=i);var t=n[e];return t||(t=function(){var e=document.implementation.createHTMLDocument("");return e.head||e.documentElement.appendChild(e.createElement("head")),e.body||e.documentElement.appendChild(e.createElement("body")),e}(),e!==i&&(t.open(),t.write(e),t.close()),n[e]=t),t}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});t.__esModule=!0;var o=function(){function e(e){void 0===e&&(e=4),this.hashCount=e,this.idx=0,this.hashMask=e-1,this.reset()}return e.prototype.reset=function(){this.idx=0,this.hash=[];for(var e=0;e<this.hashCount;++e)this.hash.push(2166136261)},e.prototype.write=function(e){for(var t=this.hashMask,r=this.idx,n=0;n<e.length;n++)this.hash[r]=this.hash[r]^e[n],this.hash[r]+=(this.hash[r]<<1)+(this.hash[r]<<4)+(this.hash[r]<<7)+(this.hash[r]<<8)+(this.hash[r]<<24),r=r+1&t;this.idx=r},e.prototype.writeAscii=function(e){for(var t=this.hashMask,r=this.idx,n=0;n<e.length;n++)this.hash[r]=this.hash[r]^e.charCodeAt(n),this.hash[r]+=(this.hash[r]<<1)+(this.hash[r]<<4)+(this.hash[r]<<7)+(this.hash[r]<<8)+(this.hash[r]<<24),r=r+1&t;this.idx=r},e.prototype.sum=function(){return function(e){var t=e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map(Number),r=String.fromCharCode.apply(window,t);if(window.btoa)return window.btoa(r);return u(r)}(this.sumAsHex()).replace(/\+/g,"-").replace(/\//g,"_")},e.prototype.sumAsHex=function(){for(var e="",t=0;t<this.hashCount;++t)e+=("00000000"+(this.hash[t]>>>0).toString(16)).slice(-8);return e},e}();t._FSNV=o,t.hashString32Blocking=function(e){var t=new o(1);return t.writeAscii(e),t.sumAsHex()};var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(Error);function u(e){for(var t=String(e),r=[],n=0,i=0,o=0,u=s;t.charAt(0|o)||(u="=",o%1);r.push(u.charAt(63&n>>8-o%1*8))){if((i=t.charCodeAt(o+=.75))>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return r.join("")}t._jsbtoa=u},function(e,t,r){"use strict";t.__esModule=!0;var n="_fs_loaded",i="_fs_namespace";function o(e){return e}t.getGlobalsOn=o;var s,a="FS";function u(e){return e[n]}t.getNamespace=function(e){if(s)return s;var t=u(e);return t?(s=t,t):(t=o(e)[i])?(s=t,t):s=a},t.isLoaded=u,t.setLoaded=function(e,t){e[n]=t,t in e||(e[t]={})}},function(e,t,r){"use strict";t.__esModule=!0,t.domainFromHost=function(e){var t=e,r=t.indexOf(":");return r>=0&&(t=t.slice(0,r)),t},t.isLocalhost=function(e){return"localhost"==e||"127.0.0.1"==e},t.isIP=function(e){return!!e.match(/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/g)}},function(e,t,r){"use strict";t.__esModule=!0},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s};t.__esModule=!0;t.urlValueDelims=[["url\\(\\s*\"","\"\\s*\\)"],["url\\(\\s*'","'\\s*\\)"],["url\\(\\s*","\\s*\\)"]];var i=[["@import\\s+\"","\""],["@import\\s+'","'"]].concat(t.urlValueDelims),o=/(?:[^\\](?:\\\\)*)/.source;t.urlPattern=".*?"+o,t.CSS_URL=new RegExp(i.map(function(e){var r=n(e,2),i=r[0],o=r[1];return"("+i+")("+t.urlPattern+")("+o+")"}).join("|"),"g"),t.replaceCssUrls=function(e,r){return e.replace(t.CSS_URL,function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=t[0]||t[3]||t[6]||t[9]||t[12],o=t[1]||t[4]||t[7]||t[10]||t[13],s=t[2]||t[5]||t[8]||t[11]||t[14],a=t[15];return r(i,o,s,a)})},t.SIMPLE_CSS_URL=/url\(["']?(.+?)["']?\)/g,t.QUOTES=/\"|'/g,t.HOVER=/\:hover/g,t.FOCUS=/\:focus/g,t.FOCUS_WITHIN=/\:focus-within/g,t.MEDIA_QUERY=/(@media.*?{)/g,t.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/,t.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/,t.IPv4_PART=/^[0-9]{1,3}$/,t.IPv6_PART=/^[0-9a-f]{0,4}$/,t.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/,t.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t.IMAGE_FILENAME=/\.(jpe?g|png|svg|gif|bmp)$/,t.WATCH_RULE_COMMENT=/^\s*\/\//,t.DATA_URI=/^data:([^;,]*)[;,]/i,t.SKETCHY_CONTENT_TYPES=/(application|script|text\/js|text\/html)/i,t.WHITELISTED_CONTENT_TYPES=/(^application\/octet-stream)|(^font\/)|(^application\/[a-z_.-]*font)/i,t.SKETCHY_URI_SCHEMES=/javascript:|file:/i},function(e,t,r){"use strict";t.__esModule=!0;var n="repeat"in String.prototype?function(e){return" ".repeat(e)}:function(e){for(var t="",r=0;r<e;r++)t+=" ";return t},i="\u25AA\u25AA\u25AA\u25AA\u25AA\u25AA\u25AA\u25AA",o=new RegExp("[^\\s]"),s=new RegExp("[\\s]*$");t.maskText=function(e){var t=o.exec(e);if(!t)return e;for(var r=t.index,a=(t=s.exec(e))?e.length-t.index:0,u=n(r),c=e.length-(r+a),h=0;h<c;){var d=Math.min(4,c-h);u+=i.substring(0,d),(h+=d)==c-1?(u+="\u25AA",h++):h<c&&(u+=" ",h++)}return u+=n(a)},t.wasMasked=function(e){return!/[^▪ ]/.test(e)&&!/  /.test(e.trim())}},function(e,t,r){"use strict";t.__esModule=!0,t.parseFieldPatterns=function(e){var t=0,r={id:t++,edges:{}};return e.split("\n").forEach(function(e){if(""!=(e=e.trim())){if(0==e.indexOf("/")||e.lastIndexOf("/")==e.length-1)throw new Error("Leading and trailing slashes are not supported");var n=r,i=e.split("/");i.forEach(function(e,r){if(""===(e=e.trim()))throw new Error("Empty elements are not allowed");if("**"!=e&&"*"!=e&&-1!=e.indexOf("*"))throw new Error("Embedded wildcards are not supported");var o=null;"**"==e?(n.loop=!0,o=n):e in n.edges&&(o=n.edges[e]),o||(o={id:t++,edges:{}},n.edges[e]=o),r==i.length-1&&(o.term=!0),n=o})}}),r}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0;var i=r(0),o=r(1),s=r(60),a=r(13),u=r(8),c=r(4),h=r(6),d=function(){function e(e,t,r){this._queue=t,this._enabled=!1,this._overflow=!1,this._total=0,this._hooks=[],this._wnd=e.window,this._listeners=r.createChild();var n=e.options.orgId;this.maxLogsPerPage="P2C"==n||"ESHFX"==n||"6HFXR"==n?3e3:i.MAX_LOGS_PER_PAGE}return e.prototype._overflowMsg=function(){return"\"[received more than "+this.maxLogsPerPage+" messages]\""},e.prototype.enable=function(){var e,t,r=this;if(this._listeners.add(this._wnd,"error",!0,function(e){return r.addError(e)}),this._listeners.add(this._wnd,"unhandledrejection",!0,function(e){r.addLog("error",["Uncaught (in promise)",e.reason])},!0),!this._enabled)if(this._enabled=!0,this._queue.enqueue(i.EVENT_REC_FEAT_SUPPORTED,[i.RecFeatureConsole,!0]),this._wnd.console){var s=function(e){var t=o.activateHook(a._wnd.console,e);if(!t)return"continue";t.before(function(t){var n=t.args;return r.addLog(e,n)}),a._hooks.push(t)},a=this;try{for(var u=n(["log","info","warn","error"]),c=u.next();!c.done;c=u.next()){s(c.value)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=u["return"])&&t.call(u)}finally{if(e)throw e.error}}}else this.addLog("log",["NOTE: Log messages cannot be captured on IE9"])},e.prototype.isEnabled=function(){return this._enabled},e.prototype.disable=function(){var e;if(this._listeners&&this._listeners.clear(),this._enabled)for(this._enabled=!1;e=this._hooks.pop();)e.disable()},e.prototype.addLog=function(e,t){if(this.checkOverflow()){for(var r=[e],n=0;n<t.length;++n)r.push(l(t[n],1e3));this._queue.enqueue(i.EVENT_LOG,r)}},e.prototype.addError=function(e){if(this.checkOverflow()){var t=e.message,r=e.filename,n=e.lineno;if(t||r||n){"object"==typeof t&&(t=l(t,1e3)),"object"==typeof r&&(r=l(r,100)),"object"==typeof n&&(n=-1);var o=[t,r,n];o=o.concat(s.stackTraceFromError(e.error)),this._queue.enqueue(i.EVENT_ERROR,o)}}},e.prototype.checkOverflow=function(){return!this._overflow&&(this._total==this.maxLogsPerPage?(this._queue.enqueue(i.EVENT_LOG,["warn",this._overflowMsg()]),this._overflow=!0,!1):(this._total++,!0))},e}();function l(e,t){try{var r={tokens:[],opath:[],cyclic:function(e,t){var r=0;try{c.windex.jsonStringify(e,function(e,n){if(r++>t)throw"break";if("object"==typeof n)return n})}catch(e){return"break"!=e}return!1}(e,t/4)};return function e(t,r,n,i){if(r<1)return 0;var s=t&&t.constructor==Date?f(t):function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&e.nodeType>0&&"string"==typeof e.nodeName}(t)?function(e){if(!h.fsidIfNotExcluded(e))return e.toString();if(e.tagName){var t=a.tagName(e),r=u.uaIsEdge&&"output"==t?{}:e.attributes;return"<"+t+(r&&r.type?" type=\""+r.type.value+"\"":"")+(e.id?" id=\""+e.id+"\"":"")+(e.className?" class=\""+e.className+"\"":"")+">"+(e.firstChild?"...":"")+"</"+t+">"}var n="";return e.data&&e.data.substring&&(n=" "+e.data.substring(0,50)+(e.data.length>50?"...":"")),e.nodeName+n}(t):void 0===t?"undefined":"object"!=typeof t||null==t?t:t instanceof Error?t.stack||t.name+": "+t.message:void 0;if(void 0!==s)return void 0===(s=c.windex.jsonStringify(s))?0:("\""==s[0]&&(s=p(s,r,"...\"")),s.length<=r?(i.tokens.push(s),s.length):0);if(i.cyclic){i.opath.splice(n);var d=i.opath.lastIndexOf(t);if(d>-1){var l="<Cycle to ancestor #"+(n-d-1)+">";return l="\""+p(l,r-2)+"\"",i.tokens.push(l),l.length}i.opath.push(t)}var _=r;var g=function(e){return _>=e.length&&(_-=e.length,i.tokens.push(e),!0)};var v=function(e){var t=i.tokens[i.tokens.length-1];","==t?i.tokens[i.tokens.length-1]=e:g(e)};if(_<2)return 0;if(o.isArray(t)){g("[");for(var y=0;y<t.length&&_>0;y++){var m=e(t[y],_-1,n+1,i);if(_-=m,0==m&&!g("null"))break;g(",")}v("]")}else{g("{");for(var E=o.keys(t),y=0;y<E.length&&_>0;y++){var w=E[y],S=t[w];if(!g("\""+w+"\":"))break;var m=e(S,_-1,n+1,i);if(0==m){i.tokens.pop();break}_-=m,g(",")}v("}")}return r==1/0?1:r-_}(e,t,0,r),r.tokens.join("")}catch(e){return o.jsonErrorString(e)}}t.ConsoleWatcher=d,t.stringifyLogMessage=l;var f=function(e){return isNaN(e)?"Invalid Date":e.toUTCString()},p=function(e,t,r){return void 0===r&&(r="..."),e.length<=t?e:e.length<=r.length||t<=r.length?e.substring(0,t):e.substring(0,t-r.length)+r}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(9),i=r(17),o=r(4);t.createFSPromise=function(){var e,t;return{promise:new n.FSPromise(function(r,n){e=r,t=n}),resolve:e,reject:t}},t.wait=function(e){return new n.FSPromise(function(t){o.windex.setWindowTimeout(window,i.guard(t),e)})}},function(e,t,r){"use strict";t.__esModule=!0,t.isErrorFatal=function(e){return e>=400||202==e||206==e}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(25),i=r(20),o=r(10),s=r(0),a=r(23),u=r(11);t.HighlightTypeFsId="fsidentity",t.HighlightTypeNewUid="newuid",t.UID_COOKIE="fs_uid";var c=function(){function e(e){void 0===e&&(e=document),this._doc=e,this._cookies={}}return e.prototype.initFromCookies=function(e,r){this._cookies=i.getCookies(this._doc);var n=this._cookies[t.UID_COOKIE];if(!n)try{n=localStorage[s.UidLocalStorageKey]}catch(e){}var o=i.parseIdentityCookie(n);o&&o.host.replace(/^www\./,"")==e.replace(/^www\./,"")&&o.orgId==r?this._cookie=o:this._cookie={expirationAbsTimeSeconds:i.freshCookieExpirationTimeSeconds(),host:e,orgId:r,userId:"",sessionId:"",appKeyHash:""}},e.prototype.initFromParsedCookie=function(e){this._cookie=e},e.prototype.clear=function(){this._cookie.userId=this._cookie.sessionId=this._cookie.appKeyHash="",this._cookie.expirationAbsTimeSeconds=i.freshCookieExpirationTimeSeconds(),this._write()},e.prototype.host=function(){return this._cookie.host},e.prototype.orgId=function(){return this._cookie.orgId},e.prototype.userId=function(){return this._cookie.userId},e.prototype.sessionId=function(){return this._cookie.sessionId},e.prototype.appKeyHash=function(){return this._cookie.appKeyHash},e.prototype.cookieData=function(){return this._cookie},e.prototype.cookies=function(){return this._cookies},e.prototype.setCookie=function(e,t,r){void 0===r&&(r=new Date(u.now()+6048e5).toUTCString());var n=e+"="+t;this._domain?n+="; domain=."+encodeURIComponent(this._domain):n+="; domain=",n+="; Expires="+r+"; path=/; SameSite=Strict","https:"===location.protocol&&(n+="; Secure"),this._doc.cookie=n},e.prototype.setIds=function(e,t,r,i){(n.isLocalhost(t)||n.isIP(t))&&(t="");var s=o._fs_cookie_domain(e);"string"==typeof s&&(t=s),this._domain=t,this._cookie.userId=r,this._cookie.sessionId=i,this._write()},e.prototype.clearAppId=function(){return!!this._cookie.appKeyHash&&(this._cookie.appKeyHash="",this._write(),!0)},e.prototype.setAppId=function(e){this._cookie.appKeyHash=a.hashString32Blocking(e),this._write()},e.prototype.encode=function(){var e=this._cookie.host+"`"+this._cookie.orgId+"`"+this._cookie.userId+":"+this._cookie.sessionId;return this._cookie.appKeyHash&&(e+="`"+encodeURIComponent(this._cookie.appKeyHash)+"`"),e+="/"+this._cookie.expirationAbsTimeSeconds},e.prototype._write=function(){if(null!=this._domain){var e=this.encode(),r=new Date(1e3*this._cookie.expirationAbsTimeSeconds).toUTCString();this.setCookie(t.UID_COOKIE,e,r);try{localStorage[s.UidLocalStorageKey]=e}catch(e){}}},e}();t.Identity=c},function(e,t,r){"use strict";t.__esModule=!0,r(35).main()},function(e,t,r){"use strict";t.__esModule=!0,r(36);var n=r(37),i=r(2),o=r(10);t.main=function(){try{new n.Conductor().init()}catch(e){i.FsBugSnag.sendToBugsnag(e,"error"),o._fs_debug(window)&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}}},function(e,t,r){"use strict";t.__esModule=!0},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n["throw"](e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n["return"]:o[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};t.__esModule=!0;var u=r(2),c=r(18),h=r(65),d=r(68),l=r(33),f=r(70),p=r(16),_=r(4),g=r(1),v=r(3),y=r(10),m=r(5),E=r(0),w=r(21),S=r(12),b=r(9),T=r(31),I=r(19),N=r(71),R=r(7),x=function(){function e(){}return e.prototype.createTopRecorder=function(e){var t=y._fs_use_socket(e.window)&&N.SockProtocol.isSupported()?new N.SockProtocol(e):new I.HttpProtocol(e);return new h.TopRecorder(e,t)},e.prototype.createInnerRecorder=function(e){return new d.InnerRecorder(e)},e}();t.DefaultRecorderMaker=x;var k=function(){function e(e,t){void 0===e&&(e=window),void 0===t&&(t=new x),this.wnd=e,this.recMaker=t,this.scheme="https:",this.domDoneLoaded=!1,this.waitingOnStart=!1,this.reidentifyCount=0}return e.prototype.init=function(){p.isLoaded(this.wnd)||(p.setLoaded(this.wnd,p.getNamespace(this.wnd)),_.initWindex(this.wnd),this.initApi(),this.start())},e.prototype.getCurrentSessionURL=function(e){return this.recorder?this.recorder.getCurrentSessionURL(e):null},e.prototype.getCurrentSession=function(){return this.recorder?this.recorder.getCurrentSession():null},e.prototype.enableConsole=function(){this.recorder&&this.recorder.console().enable()},e.prototype.disableConsole=function(){this.recorder&&this.recorder.console().disable()},e.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.recorder&&("log"!==e&&"info"!==e&&"warn"!==e&&"error"!==e&&"debug"!==e&&"_fs_debug"!==e&&(t.unshift(e),e="log"),this.recorder.console().addLog(e,t))},e.prototype.shutdownApi=function(){this.shutdown(E.UnloadReasonApi)},e.prototype.shutdown=function(e){this.recorder&&!this.deferredStart?(this.recorder.shutdown(e),this.recorder=null):v.logIfDebug("Recording already shut down.")},e.prototype.restart=function(){if(this.deferredStart)return this.deferredStart(),void(this.deferredStart=null);this.recorder?v.logIfDebug("Recording already started."):this.recorder=this.createRecorder(!0)},e.prototype.splitPage=function(e,t){return n(this,void 0,b.FSPromise,function(){return i(this,function(r){switch(r.label){case 0:return t&&null==this.identity?(v.logIfDebug("Can't re-identify from an iframe"),[2]):this.waitingOnStart?(this.splitPending=[e,t],[2]):(this.shutdown(e),[4,T.wait(0)]);case 1:return r.sent(),[4,T.wait(0)];case 2:return r.sent(),t&&this.identity&&this.identity.clear(),this.restart(),[2];}})})},e.prototype._api=function(e,t,r){if(this.inFrame())v.logIfDebug("API calls may only be made from the top-most frame");else if(this.recorder){var n=this.vars.api(e,t,r),i=n.events,o=n.reidentify,s=n.consent;if(o){if(this.reidentifyCount<8)return this.reidentifyCount++,y.FS_q_push(this.wnd,[e,t]),void this.splitPage(E.UnloadReasonReidentify,!0);v.logIfDebug("reidentified too many times; giving up")}void 0!==s&&this.recorder.setConsent(s);for(var a=0;a<i.length;a++)this.recorder.queue().enqueue(i[a].Kind,i[a].Args)}else y.FS_q_push(this.wnd,[e,t])},e.prototype._cookies=function(){return this.identity?this.identity.cookies():(v.logIfDebug("Error in FS integration: Can't get cookies from inside an iframe"),null)},e.prototype._setCookie=function(e,t){this.identity?this.identity.setCookie(e,t):v.logIfDebug("Error in FS integration: Can't set cookies from inside an iframe")},e.prototype._withEventQueue=function(e,t){if(this.recorder){var r=this.recorder.queue(),n=this.recorder.pageSignature();null!=r&&null!=n?e===n?t(r):u.FsBugSnag.sendToBugsnag("Error in _withEventQueue: Page Signature mismatch expected \""+n+"\" actual \""+e+"\"","error"):v.logIfDebug("Error getting event queue or page signature: Recorder not initialized")}else v.logIfDebug("Error in FS integration: Recorder not initialized")},e.prototype.initApi=function(){var e=p.getBrowserApi(this.wnd);e?(e.getCurrentSessionURL=g.$entry(this.getCurrentSessionURL,this),e.getCurrentSession=g.$entry(this.getCurrentSession,this),e.enableConsole=g.$entry(this.enableConsole,this),e.disableConsole=g.$entry(this.disableConsole,this),e.log=g.$entry(this.log,this),e.shutdown=g.$entry(this.shutdownApi,this),e.restart=g.$entry(this.restart,this),e._api=g.$entry(this._api,this),e._cookies=g.$entry(this._cookies,this),e._setCookie=g.$entry(this._setCookie,this),e._withEventQueue=g.$entry(this._withEventQueue,this)):v.logIfDebug("Missing browser API namespace; couldn't initialize API.")},e.prototype.start=function(){var e=this;v.initDebug(y._fs_debug(this.wnd)),v.logIfDebug("script version UNSET (compiled at 1572623383)");var t=y._fs_org(this.wnd);if(t){this.orgId=t;var r=y._fs_script(this.wnd);if(r){this.script=r;var n=y._fs_rec_host(this.wnd);if(n){this.recHost=n;var i=y._fs_app_host(this.wnd);i?(this.appHost=i,v.logIfDebug("script: "+this.script),v.logIfDebug("recording host: "+this.recHost),v.logIfDebug("orgid: "+this.orgId),"localhost:8080"==this.recHost&&(this.scheme="http:"),this.inFrame()||(this.identity=new l.Identity(this.wnd.document),this.vars=new f.Vars(this.identity),this.identity.initFromCookies(this.recHost,this.orgId)),this.canRecord(this.orgId)?(this.recorder=this.createRecorder(),this.recorder.eventWatcher().watchEvents(),this.hookLoadEvents(),this.wnd.addEventListener("message",u.FsBugSnag.wrap(function(t){if("string"==typeof t.data&&(t.source==e.wnd.parent||t.source==e.wnd))switch(c.parsePostMessageData(t.data)[0]){case c.FS_SHUTDOWN_FRAME:e.shutdown(E.UnloadReasonFsShutdownFrame);break;case c.FS_RESTART_FRAME:e.restart();}}))):this.hailMary()):v.logIfDebug("Missing global _fs_host or _fs_app_host. Recording disabled.")}else v.logIfDebug("Missing global _fs_host or _fs_rec_host. Recording disabled.")}else v.logIfDebug("Missing global _fs_host or _fs_rec_host. Recording disabled.")}else v.logIfDebug("Missing global _fs_org. Recording disabled.")},e.prototype._context=function(e){var t=this;return{window:this.wnd,time:new m.Timekeeper,options:{orgId:this.orgId,scheme:this.scheme,script:this.script,recHost:this.recHost,appHost:this.appHost},recording:{bundleUploadInterval:function(){return e().bundleUploadInterval()},inFrame:this.inFrame(),vars:this.vars,identity:this.identity,splitPage:function(e,r){return t.splitPage(e,r)},pageSignature:function(){return e().pageSignature()}}}},e.prototype.createRecorder=function(e){var t,r,n,i=this,s=this._context(function(){return n});if(this.inFrame())n=this.recMaker.createInnerRecorder(s);else{n=this.recMaker.createTopRecorder(s);var a=this.drainApiQueue(y.FS_q_drain(this.wnd)),u=a.events,h=a.reidentify,d=a.appId,l=a.defer,f=a.consent;try{for(var p=o(u),_=p.next();!_.done;_=p.next()){var g=_.value;n.queue().enqueue(g.Kind,g.Args)}}catch(e){t={error:e}}finally{try{_&&!_.done&&(r=p["return"])&&r.call(p)}finally{if(t)throw t.error}}void 0!==f&&n.setConsent(f)}this.waitingOnStart=!0;var v=function(){n.start(!!h,function(){i.waitingOnStart=!1,e&&n.tellAllFramesTo([c.FS_RESTART_FRAME]),i.splitPending&&(i.splitPage(i.splitPending[0],i.splitPending[1]),i.splitPending=null)},d),e&&n.eventWatcher().watchEvents()};return l?this.deferredStart=v:v(),n},e.prototype.drainApiQueue=function(e){var t,r;if(!e)return{events:[]};var n,i,s,u,c=[];try{for(var h=o(e),d=h.next();!d.done;d=h.next()){var l=d.value,p=l.length>2?l[2]:null;"user"==l[0]&&l[1]&&l[1].uid&&(n=f.transformValidateAppId(l[1].uid)[0]);var _=this.vars.api(l[0],l[1],p),g=_.events,v=_.reidentify,y=_.recStatus,m=_.consent;y&&(u="shutdown"===y),v&&(c=[],i=!0),void 0!==m&&(s=m),c.push.apply(c,a(g))}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=h["return"])&&r.call(h)}finally{if(t)throw t.error}}return{events:c,reidentify:i,consent:s,appId:n,defer:u}},e.prototype.inFrame=function(){if("boolean"==typeof this._inFrame)return this._inFrame;var e=y._fs_transport(this.wnd);return y._fs_is_outer_script(this.wnd)?this._inFrame=!1:this.wnd!=top?this._inFrame=!0:e?e.init&&e.init(this.orgId)&&(this._inFrame=!0):this._inFrame=!1,this._inFrame},e.prototype.canRecord=function(e){return(this.wnd.MutationObserver||this.wnd.MutationEvent)&&this.wnd.postMessage&&g._native_matchesSelector?!!function e(t){if(t==top||y._fs_is_outer_script(t)||y._fs_run_in_iframe(t)||y._fs_transport(t))return!0;try{return t.parent.document,e(t.parent)}catch(e){return!1}}(this.wnd)||(v.logIfDebug("FullStory recording for this page is NOT allowed within an iFrame."),!1):(v.logIfDebug("missing required browser features"),!1)},e.prototype.hailMary=function(){var e=this;if(this.identity){var t=y._fs_replay_flags(this.wnd);v.logIfDebug("Unable to record playback stream.");var r=document.createElement("script");this.wnd.__fs_startResponse=function(t){t&&e.identity.setIds(e.wnd,t.CookieDomain,t.UserIntId,t.SessionIntId),document.head&&document.head.removeChild(r)};var n=s(w.getDocumentClientArea(this.wnd.document),2),i=n[0],o=n[1],a=s(g.tryGetScreenDims(this.wnd),2),u=a[0],c=a[1],h=R.scrubUrl(S.baseUri(this.wnd),this.orgId,{source:"page",type:"base"}),d=R.scrubUrl(document.referrer,this.orgId,{source:"page",type:"referrer"}),l=R.scrubUrl(this.wnd.location.href,this.orgId,{source:"page",type:"url"});r.src="//"+this.recHost+"/rec/page?OrgId="+this.orgId+"&UserId="+this.identity.userId()+"&Url="+encodeURIComponent(l)+"&Base="+encodeURIComponent(h)+"&Width="+i+"&Height="+o+"&ScreenWidth="+u+"&ScreenHeight="+c+"&Referrer="+encodeURIComponent(d)+"&Doctype="+encodeURIComponent(g.doctypeString(document))+"&CompiledTimestamp=1572623383&Fallback=true"+(t?"&ReplayFlags="+t:""),document.head&&document.head.appendChild(r)}},e.prototype.hookLoadEvents=function(){var e=this,t=function(){e.domDoneLoaded||(e.domDoneLoaded=!0,e.recorder&&e.recorder.onDomLoad())},r=!1,n=function(){r||(r=!0,e.recorder&&e.recorder.onLoad())};switch(document.readyState){case"interactive":document.attachEvent||t();break;case"complete":t(),n();}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",u.FsBugSnag.wrap(t)),r||this.wnd.addEventListener("load",u.FsBugSnag.wrap(function(e){t(),n()}))},e}();t.Conductor=k},function(e,t,r){"use strict";t.__esModule=!0;var n=r(24);t.getBrowserApi=function(e){return e[n.getNamespace(e)]},t.getGlobalsOnNS=function(e,t){return n.getGlobalsOn(t)}},function(e){e.exports=[{Selector:"object:not([type^=\"image/\"])",Consent:!1,Type:1},{Selector:"embed:not([type^=\"image/\"])",Consent:!1,Type:1},{Selector:"canvas",Consent:!1,Type:1},{Selector:"noscript",Consent:!1,Type:1},{Selector:".fs-hide",Consent:!1,Type:1},{Selector:".fs-exclude",Consent:!1,Type:1},{Selector:".fs-exclude-without-consent",Consent:!0,Type:1},{Selector:".fs-mask",Consent:!1,Type:2},{Selector:".fs-mask-without-consent",Consent:!0,Type:2},{Selector:".fs-unmask",Consent:!1,Type:3},{Selector:".fs-unmask-with-consent",Consent:!0,Type:3},{Selector:".fs-block",Consent:!1,Type:1},{Selector:".fs-record-with-consent",Consent:!0,Type:1}]},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0;var i=r(3),o=r(2),s=r(17);function a(e,t,r,n){void 0!==r&&("function"==typeof e.addEventListener?e.addEventListener(t,r,n):"function"==typeof e.addListener?e.addListener(r):i.logIfDebug("Target of "+t+" doesn't seem to support listeners"))}function u(e,t,r,n){void 0!==r&&("function"==typeof e.removeEventListener?e.removeEventListener(t,r,n):"function"==typeof e.removeListener?e.removeListener(r):i.logIfDebug("Target of "+t+" doesn't seem to support listeners"))}t._trustEventOverride="_fs_trust_event";var c=function(){function e(){var e=this;this._listeners=[],this._children=[],this._yesCapture=!0,this._noCapture=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e._yesCapture={capture:!0,passive:!0},e._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",s.doNothing,t)}catch(e){}}return e.prototype.add=function(e,t,r,n,i){return void 0===i&&(i=!1),this.addCustom(e,t,r,n,i)},e.prototype.addCustom=function(e,r,n,i,s){void 0===s&&(s=!1);var u={target:e,type:r,fn:o.FsBugSnag.wrap(function(e){(s||!1!==e.isTrusted||"message"==r||e[t._trustEventOverride])&&i(e)}),options:n?this._yesCapture:this._noCapture,index:this._listeners.length};return this._listeners.push(u),a(e,r,u.fn,u.options),u},e.prototype.remove=function(e){e.target&&(u(e.target,e.type,e.fn,e.options),e.target=null,e.fn=void 0)},e.prototype.clear=function(){for(var e=0;e<this._listeners.length;e++)this._listeners[e].target&&this.remove(this._listeners[e]);this._listeners=[]},e.prototype.createChild=function(){var t=new e;return this._children.push(t),t},e.prototype.refresh=function(){var e,t,r,i;try{for(var o=n(this._listeners),s=o.next();!s.done;s=o.next()){var c=s.value;c.target&&(u(c.target,c.type,c.fn,c.options),a(c.target,c.type,c.fn,c.options))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o["return"])&&t.call(o)}finally{if(e)throw e.error}}try{for(var h=n(this._children),d=h.next();!d.done;d=h.next()){d.value.refresh()}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=h["return"])&&i.call(h)}finally{if(r)throw r.error}}},e}();t.DomListeners=c},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};t.__esModule=!0;var s=r(42),a=r(27),u=r(21),c=r(43),h=r(44),d=r(53),l=r(54),f=r(56),p=o(r(59)),_=r(1),g=r(0),v=r(5),y=r(13),m=r(8),E=r(4),w=r(7),S=r(6),b=r(15),T=r(28),I=r(2),N=function(){function e(e,t,r,i,o,s,a){var u=this;this._ctx=e,this._queue=t,this._onFrameCreated=o,this._beforeFrameRemoved=s,this._resourceUploader=a,this._curSelection=[],this._scrollTimeouts={},this._uploadResources=!1,this._initialized=!1,this._wnd=e.window,this._doc=this._wnd.document,this._loc=this._wnd.location,this._hst=this._wnd.history,this._listeners=i.createChild(),this._currentUrl=this._loc.href,this._inputWatcher=new c.InputWatcher(function(e){u.addChangeElem(e)},function(e){return!!S.fsid(e)}),this._ajaxWatcher=new l.AjaxWatcher(e,t),this._perfWatcher=new d.PerfWatcher(e,t,this._listeners),this._styleSheetWatcher=new f.StyleSheetWatcher(e,t),this._fullscreenWatcher=new p["default"](e,t,this._listeners),this._mutWatcher=new h.MutationWatcher(e,r,!0,function(e,t,r){u.visitNode(e,t,r)},function(e){var t=e.node;if("iframe"==y.tagName(e.node))u._beforeFrameRemoved(e.node);else if("function"==typeof t.getElementsByTagName)for(var r=t.getElementsByTagName("iframe"),n=0;n<r.length;n++){var i=r[n];u._beforeFrameRemoved(i)}},function(e,t,r){var i,o;if(!S.isExcluded(e)&&u._uploadResources){var s=k(e,t,r);try{for(var a=n(s),c=a.next();!c.done;c=a.next()){var h=c.value;u._resourceUploader.uploadIfNeeded(u._wnd,h)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=a["return"])&&o.call(a)}finally{if(i)throw i.error}}}})}return e.prototype.watchEvents=function(){var e,t,r=this;this._mutWatcher.hookMutations(),this._inputWatcher.hookEvents(),this._styleSheetWatcher.start(),this._perfWatcher.start(this._resourceUploader),this._fullscreenWatcher.start(),this._listeners.add(this._wnd,"mousemove",!0,function(e){r.addMouseMove(e)}),this._listeners.add(this._wnd,"mousedown",!0,function(e){r.addMouseDown(e)}),this._listeners.add(this._wnd,"mouseup",!0,function(e){r.addMouseUp(e)}),this._listeners.add(this._wnd,"keydown",!0,function(e){r.addKeyDown(e)}),this._listeners.add(this._wnd,"keyup",!0,function(e){r.addKeyUp(e)}),this._listeners.add(this._wnd,"click",!0,function(e){r.addClick(e)}),this._listeners.add(this._wnd,"dblclick",!0,function(e){r.addDblClick(e)}),this._listeners.add(this._wnd,"focus",!0,function(e){r.addFocus(e)}),this._listeners.add(this._wnd,"blur",!0,function(e){r.addBlur(e)}),this._listeners.add(this._wnd,"change",!0,function(e){r.addChange(e)},!0),this._listeners.add(this._wnd,"touchstart",!0,function(e){r.addTouchEvent(e,g.EVENT_TOUCHSTART),r.addWindowScrollOrResize()}),this._listeners.add(this._wnd,"touchend",!0,function(e){r.addTouchEvent(e,g.EVENT_TOUCHEND),r.addWindowScrollOrResize()}),this._listeners.add(this._wnd,"touchmove",!0,function(e){r.addTouchEvent(e,g.EVENT_TOUCHMOVE),r.addWindowScrollOrResize()}),this._listeners.add(this._wnd,"touchcancel",!0,function(e){r.addTouchEvent(e,g.EVENT_TOUCHCANCEL)}),this._listeners.add(this._wnd,"play",!0,function(e){r.addPlayPauseEvent(e,g.EVENT_PLAY)}),this._listeners.add(this._wnd,"pause",!0,function(e){r.addPlayPauseEvent(e,g.EVENT_PAUSE)}),this._listeners.add(this._wnd,"scroll",!1,function(e){r.addWindowScrollOrResize()}),this._listeners.add(this._wnd,"resize",!1,function(e){r.addWindowScrollOrResize()}),this._listeners.add(this._wnd,"submit",!1,function(e){r.addFormSubmit(e)}),this._listeners.add(this._wnd,"focus",!1,function(e){r.addWindowFocus(e)}),this._listeners.add(this._wnd,"blur",!1,function(e){r.addWindowBlur(e)}),this._listeners.add(this._wnd,"popstate",!1,function(){r.addNavigate()}),this._listeners.add(this._wnd,"selectstart",!0,function(e){r.addSelection()}),this._listeners.add(this._doc,"selectionchange",!0,function(e){r.addSelection()});var o=this._wnd.visualViewport;if(o?(this._listeners.add(o,"scroll",!0,function(){return r.addWindowScrollOrResize()}),this._listeners.add(o,"resize",!0,function(){return r.addWindowScrollOrResize()})):this._listeners.add(this._wnd,"mousewheel",!0,function(){r.addWindowScrollOrResize()}),this._pushHook=_.activateHook(this._hst,"pushState"),this._pushHook&&this._pushHook.afterSync(function(){return r.addNavigate()}),this._replaceHook=_.activateHook(this._hst,"replaceState"),this._replaceHook&&this._replaceHook.afterSync(function(){return r.addNavigate()}),"function"==typeof this._wnd.document.hasFocus&&this._queue.enqueue(this._wnd.document.hasFocus()?g.EVENT_WINDOW_FOCUS:g.EVENT_WINDOW_BLUR,[]),E.windex.matchMedia){var s=function(e,t,n){var i=E.windex.matchMedia(a._wnd,n);if(!i)return"continue";var o=function(){i.matches&&r._queue.enqueue(g.EVENT_MEDIA_QUERY_CHANGE,[e,t])};a._listeners.add(i,"change",!0,o),o()},a=this;try{for(var u=n([["any-pointer","coarse","not screen and (any-pointer: fine)"],["any-pointer","fine","only screen and (any-pointer: fine)"],["any-hover","none","not screen and (any-hover: hover)"],["any-hover","hover","only screen and (any-hover: hover)"]]),c=u.next();!c.done;c=u.next()){var h=i(c.value,3);s(h[0],h[1],h[2])}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=u["return"])&&t.call(u)}finally{if(e)throw e.error}}}this._initialized=!0},e.prototype.initResourceUploading=function(){this._resourceUploader.init(),this._uploadResources=!0},e.prototype.onDomLoad=function(){this.addDomLoaded(),this.addViewportChange(),this._mutWatcher._checkForMissingInsertions(m.uaIsIE)},e.prototype.onLoad=function(){var e=this;setTimeout(I.FsBugSnag.wrap(function(){try{e._perfWatcher.onLoad()}catch(e){I.FsBugSnag.sendToBugsnag(e,"error")}e.addLoad(),e.addViewportChange()},"error"),0)},e.prototype.ajaxWatcher=function(){return this._ajaxWatcher},e.prototype.bundleEvents=function(e){return this._inputWatcher.tick(),this._perfWatcher.tick(e),this._ajaxWatcher.tick(e),this.addViewportChange(),this._mutWatcher.processMutations()},e.prototype.shutdown=function(e){this._initialized&&(this._initialized=!1,this._listeners&&this._listeners.clear(),this._pushHook&&this._pushHook.disable(),this._replaceHook&&this._replaceHook.disable(),this._perfWatcher.onLoad(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown(),this._ajaxWatcher.disable(),this._perfWatcher.shutdown(),this._styleSheetWatcher.stop(),this._fullscreenWatcher.stop(),this._queue.shutdown(e))},e.prototype.recordingIsDetached=function(){return this._mutWatcher.recordingIsDetached()},e.prototype.visitNode=function(e,t,r){var n=this;switch(t.nodeName){case"HTML":this._docElScrollListener&&this._listeners.remove(this._docElScrollListener),this._docElScrollListener=this._listeners.add(t,"scroll",!0,function(e){n.addScroll(O(e))});break;case"BODY":this.addViewportChange(),r.push(function(){n.addSelection()});break;case"INPUT":case"TEXTAREA":case"SELECT":this._inputWatcher.addInput(t);break;case"FRAME":case"IFRAME":this._onFrameCreated(t);break;case"VIDEO":case"AUDIO":t.paused||this.addPlayPauseEventById(S.fsid(t),g.EVENT_PLAY);break;case"LINK":if(!(i=t.sheet))break;!0===i.disabled&&this._styleSheetWatcher.onDisableSheet(i,!0);break;case"STYLE":var i,o=t;if(!(i=o.sheet))break;!0===i.disabled&&this._styleSheetWatcher.onDisableSheet(i,!0);var s=f.getDynamicRuleTail(o);void 0!==s&&r.push(function(){n._styleSheetWatcher.snapshot(o,s)});}var a=t;"number"!=typeof a.scrollLeft||0==a.scrollLeft&&0==a.scrollTop||this.addScroll(a)},e.prototype.addMouseMove=function(e){var t=S.fsid(O(e))?[e.clientX,e.clientY,S.fsid(O(e))]:[e.clientX,e.clientY];this._queue.enqueue(g.EVENT_MOUSEMOVE,t)},e.prototype.addMouseDown=function(e){this._queue.enqueue(g.EVENT_MOUSEDOWN,[e.clientX,e.clientY])},e.prototype.addMouseUp=function(e){this._queue.enqueue(g.EVENT_MOUSEUP,[e.clientX,e.clientY])},e.prototype.addTouchEvent=function(e,t){if(void 0!==e.changedTouches)for(var r=0;r<e.changedTouches.length;++r){var n=e.changedTouches[r];isNaN(parseInt(n.identifier))&&(n.identifier=0),this._queue.enqueue(t,[n.identifier,n.clientX,n.clientY])}},e.prototype.addPlayPauseEvent=function(e,t){var r=O(e),n=S.fsid(r);n&&this.addPlayPauseEventById(n,t)},e.prototype.addPlayPauseEventById=function(e,t){this._queue.enqueue(t,[e])},e.prototype.addWindowFocus=function(e){this._queue.enqueue(g.EVENT_WINDOW_FOCUS,[])},e.prototype.addWindowBlur=function(e){this._queue.enqueue(g.EVENT_WINDOW_BLUR,[])},e.prototype.maybeAddValueChange=function(){var e=C(this._doc);e&&this._inputWatcher.onChange(e)},e.prototype.addKeyDown=function(e){var t=C(this._doc);t&&!S.fsidIfNotExcluded(t)||(this.maybeAddValueChange(),this._queue.enqueue(g.EVENT_KEYDOWN,[]))},e.prototype.addKeyUp=function(e){var t=C(this._doc);t&&!S.fsidIfNotExcluded(t)||(this.maybeAddValueChange(),this._queue.enqueue(g.EVENT_KEYUP,[]))},e.prototype.addViewportChange=function(){var e=S.fsid(this.getWindowScrollingElement());if(e){var t=u.getLayoutViewport(this._wnd,this._curLayoutViewport),r=u.getVisualViewport(this._wnd,t);t.hasKnownPosition?(s.sameViewportPos(t,this._curLayoutViewport)||this._queue.enqueue(g.EVENT_SCROLL_LAYOUT,[e,t.pageLeft,t.pageTop]),s.sameVisualViewportOffset(r,this._curVisualViewport)||this._queue.enqueue(g.EVENT_SCROLL_VISUAL_OFFSET,[e,r.offsetLeft,r.offsetTop])):s.sameViewportPos(r,this._curVisualViewport)||this._queue.enqueue(g.EVENT_SCROLL_LAYOUT,[e,r.pageLeft,r.pageTop]),s.sameLayoutViewportSize(t,this._curLayoutViewport)||(t.width==t.clientWidth&&t.height==t.clientHeight?this._queue.enqueue(g.EVENT_RESIZE_LAYOUT,[t.clientWidth,t.clientHeight]):this._queue.enqueue(g.EVENT_RESIZE_LAYOUT,[t.clientWidth,t.clientHeight,t.width,t.height])),s.sameViewportSize(r,this._curVisualViewport)||this._queue.enqueue(g.EVENT_RESIZE_VISUAL,[r.width,r.height]),this._curLayoutViewport=s.createLayoutViewportLike(t),this._curVisualViewport=s.createVisualViewportLike(r)}},e.prototype.doWorkInScrollTimeout=function(e,t){var r=this;e in this._scrollTimeouts||(this._scrollTimeouts[e]=t,new v.RealTimeout(function(){if(e in r._scrollTimeouts){var t=r._scrollTimeouts[e];delete r._scrollTimeouts[e],t()}},g.ScrollSampleInterval).start())},e.prototype._fireScrollTimeouts=function(){for(var e in this._scrollTimeouts)this._scrollTimeouts[e](),delete this._scrollTimeouts[e];this._scrollTimeouts=[]},e.prototype.getWindowScrollingElement=function(){return this._doc.scrollingElement||this._doc.body||this._doc.documentElement},e.prototype.addWindowScrollOrResize=function(){var e=this,t=S.fsid(this.getWindowScrollingElement());t&&this.doWorkInScrollTimeout(t,function(){return e.addViewportChange()})},e.prototype.addScroll=function(e){var t=this,r=S.fsid(e),n=e;r&&"number"==typeof n.scrollLeft&&this.doWorkInScrollTimeout(r,function(){t._queue.enqueue(g.EVENT_SCROLL_LAYOUT,[r,n.scrollLeft,n.scrollTop])})},e.prototype.addDomLoaded=function(){this._queue.enqueue(g.EVENT_DOMLOADED,[])},e.prototype.addLoad=function(){this._queue.enqueue(g.EVENT_LOAD,[])},e.prototype.addNavigate=function(){var e=this._loc.href;this._currentUrl!=e&&(this._currentUrl=e,this._queue.enqueue(g.EVENT_NAVIGATE,[w.scrubUrl(this._loc.href,this._ctx.options.orgId,{source:"event",type:g.EVENT_NAVIGATE}),this._doc.title]))},e.prototype.addClick=function(e){var t=O(e),r=S.fsid(t);if(r){var n=0,i=0,o=0,s=0;if(t&&t.getBoundingClientRect){var a=t.getBoundingClientRect();n=a.left,i=a.top,o=a.width,s=a.height}this._queue.enqueue(g.EVENT_CLICK,[r,e.clientX,e.clientY,n,i,o,s])}},e.prototype.addDblClick=function(e){var t=O(e),r=S.fsid(t);r&&this._queue.enqueue(g.EVENT_DBL_CLICK,[r])},e.prototype.addFormSubmit=function(e){var t=O(e),r=S.fsid(t);r&&this._queue.enqueue(g.EVENT_FORM_SUBMIT,[r])},e.prototype.addFocus=function(e){var t=O(e),r=S.fsid(t);r&&this._queue.enqueue(g.EVENT_FOCUS,[r])},e.prototype.addBlur=function(e){var t=O(e),r=S.fsid(t);r&&this._queue.enqueue(g.EVENT_BLUR,[r])},e.prototype.addChange=function(e){this._inputWatcher.onChange(O(e))},e.prototype.addChangeElem=function(e){var t=S.fsidIfNotExcluded(e);if(t){var r=c.valueOfInputishElem(e);S.isMasked(e)&&(r=T.maskText(r)),this._queue.enqueue(g.EVENT_VALUECHANGE,[t,r])}},e.prototype.addSelection=function(){try{var e=this.selectionArgs()}catch(e){return}for(var t=!1,r=0;r<4;r++)if(this._curSelection[r]!==e[r]){t=!0;break}t&&(this._curSelection=e,this._queue.enqueue(g.EVENT_SELECT,e))},e.prototype.selectionArgs=function(){if(!this._wnd.getSelection)return[];var e=this._wnd.getSelection();if(!e)return[];if("None"==e.type)return[];if("Caret"==e.type){var t=S.fsid(e.anchorNode);return t?[t,e.anchorOffset]:[]}if(!e.anchorNode||!e.focusNode)return[];var r=i(R(e.anchorNode,e.anchorOffset),2),n=r[0],o=r[1],s=i(R(e.focusNode,e.focusOffset),2),a=s[0],u=s[1],c=Boolean(n.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING),h=i(c?[n,a]:[a,n],2),d=h[0],l=h[1],f=i(c?[o,u]:[u,o],2),p=f[0],g=f[1];for(S.fsid(d)||(p=0);d&&!S.fsid(d)&&d!=l;)d=_.nextSibling(d)||d.parentNode;for(S.fsid(l)||(g=0);l&&!S.fsid(l)&&l!=d;)l=_.previousSibling(l)||l.parentNode;if(d==l&&p==g)return[];var v=S.fsid(d),y=S.fsid(l);return d&&l&&v&&y?[v,p,y,g,c]:[]},e}();function R(e,t){if(!e.firstChild)return[e,t];e=e.firstChild;for(var r=0;r<t-1;r++){var n=_.nextSibling(e);if(!n)return[e,0];e=n}return[e,0]}t.EventWatcher=N;var x={src:{img:!0,embed:!0},href:{use:!0,image:!0},data:{object:!0}};function k(e,t,r){var n,i=y.tagName(e);if(x[t]&&x[t][i])return[r];if("link"==i&&"href"==t&&(n=e.getAttribute("rel"))&&n.indexOf("stylesheet")>-1)return[r];if("srcset"==t&&("img"==i||"source"==i))return null!=r.match(/^\s*$/)?[]:_.map(r.split(","),function(e){return _.trim(e).split(/\s+/)[0]});var o=e;if("style"==t&&o.style){var s=o.style.backgroundImage;if(!s)return[];if(s.length>300)return[];var u=[],c=void 0;for(a.SIMPLE_CSS_URL.lastIndex=0;c=a.SIMPLE_CSS_URL.exec(s);){var h=c[1];h&&u.push(h.trim())}return u}return[]}function C(e){for(var t=e.activeElement;t&&t.shadowRoot;){var r=t.shadowRoot.activeElement;if(!r)return t;t=r}return t}function O(e){if(e.composed&&e.target){var t=e.target;if(t.nodeType==b.Node_ELEMENT_NODE&&t.shadowRoot){var r=e.composedPath();if(r.length>0)return r[0]}}return e.target}t.getResourceUrls=k},function(e,t,r){"use strict";function n(e){return{pageLeft:e.pageLeft,pageTop:e.pageTop,width:e.width,height:e.height}}t.__esModule=!0,t.sameViewportPos=function(e,t){return t&&e.pageLeft==t.pageLeft&&e.pageTop==t.pageTop},t.sameVisualViewportOffset=function(e,t){return t&&e.offsetLeft==t.offsetLeft&&e.offsetTop==t.offsetTop},t.sameViewportSize=function(e,t){return t&&e.width==t.width&&e.height==t.height},t.sameLayoutViewportSize=function(e,t){return t&&e.width==t.width&&e.height==t.height&&e.clientWidth==t.clientWidth&&e.clientHeight==t.clientHeight},t.createVisualViewportLike=function(e){var t=n(e);return t.offsetLeft=e.offsetLeft,t.offsetTop=e.offsetTop,t},t.createLayoutViewportLike=function(e){var t=n(e);return t.clientWidth=e.clientWidth,t.clientHeight=e.clientHeight,t}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s};t.__esModule=!0;var i=r(5),o=r(1),s=r(13),a=r(6),u=function(){function e(e,r){this._onchange=e,this._checkElem=r,this._fallback=!1,this._elems={},this.values={},this.radios={},t._globalInputWatcher=this}return e.prototype.hookEvents=function(){(function(){var e=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");if(!e||!e.set)return!1;c||(o.shimProp(HTMLInputElement,"value",p),o.shimProp(HTMLInputElement,"checked",p),o.shimProp(HTMLSelectElement,"value",p),o.shimProp(HTMLTextAreaElement,"value",p),o.shimProp(HTMLSelectElement,"selectedIndex",p),o.shimProp(HTMLOptionElement,"selected",p),c=!0);return!0})()||(this._fallback=!0)},e.prototype.addInput=function(e){var t=a.fsid(e);if(this._elems[t]=e,g(e)){var r=f(e);e.checked&&(this.radios[r]=t)}else this.values[t]=_(e);(function(e){switch(e.type){case"checkbox":case"radio":return e.checked!=e.hasAttribute("checked");default:var t=e.value||"";return t!=function(e){if("select"!=s.tagName(e))return e.getAttribute("value")||"";var t=e,r=t.querySelector("option[selected]")||t.querySelector("option");if(!r)return"";return r.value||""}(e);}})(e)&&this._onchange(e)},e.prototype.diffValue=function(e,t){var r=a.fsid(e);if(g(e)){var n=f(e);return this.radios[n]==r!=("true"==t)}return this.values[r]!=t},e.prototype.onChange=function(e,t){void 0===t&&(t=_(e));var r=a.fsid(e);if((e=this._elems[r])&&this.diffValue(e,t))if(this._onchange(e),g(e)){var n=f(e);"false"==t&&this.radios[n]==r?delete this.radios[n]:this.radios[n]=r}else this.values[r]=t},e.prototype.tick=function(){for(var e in this._elems){var t=this._elems[e];if(this._checkElem(t)){if(this._fallback){var r=_(t);if(t&&this.diffValue(t,r))if(this._onchange(t),g(t)){var n=f(t);this.radios[n]=+e}else this.values[e]=r}}else delete this._elems[e],delete this.values[e],g(t)&&delete this.radios[f(t)]}},e.prototype.shutdown=function(){t._globalInputWatcher=null},e.prototype._usingFallback=function(){return this._fallback},e.prototype._trackingElem=function(e){return!!this._elems[e]},e}();t.InputWatcher=u;var c=!1;var h,d={};function l(){try{if(t._globalInputWatcher)for(var e in d){var r=n(d[e],2),i=r[0],o=r[1];t._globalInputWatcher.onChange(i,o)}}finally{h=null,d={}}}function f(e){if(!e)return"";for(var t=e;t&&"form"!=s.tagName(t);)t=t.parentElement;return(t&&"form"==s.tagName(t)?a.fsid(t):0)+":"+e.name}function p(e,r){var n=function e(t,r){if(void 0===r&&(r=2),r<=0)return t;var n=s.tagName(t);return"option"!=n&&"optgroup"!=n||!t.parentElement?t:e(t.parentElement,r-1)}(e),o=a.fsid(n);o&&t._globalInputWatcher&&t._globalInputWatcher.diffValue(n,""+r)&&(d[o]=[n,""+r],h||(h=new i.RealTimeout(l)).start())}function _(e){switch(e.type){case"checkbox":case"radio":return""+e.checked;default:var t=e.value;return t||(t=""),""+t;}}function g(e){return e&&"radio"==e.type}t.valueOfInputishElem=_},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};t.__esModule=!0;var a=r(45),u=r(49),c=r(1),h=r(3),d=r(5),l=r(14),f=r(8),p=r(0),_=r(2),g=r(50),v=r(7),y=r(6),m=r(51),E=r(15),w=r(52),S=function(){function e(e,t,r,n,i,o){var s=this;void 0===r&&(r=!0),void 0===n&&(n=function(){}),void 0===i&&(i=function(){}),void 0===o&&(o=function(){}),this._ctx=e,this._watcher=t,this._compress=r,this._nodeVisitor=n,this._beforeRemove=i,this._attrVisitor=o,this._sentDomSnapshot=!1,this._newShadowContainers=[],this._toRefresh=[],this._records=[],this._setPropertyWasThrottled=!1,this._wnd=e.window,this._resizer=g.ResizeWatcher.create(e),this._encoder=new a.NodeEncoder(t,this._resizer,e.options.orgId),_.assert(!this._watcher.onConsentChange,"This is the only consent change listener."),this._watcher.onConsentChange=function(){return s.updateConsent()}}return e.prototype.hookMutations=function(e){void 0===e&&(e=this._wnd.document),this._root=e,this._sentDomSnapshot=!1,this._compress&&(this._lz=new u.LZJGWEncoder);var t=!0;if(f.uaIsIE)try{this.setUpIEWorkarounds()}catch(e){h.logIfDebug("Error setting up IE workarounds for mutation watcher: "+e),t=!1}t&&(this._observer=new w.FSMutationObserver(this._addMutations.bind(this)))},e.prototype._observerOff=function(){this._observer&&this._observer.disconnect()},e.prototype._addMutations=function(e){var t,r;try{for(var n=i(e),o=n.next();!o.done;o=n.next()){var s=o.value;this._records.push(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.resizer=function(){return this._resizer},e.prototype.shutdown=function(){this._observer&&this._observer.disconnect();var e=y.mirrorFor(this._root);e&&y.clearIds(e),this._records=[],f.uaIsIE&&this.tearDownIEWorkarounds(),this._watcher.onConsentChange=null,this._attachShadowHook&&(this._attachShadowHook.disable(),this._attachShadowHook=null)},e.prototype.processMutations=function(){if(!this._root)return[];var e=this._ctx.time.now(),t=[];if(this.maybeGetInitialSnapshot(e,t),this._setPropertyWasThrottled&&(t.push({Kind:p.EVENT_FAIL_THROTTLED,When:e,Args:[p.ThrottledSetPropertyHooks]}),this._setPropertyWasThrottled=!1),this._records.length>0||this._toRefresh.length>0){var r={},n={};for(var i in this.processRecords(e,t,n,r),n){var o=i.split("\t");t.push({Kind:p.EVENT_MUT_ATTR,When:e,Args:[parseInt(o[0]),o[1],n[i]]})}for(var i in r)t.push({Kind:p.EVENT_MUT_TEXT,When:e,Args:[parseInt(i),r[i]]})}var a=this._newShadowContainers;this._newShadowContainers=[];for(var u=0;u<a.length;u++){var c=a[u].shadowRoot;c&&0!=y.fsid(a[u])&&0==y.fsid(c)&&(this.observe(c),this.genShadow(e,t,a[u],c))}return t.push.apply(t,s(this._resizer.collect(e))),this._records=[],t},e.prototype.recordingIsDetached=function(){return this._root&&this._root!=this._wnd.document},e.prototype.maybeGetInitialSnapshot=function(e,t){this._sentDomSnapshot||(this.genInsert(e,t,null,this._root,null),this._resizer.nodeChanged(this._root),this._observer&&this.observe(this._root),this._sentDomSnapshot=!0,this.hookAttachShadow())},e.prototype.hookAttachShadow=function(){var e=this;this._attachShadowHook=c.activateHook(HTMLElement.prototype,"attachShadow"),this._attachShadowHook&&this._attachShadowHook.before(function(t){t.that.shadowRoot||e._newShadowContainers.push(t.that)})},e.prototype.observe=function(e){this._observer.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})},e.prototype.processRecords=function(e,t,r,n){for(var o,s,a=this,u={},c={},h=function(r){if(y.mirrorFor(r)){a.genRemove(e,t,y.mirrorFor(r));var n=y.mirrorFor(r.parentNode);n&&(c[n.id]=n.node)}},d=0;d<this._records.length;++d)try{var f=this._records[d],p=y.fsid(f.target);if(!p)continue;switch(u[p]=f.target,f.type){case"childList":if(f.removedNodes.length>0)for(var g=0;g<f.removedNodes.length;++g){var m=y.mirrorFor(f.removedNodes[g]);m&&m.id&&this.genRemove(e,t,m)}f.addedNodes.length>0&&(c[p]=f.target);break;case"characterData":y.isExcluded(f.target)||f.oldValue!=f.target.textContent&&(n[p]=v.scrubTextNode(f.target));break;case"attributes":var E=f.target,w=this._watcher.isWatched(E);if(w&&w!=l.WatchKind.Watch&&!y.isExcluded(E)){h(E);break}var S=b(f.attributeNamespace)+(f.attributeName||""),T=v.scrubAttrName(S);if(E.hasAttribute(S)){var I=f.target.getAttribute(S);f.oldValue!=I&&(I=v.scrubAttrValue(this._ctx.options.orgId,f.target,T,I||""),this._attrVisitor(f.target,T,I||""),null!==I&&(r[p+"\t"+T]=I))}else r[p+"\t"+T]=null;}}catch(e){}try{for(var N=i(this._toRefresh),R=N.next();!R.done;R=N.next()){var x=R.value;try{h(x)}catch(e){_.FsBugSnag.sendToBugsnag(e,"error")}}}catch(e){o={error:e}}finally{try{R&&!R.done&&(s=N["return"])&&s.call(N)}finally{if(o)throw o.error}}for(var k in this._toRefresh=[],c){var C=c[k],O=y.mirrorFor(C);O&&O.id&&this.diff(e,t,C,O.child,C.firstChild)}for(var k in u){C=u[k];this._resizer.nodeChanged(C)}},e.prototype._checkForMissingInsertions=function(e){if(!this._sentDomSnapshot||!e)return[];return this.walkAddRecords(this._root),[]},e.prototype.walkAddRecords=function(e){var t=this;y.fsid(e)||null===e.parentNode?c.forEachNextSibling(e.firstChild,function(e){t.walkAddRecords(e)}):this._records.push(m.createAddChildrenRecord(e.parentNode,[e]))},e.prototype.diff=function(e,t,r,n,i){for(var o=[],s=n,a=i;s&&a;){var u=y.mirrorFor(a);y.fsid(a)?u&&s.id==u.id?(s=s.next,a=c.nextSibling(a)):(o.push({remove:s}),s=s.next):(o.push({insert:[r,a,s.node]}),a=c.nextSibling(a))}for(;s;s=s.next)o.push({remove:s});c.forEachNextSibling(a,function(e){o.push({insert:[r,e,null]})});for(var h=!1,d=0;d<o.length;d++){var l=o[d];l.insert?this.genInsert(e,t,l.insert[0],l.insert[1],l.insert[2]):l.remove&&(h=!0,this.genRemove(e,t,l.remove))}_.assert(!h,"All remove events should have been generated earlier, in MutationWatcher.processMutations")},e.prototype.genShadow=function(e,t,r,n){var i=y.fsid(r),o=this.genDocStream(e,r,n,null);o.length>0&&t.push({When:e,Kind:p.EVENT_MUT_SHADOW,Args:[i,this._compress?this._lz.encode(o):o]})},e.prototype.genInsert=function(e,t,r,n,i){var o=y.fsid(r)||-1,s=y.fsid(i)||-1,a=this.genDocStream(e,r,n,i);a.length>0&&t.push({When:e,Kind:p.EVENT_MUT_INSERT,Args:[o,s,this._compress?this._lz.encode(a):a]})},e.prototype.genDocStream=function(e,t,r,n){var o,s,a=this;if(t&&y.isExcluded(t))return[];var u=[],c=this._encoder.tokenizeNode(t,n,r,function(t){if(t.nodeType==E.Node_ELEMENT_NODE){var r=t;r.shadowRoot&&a.observe(r.shadowRoot)}a._nodeVisitor(e,t,u)},function(e,t,r){a._attrVisitor(e,t,r)});try{for(var h=i(u),d=h.next();!d.done;d=h.next()){(0,d.value)()}}catch(e){o={error:e}}finally{try{d&&!d.done&&(s=h["return"])&&s.call(h)}finally{if(o)throw o.error}}return c},e.prototype.genRemove=function(e,t,r){var n=r.id;if(this._beforeRemove(r),y.removeMirror(r,this._resizer),t.length>0){var i=t[t.length-1];if(i.Kind==p.EVENT_MUT_REMOVE)return void i.Args.push(n)}t.push({When:e,Kind:p.EVENT_MUT_REMOVE,Args:[n]})},e.prototype.setUpIEWorkarounds=function(){var t=this;if(f.uaIsIE11){var r=Object.getOwnPropertyDescriptor(Node.prototype,"textContent"),i=r&&r.set;if(!r||!i)throw new Error("Missing textContent setter -- not safe to record mutations.");Object.defineProperty(Element.prototype,"textContent",n({},r,{set:function(e){try{for(var t=void 0;t=this.firstChild;)this.removeChild(t);if(null===e||""==e)return;var r=(this.ownerDocument||document).createTextNode(e);this.appendChild(r)}catch(t){i&&i.call(this,e)}}}))}this._setPropertyThrottle=new d.Throttle(e.ThrottleMax,e.ThrottleInterval,function(){return new d.RealTimeout(function(){t._setPropertyWasThrottled=!0,t.tearDownIEWorkarounds()}).start()});var o=this._setPropertyThrottle.guard(function(e){e.cssText=e.cssText});this._setPropertyThrottle.open(),this._setPropertyHook=c.activateHook(CSSStyleDeclaration.prototype,"setProperty"),this._setPropertyHook&&this._setPropertyHook.afterSync(function(e){o(e.that)}),this._removePropertyHook=c.activateHook(CSSStyleDeclaration.prototype,"removeProperty"),this._removePropertyHook&&this._removePropertyHook.afterSync(function(e){o(e.that)})},e.prototype.tearDownIEWorkarounds=function(){this._setPropertyThrottle&&this._setPropertyThrottle.close(),this._setPropertyHook&&this._setPropertyHook.disable(),this._removePropertyHook&&this._removePropertyHook.disable()},e.prototype.updateConsent=function(){for(var e=this._watcher.allConsentSensitiveElements(this._root),t=0;t<e.length;t++)y.fsid(e[t])&&this._toRefresh.push(e[t])},e.ThrottleMax=1024,e.ThrottleInterval=1e4,e}();function b(e){return void 0===e&&(e=""),null===e?"":{"http://www.w3.org/1999/xlink":"xlink:","http://www.w3.org/XML/1998/namespace":"xml:","http://www.w3.org/2000/xmlns/":"xmlns:"}[e]||""}t.MutationWatcher=S},function(e,t,r){"use strict";t.__esModule=!0;var n=r(14),i=r(1),o=r(8),s=r(15),a=r(13),u=r(2),c=r(7),h=r(6),d=r(48),l=function(){function e(e,t,r){this._watcher=e,this._resizer=t,this._orgId=r,h.clearMirrors()}return e.prototype.tokenizeNode=function(e,t,r,n,i){var o=this,s=h.mirrorFor(e),a=h.mirrorFor(t),u=[];return h.tryTokenize(function(){o.tokeNode(s,a,r,u,n,i)})||(u=[]),u},e.prototype.tokeNode=function(e,t,r,l,p,_){var g=this;if("script"==a.tagName(r)||r.nodeType==s.Node_COMMENT_NODE)return null;var v=function(e){return e.constructor===window.ShadowRoot}(r),y=h.newMirror(r);if(e&&(v?e.shadow=y:h.insertMirror(e,y,t,this._resizer)),r.nodeType==s.Node_DOCUMENT_TYPE_NODE){var m=r;return l.push("<!DOCTYPE",":name",m.name,":publicId",m.publicId||"",":systemId",m.systemId||""),y}try{var E=function(e,t){(e||t)&&(l.push("["),e&&g.tokeNode(y,null,e,l,p,_),i.forEachNextSibling(r.firstChild,function(e){g.tokeNode(y,null,e,l,p,_)}),l.push("]"))};switch(r.nodeType){default:l.push("<"+r.nodeName),f(r,p);break;case s.Node_DOCUMENT_FRAGMENT_NODE:case s.Node_DOCUMENT_NODE:l.push("<"+(v?"#shadow":r.nodeName)),E(null,r.firstChild);break;case s.Node_TEXT_NODE:void 0===y.mask&&(y.mask=!y.parent||y.parent.mask),y.mask&&this._resizer.observe(r.parentElement),f(r,p),l.push("<"+r.nodeName,c.scrubTextNode(r,y));break;case s.Node_ELEMENT_NODE:var w=r,S=w.nodeName;"http://www.w3.org/2000/svg"==w.namespaceURI&&(S="svg:"+S),l.push("<"+S);var b=this._watcher.isWatched(w);if(null!==b)switch(y.watchKind=b,b){case n.WatchKind.Watch:this._resizer.observe(w);break;case n.WatchKind.Exclude:this._resizer.observe(w),l.push(":"+d.AttrExcluded,"true");break;case n.WatchKind.Unmask:y.mask=!1;break;case n.WatchKind.Mask:y.mask=!0;}else y.parent&&(y.mask=y.parent.mask);y.mask&&l.push(":"+d.AttrMasked,"true"),y.watchKind!=n.WatchKind.Exclude&&f(r,p),function(e,t,r){var n=a.tagName(t);if(o.uaIsEdge&&"output"===n)return;var i=t;if(i.attributes&&i.attributes.length>0)for(var s=0;s<i.attributes.length;s++){var u=i.attributes[s];if(null!=u){var h=c.scrubAttrName(u.name),d=c.scrubAttrValue(e,t,h,u.value);null!==d&&r(h,d)}}}(this._orgId,w,function(e,t){if(l.push(":"+e),l.push(t),_)try{_(w,e,t)}catch(e){u.FsBugSnag.sendToBugsnag(e,"error")}}),y.watchKind!=n.WatchKind.Exclude&&E(w.shadowRoot,w.firstChild);}}catch(e){u.FsBugSnag.sendToBugsnag(e,"error")}return y},e}();function f(e,t){if(t)try{t(e)}catch(e){u.FsBugSnag.sendToBugsnag(e,"error")}}t.NodeEncoder=l},function(e,t,r){"use strict";t.__esModule=!0;var n=r(47);t.Object=n.ExtendedObject,t.isNonEmpty=function(e){return e.length>0},t.assertExhaustive=function(e,t){throw void 0===t&&(t="Reached unexpected case in exhaustive switch"),new Error(t)},t.pick=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n={};return t.forEach(function(t){n[t]=e[t]}),n}},function(e,t,r){"use strict";t.__esModule=!0,t.ExtendedObject=Object},function(e,t,r){"use strict";t.__esModule=!0,t.AttrExcluded="_fs_excluded",t.AttrMasked="_fs_masked"},function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function e(){this.dict={idx:-1,map:{}},this.nodeCount=1,this.startIdx=0}return e.prototype.encode=function(t){if(0==t.length)return[];var r,n,i=t[0],o=Object.prototype.hasOwnProperty.call(this.dict.map,i)?this.dict.map[i]:null,s=[],a=1;function u(){o?a>1?s.push([o.idx,a]):s.push(o.idx):s.push(i)}for(r=1;r<t.length;r++)if(n=t[r],o&&Object.prototype.hasOwnProperty.call(o.map,n))a++,i=n,o=o.map[n];else{u();var c=this.startIdx+r-a;null==o&&this.nodeCount<e.MAX_NODES&&(o={idx:c,map:{}},this.dict.map[i]=o,this.nodeCount++),o&&this.nodeCount<e.MAX_NODES&&(o.map[n]={idx:c,map:{}},this.nodeCount++),a=1,i=n,o=Object.prototype.hasOwnProperty.call(this.dict.map,n)?this.dict.map[n]:null}return u(),this.startIdx+=t.length,s},e.MAX_NODES=1e4,e}();t.LZJGWEncoder=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0;var s=r(0),a=r(14),u=r(1),c=r(15),h=r(6),d=function(){function e(){this._watchedDims={},this._nodes={}}return e.create=function(e){return l.isSupported(e.window)?new l:new f},e.prototype.collect=function(e){var t=[];for(var r in this._nodes)this.addPlaceholderResize(e,t,this._nodes[r]);return this._nodes={},t},e.prototype.addNode=function(e){if(e){var t=h.fsid(e);t&&(this._nodes[t]=e)}},e.prototype.addPlaceholderResize=function(e,t,r){try{if(r.nodeType!=c.Node_ELEMENT_NODE)return;var n=r,i=h.watchKind(n),o=n.getBoundingClientRect(),u=o.width,d=o.height,l=h.fsid(n),f=this._watchedDims[l];if(f&&f.w==u&&f.h==d)return;if(i==a.WatchKind.Watch){var p=!!f&&0!=f.w&&0!=f.h,_=0!=u&&0!=d;p!=_&&t.push({When:e,Kind:s.EVENT_WATCHED_ELEM,Args:[l,_]})}else t.push({When:e,Kind:s.EVENT_PLACEHOLDER_SIZE,Args:[l,u,d]});this._watchedDims[l]={w:u,h:d}}catch(e){}},e}();t.ResizeWatcher=d;var l=function(e){function t(){var t=e.call(this)||this;return t._obs=new ResizeObserver(function(e){var r,n;try{for(var i=o(e),s=i.next();!s.done;s=i.next()){var a=s.value;t.addNode(a.target)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}}),t}return i(t,e),t.isSupported=function(e){return"ResizeObserver"in e},t.prototype.observe=function(e){this._obs.observe(e),this.addNode(e)},t.prototype.unobserveSubtree=function(e){},t.prototype.nodeChanged=function(e){},t}(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.observe=function(e){this.growWatchedIndex(h.mirrorFor(e)),this.addNode(e)},t.prototype.unobserveSubtree=function(e){var t=h.mirrorFor(e);t&&this.clearWatchedIndex(t)},t.prototype.nodeChanged=function(e){var t,r,n=this.relatedWatched(e);try{for(var i=o(n),s=i.next();!s.done;s=i.next()){var a=s.value;this.addNode(a)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.watchedChildren=function(e){return e.watchedChildren},t.prototype.growWatchedIndex=function(e){if(e&&h.isWatched(e.node))for(var t=e,r=e.parent;r;r=r.parent){if(this.watchedChildren(r)||(r.watchedChildren={}),this.watchedChildren(t))for(var n in this.watchedChildren(t))delete this.watchedChildren(r)[n];if(this.watchedChildren(r)[t.id]=t,u.hasNKeys(this.watchedChildren(r),2))t=r;else if(u.hasMoreThanNKeys(this.watchedChildren(r),2))break}},t.prototype.relatedWatched=function(e){var t=[],r=h.mirrorFor(e);if(r)for(var n=[r],i=0;n.length&&++i<1e3;){var o=n.pop();h.isWatched(o.node)&&t.push(o.node),this.watchedChildren(o)&&u.forIn(this.watchedChildren(o),function(e){n.push(e)})}else{for(var s=e;s&&!h.fsid(s);)s=s.parentNode;s&&h.isWatched(s)&&t.push(s)}return t},t.prototype.clearWatchedIndex=function(e){if(u.hasMoreThanNKeys(this.watchedChildren(e),0)||h.isWatched(e.node))for(var t=this.watchedChildren(e)&&u.hasMoreThanNKeys(this.watchedChildren(e),1)||h.isWatched(e.node)?e.id:u.firstKey(this.watchedChildren(e)),r=t?e.parent:null;r&&this.watchedChildren(r)&&this.watchedChildren(r)[t];){if(delete this.watchedChildren(r)[t],u.hasNKeys(this.watchedChildren(r),1)){var n=r.id,i=u.firstValue(this.watchedChildren(r));for(r=r.parent;r&&this.watchedChildren(r)&&this.watchedChildren(r)[n];)delete this.watchedChildren(r)[n],this.watchedChildren(r)[i.id]=i,r=r.parent;break}r=r.parent}},t}(d);t.GraphResizeWatcher=f},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};t.__esModule=!0;var i=r(1),o={attributeName:null,attributeNamespace:null,addedNodes:[],removedNodes:[],nextSibling:null,previousSibling:null,oldValue:null};function s(e){return n({},o,e,{type:"childList"})}function a(e,t){return 0===t.length?s({target:e}):s({addedNodes:t,nextSibling:i.nextSibling(t[t.length-1]),previousSibling:i.previousSibling(t[0]),target:e})}t.createChildListRecord=s,t.createAddChildrenRecord=a,t.createAddAllChildrenRecord=function(e){var t=[];return i.forEachNextSibling(e.firstChild,function(e){t.push(e)}),a(e,t)},t.createRemoveAllChildrenRecord=function(e){var t=[];return i.forEachNextSibling(e.firstChild,function(e){t.push(e)}),s({nextSibling:null,previousSibling:null,removedNodes:t,target:e})},t.createAttributeRecord=function(e){return n({},o,e,{type:"attributes"})},t.createCharacterDataRecord=function(e){return n({},o,e,{type:"characterData"})}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(8),i=r(1),o=r(11);t.FSMutationObserver=n.uaIsIE&&!n.uaIsIE11?y:window.MutationObserver||window.WebKitMutationObserver||y;var s,a=Object.defineProperty,u=o.now()%1e9,c=new(window.WeakMap||((s=function(){this.name="__st"+(1e9*Math.random()>>>0)+u++ +"__"}).prototype={set:function(e,t){var r=e[this.name];r&&r[0]===e?r[1]=t:a(e,this.name,{value:[e,t],writable:!0})},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0}},s)),h=window.setImmediate||window.msSetImmediate;if(!h){var d=[],l=String(Math.random());window.addEventListener("message",function(e){if(e.data===l){var t=d;d=[],t.forEach(function(e){e()})}}),h=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return d.push(e),window.postMessage(l,"*"),0}}var f=!1,p=[];function _(){f=!1;var e=p;p=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var r=e.takeRecords();!function(e){e.nodes_.forEach(function(t){var r=c.get(t);r&&r.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}(e),r.length&&(e.callback_(r,e),t=!0)}),t&&_()}function g(e,t){for(var r=e;r;r=r.parentNode){var n=c.get(r);if(n)for(var i=0;i<n.length;i++){var o=n[i],s=o.options;if(r===e||s.subtree){var a=t(s);a&&o.enqueue(a)}}}}var v=0;function y(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++v}y.prototype={observe:function(e,t){var r;if(r=e,e=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(r)||r,!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var n,i=c.get(e);i||c.set(e,i=[]);for(var o=0;o<i.length;o++)if(i[o].observer===this){(n=i[o]).removeListeners(),n.options=t;break}n||(n=new I(this,e,t),i.push(n),this.nodes_.push(e)),n.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=c.get(e),r=0;r<t.length;r++){var n=t[r];if(n.observer===this){n.removeListeners(),t.splice(r,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var m,E,w=function(){return function(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}}();function S(e,t){return m=new w(e,t)}function b(e){return E||((r=new w((t=m).type,t.target)).addedNodes=t.addedNodes.slice(),r.removedNodes=t.removedNodes.slice(),r.previousSibling=t.previousSibling,r.nextSibling=t.nextSibling,r.attributeName=t.attributeName,r.attributeNamespace=t.attributeNamespace,r.oldValue=t.oldValue,(E=r).oldValue=e,E);var t,r}function T(e,t){return e===t?e:E&&((r=e)===E||r===m)?E:null;var r}function I(e,t,r){var n=this;this.observer=e,this.target=t,this.options=r,this.transientObservedNodes=[],this.handleEventBound=function(e){return n.handleEvent_(e)}}I.prototype={enqueue:function(e){var t,r=this.observer.records_,n=r.length;if(r.length>0){var i=T(r[n-1],e);if(i)return void(r[n-1]=i)}else t=this.observer,p.push(t),f||(f=!0,h(_));r[n]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this.handleEventBound,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this.handleEventBound,!0),t.childList&&e.addEventListener("DOMNodeInserted",this.handleEventBound,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this.handleEventBound,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this.handleEventBound,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this.handleEventBound,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this.handleEventBound,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this.handleEventBound,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=c.get(e);t||c.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=c.get(e),r=0;r<t.length;r++)if(t[r]===this){t.splice(r,1);break}},this)},handleEvent_:function(e){switch(e.type){case"DOMAttrModified":var t=e.attrName,r=e.relatedNode.namespaceURI,n=e.target;(s=S("attributes",n)).attributeName=t,s.attributeNamespace=r;var o=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;g(n,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(r)))return e.attributeOldValue?b(o):s});break;case"DOMCharacterDataModified":var s=S("characterData",n=e.target);o=e.prevValue;g(n,function(e){if(e.characterData)return e.characterDataOldValue?b(o):s});break;case"DOMNodeRemoved":case"DOMNodeInserted":"DOMNodeRemoved"==e.type&&this.addTransientObserver(e.target);n=e.relatedNode;var a,u,c=e.target;"DOMNodeInserted"===e.type?(a=[c],u=[]):(a=[],u=[c]);var h=i.previousSibling(c),d=i.nextSibling(c);(s=S("childList",n)).addedNodes=a,s.removedNodes=u,s.previousSibling=h,s.nextSibling=d,g(n,function(e){if(e.childList)return s});}m=E=void 0}}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0,r(26);var i=r(0),o=r(7),s=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],a=["name","startTime","duration","initiatorType","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","type","redirectCount","decodedBodySize","encodedBodySize","transferSize"],u=["name","startTime","duration","initiatorType","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","decodedBodySize","encodedBodySize","transferSize"],c=["name","startTime","duration"],h=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"],d=function(){function e(e,t,r){this._ctx=e,this._queue=t,this._perfSupported=!1,this._timingSupported=!1,this._getEntriesSupported=!1,this._memorySupported=!1,this._lastUsedJSHeapSize=0,this._gotLoad=!1,this._observer=null,this._observedBatches=[];var n=window.performance;n&&(this._perfSupported=!0,n.timing&&(this._timingSupported=!0),n.memory&&(this._memorySupported=!0),"function"==typeof n.getEntries&&(this._getEntriesSupported=!0),this._listeners=r.createChild())}return e.prototype.start=function(e){var t=this;this._resourceUploader=e;var r=window.performance;r&&(this._ctx.recording.inFrame||this._queue.enqueue(i.EVENT_REC_FEAT_SUPPORTED,[i.RecFeaturePerformance,this._timingSupported,i.RecFeaturePerformanceEntries,this._getEntriesSupported,i.RecFeaturePerformanceMemory,this._memorySupported,i.RecFeaturePerformanceObserver,!!window.PerformanceObserver]),this.observe(),!this._observer&&r.addEventListener&&r.removeEventListener&&this._listeners.add(r,"resourcetimingbufferfull",!0,function(){t._queue.enqueue(i.EVENT_RESOURCE_TIMING_BUFFER_FULL,[])}),this.checkMemory())},e.prototype.onLoad=function(){this._gotLoad||(this._gotLoad=!0,this._timingSupported&&(this.recordTiming(performance.timing),this.checkForNewEntries()))},e.prototype.tick=function(e){this.checkMemory(),e&&this.checkForNewEntries()},e.prototype.shutdown=function(){this._listeners&&this._listeners.clear(),this._resourceUploader=void 0;var e=[];this._observer?(this._observer.takeRecords&&(e=this._observer.takeRecords()),this._observer.disconnect()):window.performance&&window.performance.getEntries&&(e=window.performance.getEntries()),e.length>300&&(e=e.slice(0,300),this._queue.enqueue(i.EVENT_RESOURCE_TIMING_BUFFER_FULL,[])),this._observedBatches.push(e),this.tick(!0)},e.prototype.observe=function(){var e=this;if(!this._observer&&this._getEntriesSupported&&window.PerformanceObserver){this._observedBatches.push(performance.getEntries()),this._observer=new window.PerformanceObserver(function(t){var r=t.getEntries();e._observedBatches.push(r)});var t=["navigation","resource","measure","mark"];window.PerformancePaintTiming&&t.push("paint"),this._observer.observe({entryTypes:t})}},e.prototype.checkMemory=function(){if(this._memorySupported&&!this._ctx.recording.inFrame){var e=performance.memory;if(e){var t=e.usedJSHeapSize-this._lastUsedJSHeapSize;(0==this._lastUsedJSHeapSize||Math.abs(t/this._lastUsedJSHeapSize)>.2)&&(this.addPerfEvent(i.PerfEntryMemory,e,h),this._lastUsedJSHeapSize=e.usedJSHeapSize)}}},e.prototype.recordEntry=function(e){switch(e.entryType){case"navigation":this.recordNavigation(e);break;case"resource":this.recordResource(e);break;case"paint":this.recordPaint(e);break;case"measure":this.recordMeasure(e);break;case"mark":this.recordMark(e);}},e.prototype.checkForNewEntries=function(){var e,t,r,i;if(this._perfSupported&&this._getEntriesSupported){var o=this._observedBatches;this._observedBatches=[];try{for(var s=n(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{for(var c=(r=void 0,n(u)),h=c.next();!h.done;h=c.next()){var d=h.value;this.recordEntry(d)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=c["return"])&&i.call(c)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s["return"])&&t.call(s)}finally{if(e)throw e.error}}}},e.prototype.recordTiming=function(e){this.addPerfEvent(i.PerfEntryTiming,e,s)},e.prototype.recordNavigation=function(e){this.addPerfEvent(i.PerfEntryNavigation,e,a,{name:"navigation"})},e.prototype.recordResource=function(e){"3E938"!=this._ctx.options.orgId&&this.addPerfEvent(i.PerfEntryResource,e,u,{name:e.initiatorType})},e.prototype.recordPaint=function(e){this.addPerfEvent(i.PerfEntryPaint,e,c)},e.prototype.recordMark=function(e){this.addPerfEvent(i.PerfEntryMark,e,c)},e.prototype.recordMeasure=function(e){this.addPerfEvent(i.PerfEntryMeasure,e,c)},e.prototype.addPerfEvent=function(e,t,r,s){var a,u;void 0===s&&(s={});var c=[e];try{for(var h=n(r),d=h.next();!d.done;d=h.next()){var l=d.value,f=t[l];if(void 0===f&&(f=-1),l in s){var p=o.scrubUrl(f,this._ctx.options.orgId,{source:"perfEntry",type:s[l]});f===p&&this.maybeUploadResource(e,t,p),f=p}c.push(f)}}catch(e){a={error:e}}finally{try{d&&!d.done&&(u=h["return"])&&u.call(h)}finally{if(a)throw a.error}}this._queue.enqueue(i.EVENT_PERF_ENTRY,c)},e.prototype.maybeUploadResource=function(e,t,r){this._resourceUploader&&e===i.PerfEntryResource&&"css"===t.initiatorType&&this._resourceUploader.uploadIfNeeded(this._ctx.window,r)},e}();t.PerfWatcher=d},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s};t.__esModule=!0;var i=r(1),o=r(3),s=r(29),a=r(12),u=r(0),c=r(55),h=r(4),d=r(2),l=r(7),f=r(11),p="\r\n",_=["a-im","accept","accept-charset","accept-encoding","accept-language","accept-datetime","access-control-request-method,","access-control-request-headers","cache-control","connection","content-length","content-md5","content-type","date","expect","forwarded","from","host","if-match","if-modified-since","if-none-match","if-range","if-unmodified-since","max-forwards","origin","pragma","range","referer","te","user-agent","upgrade","via","warning"],g=["access-control-allow-origin","access-control-allow-credentials","access-control-expose-headers","access-control-max-age","access-control-allow-methods","access-control-allow-headers","accept-patch","accept-ranges","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","permanent","p3p","pragma","proxy-authenticate","public-key-pins","retry-after","permanent","server","status","strict-transport-security","trailer","transfer-encoding","tk","upgrade","vary","via","warning","www-authenticate","x-frame-options"],v={BM7A6:["x-b3-traceid"],KD87S:["transactionid"]},y={"thefullstory.com":["x-cloud-trace-context"],TN1:["x-cloud-trace-context"],KD87S:["transactionid"],PPE96:["x-b3-traceid"],HWT6H:["x-b3-traceid"],PPEY7:["x-b3-traceid"],PPK3W:["x-b3-traceid"]},m=function(){function e(e,t){this._ctx=e,this._queue=t,this._enabled=!1,this._reqHeaderWhitelist={},this._rspHeaderWhitelist={},this._pendingReqs={},this._events=[],this._curId=1,this.addHeaderWhitelist(_,g),this.addHeaderWhitelist(v[e.options.orgId],y[e.options.orgId])}return e.prototype.isEnabled=function(){return this._enabled},e.prototype.enable=function(){this._enabled||(this._enabled=!0,this._queue.enqueue(u.EVENT_REC_FEAT_SUPPORTED,[u.RecFeatureAjax,!0]),this.maybeShimXHR(this._ctx.window))},e.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._xhrOpenHook&&(this._xhrOpenHook.disable(),this._xhrOpenHook=null),this._xhrSetHeaderHook&&(this._xhrSetHeaderHook.disable(),this._xhrSetHeaderHook=null))},e.prototype.setWatches=function(e){var t=this,r=[];this._reqWhitelist=[],this._rspWhitelist=[],e.forEach(function(e){r.push(e.URLRegex),t._reqWhitelist.push(A(e.RecordReq,e.ReqWhitelist)),t._rspWhitelist.push(A(e.RecordRsp,e.RspWhitelist))}),this._reqBodyRegex=new RegExp("("+r.join(")|(")+")")},e.prototype.addHeaderWhitelist=function(e,t){var r=this;e&&e.forEach(function(e){return r._reqHeaderWhitelist[e]=!0}),t&&t.forEach(function(e){return r._rspHeaderWhitelist[e]=!0})},e.prototype.tick=function(e){if(e){for(var t=0;t<this._events.length;t++)this._queue.enqueue(u.EVENT_AJAX_REQUEST,this._events[t]);this._events=[]}},e.prototype.maybeShimXHR=function(e){var t=this,r=e.XMLHttpRequest;if(r){var n=r.prototype;this._xhrOpenHook=i.activateHook(n,"open"),this._xhrOpenHook&&this._xhrOpenHook.before(function(e){var r=e.args[0],n=e.args[1];t.addPendingReq(e.that,r,n),e.that.addEventListener("load",d.FsBugSnag.wrap(function(r){t.onComplete(e.that)})),e.that.addEventListener("error",d.FsBugSnag.wrap(function(r){t.onComplete(e.that)}))}),this._xhrSendHook=i.activateHook(n,"send"),this._xhrSendHook&&this._xhrSendHook.before(function(e){var r=e.args[0];t.maybeRecordReqBody(e.that,r)}),this._xhrSetHeaderHook=i.activateHook(n,"setRequestHeader"),this._xhrSetHeaderHook&&this._xhrSetHeaderHook.before(function(e){var r=e.args[0],n=e.args[1];t.addHeader(e.that,r,n)})}},e.prototype.pendingReq=function(e){var t=C(e);return t?this._pendingReqs[t]:(o.logIfDebug("missing xhr req id"),null)},e.prototype.deletePending=function(e){var t=C(e);t&&delete this._pendingReqs[t]},e.prototype.maybeRecordReqBody=function(e,t){var r,i=this.pendingReq(e);i&&(r=n(this.requestBody(i.url,t),2),i.reqSize=r[0],i.reqBody=r[1])},e.prototype.addPendingReq=function(e,t,r){this.deletePending(e);var n=this._curId++;r=a.resolveUrlToDocument(this._ctx.window,r),this._pendingReqs[n]={id:n,xhr:e,method:t,url:r,startTime:f.now(),headers:[],reqSize:0,reqBody:void 0},function(e,t){e._fs=t}(e,n)},e.prototype.addHeader=function(e,t,r){var n=this.pendingReq(e);n&&n.headers.push([t,r])},e.prototype.onComplete=function(e){var t=this,r=this.pendingReq(e);if(r){this.deletePending(e);var i=f.now()-r.startTime,o=M(r.headers,function(e){return e[0]in t._reqHeaderWhitelist}),s=M(F(e.getAllResponseHeaders()),function(e){return e[0]in t._rspHeaderWhitelist}),a=n(this.responseBody(r.url,e),2),c=a[0],h=a[1],d=[r.method,l.scrubUrl(r.url,this._ctx.options.orgId,{source:"event",type:u.EVENT_AJAX_REQUEST}),i,e.status,o,s,r.startTime,r.reqSize,c,r.reqBody?r.reqBody:null,h||null];this._events.push(d)}},e.prototype.findWhitelistIndexFor=function(e){if(this._reqBodyRegex){var t=this._reqBodyRegex.exec(e);if(t)for(var r=1;r<t.length;r++)if(void 0!==t[r])return r-1}return-1},e.prototype.requestBody=function(e,t){if(null==t)return[0,void 0];var r=this.findWhitelistIndexFor(e),n=r>=0&&this._reqWhitelist[r],i=typeof t;if("string"==i)return E(t,n);if("object"==i){var o=i.constructor;switch(o){case String:case Object:default:return w(t,n);case Blob:return b(t,n);case ArrayBuffer:return S(t,n);case Document:case FormData:case URLSearchParams:case ReadableStream:return[-1,n?""+o.name:void 0];}}return[-1,n?"[unknown]":void 0]},e.prototype.responseBody=function(e,t){var r=this.findWhitelistIndexFor(e),n=r>=0&&this._rspWhitelist[r];if(t.responseType){var i=t.response;switch(i||o.logIfDebug("Maybe response type was different that expected."),t.responseType){case"text":return T(t.responseText,n);case"json":return I(i,n);case"arraybuffer":return R(i,n);case"blob":return x(i,n);case"document":return N(i,n);}}return T(t.responseText,n)},e}();function E(e,t){return[e.length,O(e,t)]}function w(e,t){var r=void 0;return!1!==t&&(r=c.whitelistedJson(e,u.MaxPayloadLength,t)),[k(e),r]}function S(e,t){var r=void 0;return t&&(r="[ArrayBuffer]"),[e.byteLength,r]}function b(e,t){var r=void 0;return t&&(r="[Blob]"),[e.size,r]}function T(e,t){return e?[e.length,O(e,t)]:[-1,void 0]}function I(e,t){return e?[k(e),c.whitelistedJson(e,u.MaxPayloadLength,t)]:[-1,void 0]}function N(e,t){return[-1,t?"[Document]":void 0]}function R(e,t){return[e?e.byteLength:-1,t?"[ArrayBuffer]":void 0]}function x(e,t){return[e?e.size:-1,t?"[Blob]":void 0]}function k(e){try{return h.windex.jsonStringify(e).length}catch(e){}return 0}function C(e){return e._fs}function O(e,t){if(0!=t)try{return c.whitelistedJson(h.windex.jsonParse(e),u.MaxPayloadLength,t)}catch(r){return 1==t?e.slice(0,u.MaxPayloadLength):void 0}}function A(e,t){switch(e){default:case u.AjaxBodyElide:return!1;case u.AjaxBodyRecord:return!0;case u.AjaxBodyWhitelist:try{return s.parseFieldPatterns(t)}catch(e){return o.logIfDebug("error parsing field whitelist ("+t+": "+e),!1}}}function F(e){var t=[];return e.split(p).forEach(function(e){var r=e.indexOf(":");-1!=r?t.push([e.slice(0,r).trim(),e.slice(r+1,e.length).trim()]):t.push([e.trim(),null])}),t}function M(e,t){var r="";return e.forEach(function(e){e[0]=e[0].toLowerCase();var n=t(e);r+=e[0]+(n?": "+e[1]:"")+p}),r}t.AjaxWatcher=m,t._reqBodyString=E,t._reqBodyObject=w,t._reqBodyArrayBuffer=S,t._reqBodyBlob=b,t._rspBodyText=T,t._rspBodyObject=I,t._rspBodyDocument=N,t._rspBodyArrayBuffer=R,t._rspBodyBlob=x,t.parseHeaders=F},function(e,t,r){"use strict";t.__esModule=!0;var n=r(29),i=r(4),o=n.parseFieldPatterns("**");t.whitelistedJson=function(e,t,r){var n;if(r){n=1==r?o:r;try{var s=0,a=[1],u=[],c={};return c[n.id]=n,u.push(c),i.windex.jsonStringify(e,function(e,r){var n=r&&"object"==typeof r;if(""==e&&1==a.length)return a[0]--,n&&a.push(i.windex.objectKeys(r).length),r;var o={},c=u[u.length-1],h=!0,d=!1,l=function(e){o[e.id]=e,h=!1,e.term&&(d=!0)};for(var f in c){var p=c[f];e in p.edges&&l(p.edges[e]),"*"in p.edges&&l(p.edges["*"]),p.loop&&l(p)}for((h||!n&&!d)&&(r=null),s+=e.length+2,(s+=n?2:null===r?4:r.toString().length)>=t&&(r=void 0),a[a.length-1]--,r&&n&&(a.push(i.windex.objectKeys(r).length),u.push(o));a[a.length-1]<=0;)a.pop(),u.pop();return r})}catch(e){}return"[error serializing "+e.constructor.name+"]"}}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0;var i,o=r(1),s=r(3),a=r(5),u=r(0),c=r(22),h=r(57),d=r(8),l=r(2),f=r(58),p=r(6),_=function(){function e(t,r){var n=this;this.ctx=t,this.queue=r,this.hooks=[],this.removeDisabledPropShim=function(){};var i=e;this.throttle=new a.Throttle(i.ThrottleMax,i.ThrottleInterval,function(){return setTimeout(function(){n.queue.enqueue(u.EVENT_FAIL_THROTTLED,[u.ThrottledStyleSheetHooks]),n.stop()})}),this.addInsert=this.throttle.guard(this.addInsert),this.addDelete=this.throttle.guard(this.addDelete)}return e.prototype.start=function(){var e=this;this.throttle.open();var t=this.ctx.window;if(t.CSSStyleSheet&&t.StyleSheet){var r,n=t.CSSStyleSheet.prototype;(r=o.activateHook(n,"insertRule"))&&(r.afterSync(function(t){e.addInsert(t.that,t.args[0],t.args[1])}),this.hooks.push(r)),(r=o.activateHook(n,"deleteRule"))&&(r.afterSync(function(t){e.addDelete(t.that,t.args[0])}),this.hooks.push(r)),this.removeDisabledPropShim=o.shimProp(t.StyleSheet,"disabled",function(t,r){return e.onDisableSheet(t,r)})}},e.prototype.snapshot=function(e,t){void 0===t&&(t=0);var r=p.fsid(e);if(r){var n=h.elemSheet(e);if(n){var o=h.sheetRules(n);if(o){for(var s=[],a=t;a<o.length;a++)try{s.push(i(o[a]))}catch(e){s.push("html {}")}f.withEventQueueFor(this.ctx,e,function(e){e.enqueue(u.EVENT_CSSRULE_INSERT,[r,s,t])})}}}},e.prototype.addInsert=function(t,r,n){var i=p.fsid(t.ownerNode);if(i&&"string"==typeof r){r.length>e.MaxRuleBytes&&(s.logIfDebug("CSSRule too large, inserting dummy instead: "+r.length),r="dummy {}");var o=[i,[r]];"number"==typeof n&&o.push(n),f.withEventQueueFor(this.ctx,t.ownerNode,function(e){return e.enqueue(u.EVENT_CSSRULE_INSERT,o)})}},e.prototype.addDelete=function(e,t){var r=p.fsid(e.ownerNode);r&&"number"==typeof t&&f.withEventQueueFor(this.ctx,e.ownerNode,function(e){return e.enqueue(u.EVENT_CSSRULE_DELETE,[r,t])})},e.prototype.onDisableSheet=function(e,t){var r=p.fsid(e.ownerNode);r&&f.withEventQueueFor(this.ctx,e.ownerNode,function(e){return e.enqueue(u.EVENT_DISABLE_STYLESHEET,[r,!!t])})},e.prototype.stop=function(){var e,t;this.throttle.close();try{for(var r=n(this.hooks),i=r.next();!i.done;i=r.next()){i.value.disable()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r["return"])&&t.call(r)}finally{if(e)throw e.error}}this.hooks=[],this.removeDisabledPropShim()},e.ThrottleMax=1e4,e.ThrottleInterval=1e4,e.MaxRuleBytes=16384,e}();t.StyleSheetWatcher=_;var g=document.createElement("div");function v(e,t){if(void 0===t&&(t=0),!l.assert(t<=20,"No deep recursion for CSS rules"))return"html { /* Depth limit exceeded! */ }";var r=function(e){switch(e.type){case CSSRule.PAGE_RULE:var t=e.selectorText||"";return t&&o.hasPrefix(t,"@page")?t:"@page "+t;case CSSRule.KEYFRAME_RULE:return e.keyText;case CSSRule.STYLE_RULE:return e.selectorText;case CSSRule.MEDIA_RULE:return"@media "+e.media.mediaText;case CSSRule.KEYFRAMES_RULE:return"@keyframes "+e.name;case CSSRule.SUPPORTS_RULE:return"@supports "+e.conditionText;default:return null;}}(e);if(null==r)return e.cssText;var n=function(e,t){var r=e,n=r.style;if(n){for(var i="",o=0;o<n.length;o++){var s=n[o],a=h.getCssPropertyValue(n,s);i+=s+": "+a,"important"===n.getPropertyPriority(s)&&(i+=" !important"),i+="; "}return i}var u=r.cssRules;if(!u)return null;for(var c="",o=0;o<u.length;o++)c+=v(u[o],t+1);return c}(e,t);return null==n?e.cssText:r+" { "+n+"} "}g.style.width="initial",i=""!=g.style.cssText?function(e){return e.cssText}:v,t._jsCssText=v;var y=/^\s*$/;t.getDynamicRuleTail=function(e){var t=e.textContent||"";if(!(t.length>5e5)){var r=h.sheetRules(h.elemSheet(e));if(r){if(r.length>0&&y.test(t))return 0;var n,i=c.theDummyDoc();d.uaIsIE?(n=i.createElement("style")).textContent=e.textContent:n=i.importNode(e,!0),i.head.appendChild(n);var o=h.sheetRules(h.elemSheet(n));if(i.head.removeChild(n),o)return r.length>o.length?o.length:void 0}}}},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(22);t.elemSheet=function(e){return e?e.sheet:void 0},t.sheetRules=function(e){try{return e?e.cssRules||e.rules:void 0}catch(e){return}},t.getCssPropertyValue=function(e,t){var r=function(e,t){var r=e;if("function"==typeof r.getPropertyCSSValue){var o=r.getPropertyCSSValue(t);if(null!=o){var s;switch(o.cssValueType){case 1:s=o;break;case 2:if(1!==o.length)return;var a=o.item(0);if(null==a)return;if(1!==a.cssValueType)return;s=a;break;default:return;}if(19===s.primitiveType){var u=i.theDummyDoc();n||(n=u.createElement("div"));var c=s.cssText;try{n.style.cssText=t+": \""+c+"\";";var h=n.style.getPropertyCSSValue(t);if(null==h)return;if(c!==h.cssText)return}catch(e){return}finally{n.style.cssText=""}return"\""+c+"\""}}}}(e,t);return void 0!==r?r:e.getPropertyValue(t)}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(16),i=r(2),o="EventQueue not defined for 'withEventQueueFor', likely caused by holding ref to callback";t.withEventQueueFor=function(e,t,r){var a=s(t)||e.window,u=n.getBrowserApi(a);u&&"function"==typeof u._withEventQueue&&u._withEventQueue(e.recording.pageSignature(),function(e){r({enqueue:function(t,r){i.assert(null!=e,o)&&e.enqueue(t,r)},enqueueFirst:function(t,r){i.assert(null!=e,o)&&e.enqueueFirst(t,r)}}),e=null})};var s=function(e){var t=e.ownerDocument;return t&&t.defaultView}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=r(2),o=r(8),s=r(6),a=function(){function e(e,t,r){this._ctx=e,this._q=t,this._listeners=r.createChild()}return e.prototype.start=function(){var e=this,t=this._ctx.window.document;this._listeners.addCustom(t,this.getFullscreenChangeEvent(),!0,function(t){e.onFullscreenChange(t)}),this._listeners.addCustom(t,this.getFullscreenErrorEvent(),!0,function(t){e.onFullscreenError(t)})},e.prototype.stop=function(){this._listeners&&this._listeners.clear()},e.prototype.onFullscreenChange=function(e){var t=this.getFullscreenElement();if(t){var r=s.fsid(t);i.assert(null==this._previousFullscreenFSID,"Error: Received fullscreen signal but we think we are already in fullscreen?"),this._q.enqueue(n.EVENT_FULLSCREEN,[r,!0]),this._previousFullscreenFSID=r}else i.assert(null!=this._previousFullscreenFSID,"Error: Received fullscreen exit signal but have no previous fullscreen event?"),this._q.enqueue(n.EVENT_FULLSCREEN,[this._previousFullscreenFSID,!1]),this._previousFullscreenFSID=void 0},e.prototype.onFullscreenError=function(e){this._q.enqueue(n.EVENT_FULLSCREEN_ERROR,[])},e.prototype.getFullscreenElement=function(){var e=this._ctx.window.document;return e[o.uaPrefixedPropety(e,"fullscreenElement")]},e.prototype.getFullscreenChangeEvent=function(){var e=this._ctx.window.document;return o.uaPrefixedPropety(e,"onfullscreenchange").slice(2)},e.prototype.getFullscreenErrorEvent=function(){var e=this._ctx.window.document;return o.uaPrefixedPropety(e,"onfullscreenerror").slice(2)},e}();t["default"]=a},function(e,t,r){"use strict";t.__esModule=!0;var n=/^\s*at .*(\S+\:\d+|native|(<anonymous>))/m,i=/^(eval@)?(\[native code\])?$/;function o(e){if(!e||"string"!=typeof e.stack)return[];var t=e;return t.stack.match(n)?t.stack.split("\n").filter(function(e){return!!e.match(n)}).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/\(native code\)/,"").split(/\s+/).slice(1),r=a(t.pop()),n=t.join(" "),i=["eval","<anonymous>"].indexOf(r[0])>-1?"":r[0];return s(n,i,r[1],r[2])}):function(e){return e.split("\n").filter(function(e){return!e.match(i)}).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return[e,"",-1,-1];var t=e.split("@"),r=a(t.pop()),n=t.join("@");return s(n,r[0],r[1],r[2])})}(t.stack)}function s(e,t,r,n){return[e||"",t||"",parseInt(r||"-1"),parseInt(n||"-1")]}function a(e){if(!e||-1===e.indexOf(":"))return["","",""];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return t?[t[1]||"",t[2]||"",t[3]||""]:["","",""]}t.genStackTrace=function(){try{throw new Error}catch(e){return o(e).slice(1)}},t.stackTraceFromError=o},function(e,t,r){"use strict";t.__esModule=!0;var n=r(62),i=r(0),o=r(5),s=function(){function e(e,t,r,s){void 0===r&&(r=function(){return[]}),void 0===s&&(s=o.RealTicker),this._ctx=e,this._transport=t,this._gatherExternalEvents=r,this._tickerFactory=s,this._recordingDisabled=!1,this._lastWhen=-1,this._gotUnload=!1,this._eventQueue=[],this._sampleCurvesTicker=new this._tickerFactory(i.CurveSamplingInterval),this._processMutationsTicker=new this._tickerFactory(i.MutationProcessingInterval),this._processor=new n.EventProcessor(e)}return e.prototype.startPipeline=function(e,t,r,n){var i=this;void 0===r&&(r=0),void 0===n&&(n=[]),this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=r,this._parentIds=n,this.processEvents(),this._processMutationsTicker.start(function(){i.processEvents()}),this._sampleCurvesTicker.start(function(){i.processEvents(!0)}),this._transport.startPipeline(e,t))},e.prototype.enqueue=function(e,t){this.enqueueAt(this._ctx.time.now(),e,t),o.Scheduler.checkForBrokenSchedulers()},e.prototype.enqueueAt=function(e,t,r){this._recordingDisabled||(e<=this._lastWhen&&(e=this._lastWhen+1),this._lastWhen=e,this._eventQueue.push({When:e,Kind:t,Args:r}))},e.prototype.enqueueFirst=function(e,t){this._eventQueue.length>0?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:e,Args:t}):this.enqueue(e,t)},e.prototype.addUnload=function(e){this._gotUnload||(this._gotUnload=!0,this.enqueue(i.EVENT_UNLOAD,[e]),this.singSwanSong())},e.prototype.shutdown=function(e){this._flush(),this.addUnload(e),this._flush(),this._recordingDisabled=!0,this.stopPipeline()},e.prototype._flush=function(){this.processEvents(),this._transport.flush()},e.prototype.singSwanSong=function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())},e.prototype.rebaseIframe=function(e){for(var t=0,r=this._eventQueue.length;t<r;t++){var n=this._eventQueue[t],i=n.When+this._ctx.time.startTime()-e;i<0&&(i=0),n.When=i}},e.prototype.processEvents=function(e){if(this._pipelineStarted){var t=this._eventQueue;this._eventQueue=[];var r=this._processor.processQueue(t);e||(r=r.concat(this._gatherExternalEvents(0!=r.length))),this.ensureFrameIds(r),0!=r.length&&this._transport.enqueueEvents(this._ctx.recording.pageSignature(),r)}},e.prototype.ensureFrameIds=function(e){if(this._frameId)for(var t=this._parentIds,r=t&&t.length>0,n=0;n<e.length;++n){var i=e[n];i.FId||(i.FId=this._frameId),r&&!i.PIds&&(i.PIds=t)}},e.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())},e}();t.EventQueue=s},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=function(){function e(e,t){this._q=e,this._valueIndices=t,this._evts=[]}return e.prototype.add=function(e){0==this._evts.length&&this._q.push(e),this._evts.push(e)},e.prototype.finish=function(e,t){var r=this._evts.length;if(r<=1)return!1;for(var n=this._evts[0].When,i=this._evts[r-1].When,o=0;o<this._valueIndices.length;++o){var s=this._valueIndices[o],a=this._evts[0].Args[s],u=(this._evts[1].When-n)/(i-n),c=(this._evts[1].Args[s]-a)/u,h=this._evts[r-1].Args[s],d=(u=(i-this._evts[r-2].When)/(i-n),(h-this._evts[r-2].Args[s])/u);t.push(a,h,c,d)}return this._evts[0].Kind=e,this._evts[0].Args=t,!0},e.prototype.evts=function(){return this._evts},e}(),o=function(){function e(e){this._ctx=e}return e.prototype.processQueue=function(e){if(0==e.length)return e;for(var t,r=this._ctx.time.now(),o=[],s=new i(o,[0,1]),a={},u={},c={},h=0;h<e.length;++h){var d=e[h];switch(d.Kind){case n.EVENT_MOUSEMOVE:s.add(d);break;case n.EVENT_TOUCHMOVE:(l=d.Args[0])in a||(a[l]=new i(o,[1,2])),a[l].add(d);break;case n.EVENT_SCROLL_LAYOUT:(l=d.Args[0])in u||(u[l]=new i(o,[1,2])),u[l].add(d);break;case n.EVENT_SCROLL_VISUAL_OFFSET:var l;(l=d.Args[0])in c||(c[l]=new i(o,[1,2])),c[l].add(d);break;case n.EVENT_RESIZE_VISUAL:t||(t=new i(o,[0,1])),t.add(d);break;default:o.push(d);}}if(s.finish(n.EVENT_MOUSEMOVE_CURVE,[r])){var f=s.evts(),p=f[f.length-1].Args;p.length>2&&p[2]&&f[0].Args.push(p[2])}for(l in u){u[_=parseInt(l)].finish(n.EVENT_SCROLL_LAYOUT_CURVE,[r,_])}for(l in c){c[_=parseInt(l)].finish(n.EVENT_SCROLL_VISUAL_OFFSET_CURVE,[r,_])}for(l in a){var _;a[_=parseInt(l)].finish(n.EVENT_TOUCHMOVE_CURVE,[r,_])}return t&&t.finish(n.EVENT_RESIZE_VISUAL_CURVE,[r]),o},e}();t.EventProcessor=o},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n["throw"](e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n["return"]:o[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0;var s=r(5),a=r(12),u=r(1),c=r(31),h=r(3),d=r(2),l=r(0),f=r(9),p=r(64),_=r(7),g=6e6,v=function(){function e(e,t,r,n,i){void 0===n&&(n=window.FormData),void 0===i&&(i=s.RealTimeout),this.ctx=e,this.queue=t,this.protocol=r,this.FormDataCtr=n,this.Timeout=i,this.started={},this.byUrl={},this.batchReady=!1,this.existsBatch=[]}return e.prototype.init=function(){this.FormDataCtr&&this.main()["catch"](function(e){d.FsBugSnag.sendToBugsnag(e,"error")})},e.prototype.main=function(){return n(this,void 0,f.FSPromise,function(){var e,t,r,s,a,c,l,p,_,g,v,y,m=this;return i(this,function(E){switch(E.label){case 0:return[4,this.getBatch()];case 1:e=E.sent(),t={fsnv:u.map(e,function(e){return e.hash})},r={};try{for(v=void 0,s=o(e),a=s.next();!a.done;a=s.next())c=a.value,r[c.hash]=c}catch(e){v={error:e}}finally{try{a&&!a.done&&(y=s["return"])&&y.call(s)}finally{if(v)throw v.error}}l=this.ctx.options.orgId,E.label=2;case 2:return E.trys.push([2,4,,5]),[4,this.protocol.newResources(l,t)];case 3:return p=E.sent(),[3,5];case 4:return _=E.sent(),h.logIfDebug("/rec/newResources failed with status "+_),[3,0];case 5:try{g=JSON.parse(p)}catch(e){return d.FsBugSnag.sendToBugsnag("Error parsing /rec/newResources response","error"),[3,0]}return[4,u.forInAsync(g,function(e,t){return n(m,void 0,f.FSPromise,function(){var n,s,a,u,c,f,p,_,g,v,y,m;return i(this,function(i){switch(i.label){case 0:if("fsnv"!=t)return[2];i.label=1;case 1:i.trys.push([1,8,9,10]),n=o(e),s=n.next(),i.label=2;case 2:if(s.done)return[3,7];if(a=s.value,null==(u=r[a]))return d.FsBugSnag.sendToBugsnag("Server told us to upload a hash we don't have","error"),[3,6];if(c=u.url,f=u.contentType,!(p=u.blob||u.stringData))return d.FsBugSnag.sendToBugsnag("Missing resource contents","error"),[3,6];if(_=u.blob||new Blob([p],{type:f}),null==p)return d.FsBugSnag.sendToBugsnag("Tried to re-upload a resource","error"),[3,6];(g=new this.FormDataCtr).append("orgId",l),g.append("baseUrl",c),g.append("fsnvHash",a),g.append("contents",_,"blob"),u.blob=u.stringData=null,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,this.protocol.uploadResource(g)];case 4:return i.sent(),[3,6];case 5:return i.sent(),h.logIfDebug("Server error uploading resource"),[3,6];case 6:return s=n.next(),[3,2];case 7:return[3,10];case 8:return v=i.sent(),y={error:v},[3,10];case 9:try{s&&!s.done&&(m=n["return"])&&m.call(n)}finally{if(y)throw y.error}return[7];case 10:return[2];}})})})];case 6:return E.sent(),[3,0];case 7:return[2];}})})},e.prototype.getBatch=function(){var e=this,t=c.createFSPromise(),r=t.resolve,n=t.promise,i=function(){e.popBatch=null,e.batchReady=!1;var t=e.existsBatch;e.existsBatch=[],r(t)};return this.batchReady?i():this.popBatch=i,n},e.prototype.uploadIfNeeded=function(e,t){return n(this,void 0,f.FSPromise,function(){var r,n,o=this;return i(this,function(i){switch(i.label){case 0:return this.FormDataCtr?this.started[t]?[2]:y(e,t)?(this.started[t]=!0,[4,this.processResource(t)]):[2]:[2];case 1:return(r=i.sent())?(n=0==this.existsBatch.length,this.existsBatch.push(r),n&&new this.Timeout(function(){o.batchReady=!0,o.popBatch&&o.popBatch()},50).start(),[2]):[2];}})})},e.prototype.processResource=function(e){return n(this,void 0,f.FSPromise,function(){var t,r,n;return i(this,function(i){switch(i.label){case 0:return this.byUrl[e]?[2,this.byUrl[e]]:[4,function(e,t){var r=c.createFSPromise(),n=r.resolve,i=r.promise,o=new XMLHttpRequest;if("string"!=typeof o.responseType)return n(null),i;return o.open("GET",e),o.responseType="blob",o.onerror=function(){n(null)},o.onload=function(){if(200!=o.status)return h.logIfDebug("Error loading blob resource "+_.scrubUrl(e,t,{source:"log",type:"debug"})),void n(null);var r=o.response;if((r.size||r.length)>g)return d.FsBugSnag.sendToBugsnag("Size of blob resource "+_.scrubUrl(e,t,{source:"log",type:"bugsnag"})+" exceeds limit of "+g,"warning"),void n(null);(function(e){var t=c.createFSPromise(),r=t.resolve,n=t.promise,i=new FileReader;return i.readAsArrayBuffer(e),i.onload=function(){r(i.result)},i.onerror=function(e){d.FsBugSnag.sendToBugsnag(e,"error"),r(null)},n})(r).then(function(e){n(e?{buffer:e,blob:r,contentType:r.type}:null)})},o.send(),i}(e,this.ctx.options.orgId)];case 1:return(t=i.sent())?[4,p.hash128NonBlocking(this.ctx.time,c.wait,t.buffer)]:[2,null];case 2:return r=i.sent().hash,n={hash:r,url:e,blob:t.blob,contentType:t.contentType},this.byUrl[n.url]=n,this.queue.enqueue(l.EVENT_SYS_RESOURCEHASH,["url",e,n.hash]),[2,n];}})})},e}();function y(e,t){var r=a.parseUrl(a.baseUri(e),t);switch(r.protocol){case"blob:":return!0;case"http:":case"https:":switch(r.hostname){case"localhost":case"127.0.0.1":case"[::1]":return e.location.protocol===r.protocol&&e.location.host===r.host;default:return!1;}default:return!1;}}t.ResourceUploader=v,t.shouldUpload=y},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n["throw"](e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n["return"]:o[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};t.__esModule=!0;var o=r(23),s=r(9),a=1e4,u=25,c=100;t.hash128NonBlocking=function(e,t,r,h){return void 0===h&&(h=new o._FSNV),n(this,void 0,s.FSPromise,function(){var n,o,s,d;return i(this,function(i){switch(i.label){case 0:n=e.now(),o=r.byteLength,s=0,i.label=1;case 1:return s<o?e.now()-n>u?[4,t(c)]:[3,3]:[3,5];case 2:i.sent(),n=e.now(),i.label=3;case 3:d=new Uint8Array(r,s,Math.min(o-s,a)),h.write(d),i.label=4;case 4:return s+=a,[3,1];case 5:return[2,{hash:h.sum(),hasher:h}];}})})}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s};t.__esModule=!0;var s=r(18),a=r(5),u=r(10),c=r(21),h=r(1),d=r(3),l=r(0),f=r(12),p=r(66),_=r(7),g=function(e){function t(t,r,n,i,o){void 0===n&&(n=new p.NetworkEventTransport(t,r)),void 0===i&&(i=a.RealTicker),void 0===o&&(o=s.defaultInjector);var c=e.call(this,t,i,n,o)||this;return c._protocol=r,c._domLoaded=!1,c._recordingDisabled=!1,c._integrationScriptFetched=!1,n.onShutdown(function(){return c.shutdown(l.UnloadReasonSettingsBlocked)}),c._doc=c._wnd.document,c._frameId=0,c._identity=t.recording.identity,c._getCurrentSessionEnabled=s.GetCurrentSessionEnabledState.NoInfoYet,u.set_fs_shutdown(c._wnd,function(e){if(c._eventWatcher.shutdown(l.UnloadReasonApi),e){var t=c._doc.getElementById(e);t&&t.setAttribute("_fs_embed_token",c._embedToken)}}),c}return i(t,e),t.prototype.onDomLoad=function(){var t=this;e.prototype.onDomLoad.call(this),this._domLoaded=!0,this.injectIntegrationScript(function(){t.fireFsReady(t._recordingDisabled)})},t.prototype.start=function(t,r,n){var i=this;e.prototype.start.call(this,t,r);var s=u._fs_replay_flags(this._wnd),a=o(c.getDocumentClientArea(this._doc),2),d=a[0],p=a[1],g=o(h.tryGetScreenDims(this._wnd),2),v=g[0],y=g[1],m="";t||(m=this._identity.userId());var E=_.scrubUrl(f.baseUri(this._wnd),this._orgId,{source:"page",type:"base"}),w=_.scrubUrl(this._doc.referrer,this._orgId,{source:"page",type:"referrer"}),S=_.scrubUrl(this._wnd.location.href,this._orgId,{source:"page",type:"url"}),b={OrgId:this._orgId,UserId:m,Url:S,Base:E,Width:d,Height:p,ScreenWidth:v,ScreenHeight:y,Referrer:w,Doctype:h.doctypeString(this._doc),CompiledTimestamp:1572623383};n&&(b.AppId=n),s&&(b.ReplayFlags=s),this._protocol.page(b,function(e){i.handleResponse(e),i.handleIdentity(e.CookieDomain,e.UserIntId,e.SessionIntId,e.PageIntId,e.EmbedToken),i.handleIntegrationScript(e.IntegrationScript);var t=!!e.Consented;i._queue.enqueueFirst(l.EVENT_SYS_REPORTCONSENT,[t]),i._queue.enqueueFirst(l.EVENT_SET_FRAME_BASE,[_.scrubUrl(f.baseUri(i._wnd),i._orgId,{source:"event",type:l.EVENT_SET_FRAME_BASE}),h.doctypeString(i._doc)]),i._queue.startPipeline(e.PageIntId,e.PageStart),i.fullyStarted()},function(e){i.disableBecauseRecPageSaidSo()})},t.prototype.handleIntegrationScript=function(e){var t=this;this._integrationScriptFetched=!0,this._integrationScript=e,this.injectIntegrationScript(function(){t.fireFsReady(t._recordingDisabled)})},t.prototype.handleIdentity=function(e,t,r,n,i){var o=this._identity;o.setIds(this._wnd,e,t,r),this._embedToken=i,d.logIfDebug("/User,"+o.userId()+"/Session,"+o.sessionId()+"/Page,"+n)},t.prototype.injectIntegrationScript=function(e){if(this._domLoaded&&this._integrationScriptFetched)if(this._integrationScript){var t=this._doc.createElement("script");u._fs_csp(this._wnd)?(t.addEventListener("load",e),t.addEventListener("error",e),t.async=!0,t.src=this._scheme+"//"+this._recHost+"/rec/integrations?OrgId="+this._orgId,this._doc.head.appendChild(t)):(t.text=this._integrationScript,this._doc.head.appendChild(t),e())}else e()},t.prototype.disableBecauseRecPageSaidSo=function(){this.shutdown(l.UnloadReasonSettingsBlocked),d.logIfDebug("Disabling FS."),this._recordingDisabled=!0,this.fireFsReady(this._recordingDisabled)},t}(s.AbstractRecorder);t.TopRecorder=g},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};t.__esModule=!0;var i=r(0),o=r(67),s=r(5),a=r(32),u=r(19),c=r(2),h=r(3),d=function(){function e(e,t,r,n){var a=this;void 0===t&&(t=new u.HttpProtocol(e)),void 0===r&&(r=s.RealTicker),void 0===n&&(n=s.RealTimeout),this._ctx=e,this._protocol=t,this._tickerFactory=r,this._backoffRetries=0,this._backoffTime=0,this._bundleSeq=1,this._lastPostTime=0,this._serverBundleTime=0,this._largePageSize=16e6,this._outgoingEventQueue=[],this._bundleQueue=[],this._hibernating=!1,this._heartbeatInterval=0,this._lastUserActivity=this._ctx.time.wallTime(),this._finished=!1,this._scheme=e.options.scheme,this._identity=e.recording.identity,this._lastBundleTime=e.time.wallTime(),this._swanSong=new o.SwanSong(e,this._protocol,this._identity,n),this._heartbeatTimeout=new n(function(){var e=Math.floor(a._ctx.time.wallTime()-a._lastUserActivity);a._outgoingEventQueue.push({When:a._ctx.time.now(),Kind:i.EVENT_HEARTBEAT,Args:[e]}),a._heartbeatInterval*=2,a._heartbeatInterval>i.HeartbeatMax&&(a._heartbeatInterval=i.HeartbeatMax),a._heartbeatTimeout.start(a._heartbeatInterval)}),this._hibernationTimeout=new n(function(){Math.floor(a._ctx.time.wallTime()-a._lastUserActivity)<=2*i.PageInactivityTimeout&&(a._outgoingEventQueue.push({When:a._ctx.time.now(),Kind:i.EVENT_UNLOAD,Args:[i.UnloadReasonHibernation]}),a.singSwanSong()),a.stopPipeline(),a._hibernating=!0},i.PageInactivityTimeout)}return e.prototype.onShutdown=function(e){this._onShutdown=e},e.prototype.scheme=function(){return this._scheme},e.prototype.enqueueEvents=function(e,t){var r,o,s,a,u,c;if(this._hibernating){if(this._finished)return;try{for(var h=n(t),d=h.next();!d.done;d=h.next()){var l=d.value;if(i.isUserActionEvent(l.Kind)){this._ctx.recording.splitPage(i.UnloadReasonHibernation),this._finished=!0;break}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=h["return"])&&o.call(h)}finally{if(r)throw r.error}}}else{try{for(var f=n(t),p=f.next();!p.done;p=f.next()){l=p.value;if(i.isUserActionEvent(l.Kind)){this._hibernationTimeout.start(),this._heartbeatInterval=i.HeartbeatInitial,this._heartbeatTimeout.start(this._heartbeatInterval),this._lastUserActivity=this._ctx.time.wallTime();break}}}catch(e){s={error:e}}finally{try{p&&!p.done&&(a=f["return"])&&a.call(f)}finally{if(s)throw s.error}}try{for(var _=n(t),g=_.next();!g.done;g=_.next()){l=g.value;this._outgoingEventQueue.push(l)}}catch(e){u={error:e}}finally{try{g&&!g.done&&(c=_["return"])&&c.call(_)}finally{if(u)throw u.error}}}},e.prototype.initUploadTicker=function(){this._uploadTicker=new this._tickerFactory(this._ctx.recording.bundleUploadInterval())},e.prototype.startPipeline=function(e,t){var r=this;this._pageId=e,this._serverPageStart=t,this.enqueueAndSendBundle(),this._uploadTicker||this.initUploadTicker(),this._uploadTicker.start(function(){r.enqueueAndSendBundle()}),this._heartbeatInterval=i.HeartbeatInitial,this._heartbeatTimeout.start(this._heartbeatInterval),this._hibernationTimeout.start()},e.prototype.stopPipeline=function(){this._uploadTicker&&this._uploadTicker.stop(),this._outgoingEventQueue=[],this._bundleQueue=[],this._hibernationTimeout.stop(),this._heartbeatTimeout.stop()},e.prototype.flush=function(){this.maybeSendNextBundle()},e.prototype.singSwanSong=function(){if(!this._hibernating&&(this._outgoingEventQueue.length>0&&this.enqueueNextBundle(!0),this._bundleQueue.length>0||this._pendingBundle)){var e=this._bundleQueue.concat();this._pendingBundle&&e.unshift(this._pendingBundle),this._swanSong.sing(this._pageId,e,this._lastBundleTime,this._serverPageStart,this._serverBundleTime)}},e.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0!=this._outgoingEventQueue.length?this.enqueueNextBundle():this.maybeSendNextBundle()},e.prototype.enqueueNextBundle=function(e){void 0===e&&(e=!1);var t={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[],this._bundleQueue.push(t),e?this._protocol.bundleBeacon({bundle:t,deltaT:null,orgId:this._identity.orgId(),pageId:this._pageId,serverBundleTime:this._serverBundleTime,serverPageStart:this._serverPageStart,sessionId:this._identity.sessionId(),userId:this._identity.userId(),win:function(){},lose:function(){}}):this.maybeSendNextBundle()},e.prototype.maybeSendNextBundle=function(){this._pageId&&this._serverPageStart&&!this._pendingBundle&&0!=this._bundleQueue.length&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())},e.prototype._sendPendingBundle=function(){var e=this,t=this._ctx.time.wallTime();if(!(t<this._backoffTime)){var r=this._pendingBundle;r&&(this._pendingBundleFailed=!1,this._lastPostTime=this._lastBundleTime=t,this.sendBundle(r,function(t){h.logIfDebug("Sent bundle "+r.Seq+" with "+r.Evts.length+" events"),e._serverBundleTime=t.BundleTime,e._pendingBundle=null,e._backoffTime=0,e._backoffRetries=0,e._ctx.time.wallTime()-e._lastPostTime>e._ctx.recording.bundleUploadInterval()&&e.maybeSendNextBundle()},function(t){if(h.logIfDebug("Failed to send events."),a.isErrorFatal(t))return 206==t&&c.FsBugSnag.sendToBugsnag("Failed to send bundle, probably because of its large size","error"),void(e._onShutdown&&e._onShutdown());e._pendingBundleFailed=!0,e._backoffTime=e._lastPostTime+e._protocol.exponentialBackoffMs(e._backoffRetries++,!1)}))}},e.prototype.sendBundle=function(e,t,r){var n=this._protocol.bundle({bundle:e,deltaT:null,lastUserActivityTime:this._lastUserActivity,orgId:this._identity.orgId(),pageId:this._pageId,serverBundleTime:this._serverBundleTime,serverPageStart:this._serverPageStart,sessionId:this._identity.sessionId(),userId:this._identity.userId(),win:t,lose:r});if(n>this._largePageSize&&this._bundleSeq>16){var o="splitting large page";h.logIfDebug(o+": "+n),c.FsBugSnag.sendToBugsnag(new Error(o),"info",{totalBytes:n}),this._ctx.recording.splitPage(i.UnloadReasonSize)}},e}();t.NetworkEventTransport=d},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=r(5),o=r(1),s=r(32),a=r(3),u=function(){function e(e,t,r,n){void 0===n&&(n=i.RealTimeout),this._ctx=e,this._protocol=t,this._identity=r,this._timeoutFactory=n,this._recover()}return e.prototype.sing=function(e,t,r,i,s){a.logIfDebug("Saving "+t.length+" bundles in swan-song.");var u={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),PageId:e,Bundles:t,PageStartTime:this._ctx.time.startTime(),LastBundleTime:r,ServerPageStart:i,ServerBundleTime:s},c=o.stringify(u);if(!(c.length>2e6))try{localStorage[n.SwanSongLocalStorageKey]=c}catch(e){}},e.prototype._recover=function(){try{if(n.SwanSongLocalStorageKey in localStorage){var e=localStorage[n.SwanSongLocalStorageKey]||localStorage.singSwanSong;delete localStorage[n.SwanSongLocalStorageKey],delete localStorage.singSwanSong;var t=o.parseJson(e);if(!(t.Bundles&&t.UserId&&t.SessionId&&t.PageId))return void a.logIfDebug("Malformed swan song found. Ignoring it.");t.OrgId||(t.OrgId=this._identity.orgId()),t.Bundles.length>0&&(a.logIfDebug("Sending "+t.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(t.OrgId,t.UserId,t.SessionId,t.PageId,t.Bundles,t.ServerPageStart,t.ServerBundleTime,t.LastBundleTime))}}catch(e){a.logIfDebug("Error recovering swan-song: "+e)}},e.prototype.sendSwanSongBundles=function(e,t,r,n,i,u,c,h,d){var l=this;void 0===d&&(d=0);var f=null;if(o.isArray(i)&&0!==i.length&&void 0!==i[0]){1==i.length&&(f=this._ctx.time.wallTime()-(h||0));this._protocol.bundle({bundle:i[0],deltaT:f,orgId:e,pageId:n,serverBundleTime:c,serverPageStart:u,sessionId:r,userId:t,win:function(o){a.logIfDebug("Sent "+i[0].Evts.length+" trailing events from last session as Seq "+i[0].Seq),i.shift(),i.length>0?l.sendSwanSongBundles(e,t,r,n,i,u,o.BundleTime,h):a.logIfDebug("Done with prior page swan song")},lose:function(o){s.isErrorFatal(o)?a.logIfDebug("Fatal error while sending events, giving up"):(a.logIfDebug("Failed to send events from last session, will retry while on this page"),l._lastSwanSongRetryTimeout=new l._timeoutFactory(l.sendSwanSongBundles,l._protocol.exponentialBackoffMs(d,!0),l,e,t,r,n,i,u,c,h,d+1).start())}})}},e}();t.SwanSong=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});t.__esModule=!0;var o=r(18),s=r(5),a=r(1),u=r(3),c=r(0),h=r(12),d=r(69),l=r(10),f=r(7),p=function(e){function t(t,r,n,i,a){void 0===r&&(r=new d.PostMessagePoster(t.window)),void 0===n&&(n=new d.PostMessageEventTransport(t.window)),void 0===i&&(i=s.RealTicker),void 0===a&&(a=o.defaultInjector);var u=e.call(this,t,i,n,a)||this;return u._messagePoster=r,u}return i(t,e),t.prototype.start=function(t,r){var n=this;e.prototype.start.call(this,t,r),this.sendRequestForFrameId(),this._listeners.add(this._wnd,"load",!1,function(){n._eventWatcher.recordingIsDetached()&&(u.logIfDebug("Recording wrong document. Restarting recording in iframe."),n._ctx.recording.splitPage(c.UnloadReasonFsShutdownFrame))})},t.prototype.postMessageReceived=function(t,r){if(e.prototype.postMessageReceived.call(this,t,r),t==this._wnd.parent||t==this._wnd)switch(r[0]){case o.FS_GREET_CHILD_FRAME:this.sendRequestForFrameId();break;case o.FS_SET_FRAME_ID_CMD:try{var n=r[1],i=r[2],s=r[3],c=r[4],h=r[5],d=r[6],f=r[7],p=r[8];this.setFrameIdFromOutside(n,i,s,c,h,d,f,p)}catch(e){u.logIfDebug("Failed to parse frameId from message: "+a.stringify(r))}break;case o.FS_SET_CONSENT:var _=r[1];this.setConsent(_);break;case o.FS_INIT_MOBILE_CMD:try{var g=JSON.parse(r[1]),v=g.StartTime;if(r.length>2){var y=r[2];if(y.hasOwnProperty("ProtocolVersion"))y.ProtocolVersion>=20180723&&y.hasOwnProperty("OuterStartTime")&&(v=y.OuterStartTime)}var m=g.Host;this.setFrameIdFromOutside(-1,[],v,"https:",l.defaultScript(m),l.defaultAppHost(m),g.OrgId,g.PageResponse)}catch(e){u.logIfDebug("Failed to initialize mobile web recording from message: "+a.stringify(r))}}},t.prototype.sendRequestForFrameId=function(){this._frameId||(0!=this._frameId?this._wnd.parent?(u.logIfDebug("Asking for a frame ID."),this._messagePoster.postMessage(this._wnd.parent,o.FS_REQUEST_FRAME_ID,[])):u.logIfDebug("Orphaned window."):u.logIfDebug("For some reason the outer window attempted to request a frameId"))},t.prototype.setFrameIdFromOutside=function(e,t,r,n,i,o,s,d){e?this._frameId?this._frameId!=e?(u.logIfDebug("Updating frame id from "+this._frameId+" to "+e),this._ctx.recording.splitPage(c.UnloadReasonFsShutdownFrame)):u.logIfDebug("frame Id is already set to "+this._frameId):(u.logIfDebug("FrameId received within frame "+f.scrubUrl(location.href,s,{source:"log",type:"debug"})+": "+e),this._scheme=n,this._script=i,this._appHost=o,this._orgId=s,this._frameId=e,this._parentIds=t,this.handleResponse(d),this.fireFsReady(),this._queue.enqueueFirst(c.EVENT_SET_FRAME_BASE,[f.scrubUrl(h.baseUri(this._wnd),s,{source:"event",type:c.EVENT_SET_FRAME_BASE}),a.doctypeString(this._wnd.document)]),this._queue.rebaseIframe(r),this._ctx.time.setStartTime(r),this._queue.startPipeline(this._pageId,d.PageStart,e,t),this.flushPendingChildFrameInits(),this.fullyStarted()):u.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+f.scrubUrl(location.href,s,{source:"log",type:"debug"}))},t}(o.AbstractRecorder);t.InnerRecorder=p},function(e,t,r){"use strict";t.__esModule=!0;var n=r(18),i=r(10),o=r(1),s=function(){function e(e,t){void 0===t&&(t=new a(e)),this._wnd=e,this._messagePoster=t}return e.prototype.enqueueEvents=function(e,t){this._messagePoster.postMessage(this._wnd.parent,n.FS_IFRAME_EVENTS,t,e)},e.prototype.startPipeline=function(e,t){},e.prototype.stopPipeline=function(){},e.prototype.flush=function(){},e.prototype.singSwanSong=function(){},e.prototype.onShutdown=function(e){},e}();t.PostMessageEventTransport=s;var a=function(){function e(e){this.wnd=e}return e.prototype.postMessage=function(e,t,r,n){var s=i._fs_transport(this.wnd);if(s)try{s.send(t,o.stringify(r),n)}catch(e){s.send(t,o.stringify(r))}else e.postMessage(u(t,r,n),"*")},e}();function u(e,t,r){var n=[e,t];return r&&n.push(r),o.stringify({__fs:n})}t.PostMessagePoster=a,t.formatPostMessageData=u},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};t.__esModule=!0;var o,s,a=r(0),u=r(33),c=r(1),h=r(20),d=r(3),l=r(4),f=r(30),p=r(23);!function(e){e.rec="rec",e.user="user",e.account="account",e.consent="consent",e.customEvent="event",e.log="log"}(o=t.ApiType||(t.ApiType={})),function(e){e.user="user",e.account="acct",e.event="evt"}(s=t.VarScope||(t.VarScope={}));var _={acctId:"str",displayName:"str",website:"str"},g={uid:"str",displayName:"str",email:"str"},v={str:y,bool:m,real:E,"int":w,date:S,strs:b(y),bools:b(m),reals:b(E),ints:b(w),dates:b(S),objs:b(T),obj:T};function y(e){return"string"==typeof e}function m(e){return"boolean"==typeof e}function E(e){return"number"==typeof e}function w(e){return"number"==typeof e&&e-Math.floor(e)==0}function S(e){return!!e&&(e.constructor===Date?!isNaN(e):("number"==typeof e||"string"==typeof e)&&!isNaN(new Date(e)))}function b(e){return function(t){if(!(t instanceof Array))return!1;for(var r=0;r<t.length;r++)if(!e(t[r]))return!1;return!0}}function T(e){return!!e&&"object"==typeof e}var I=/^[a-zA-Z][a-zA-Z0-9_]*$/,N=function(){function e(e){this._identity=e}return e.prototype.identity=function(){return this._identity},e.prototype.api=function(e,t,r){var h=!1,l=[];try{switch(e){case o.rec:return{events:[],recStatus:t?"restart":"shutdown"};case o.log:if(!Array.isArray(t)){var p=typeof t;d.logIfDebug("Expected array-like args instead got: \""+p+"\", value: \""+t+"\"");break}return t[0]in["log","info","warn","error","debug"]==!1&&t.unshift("log"),{events:[{When:0,Kind:a.EVENT_LOG,Args:t.map(function(e){return f.stringifyLogMessage(e,1e3)})}]};case o.consent:var v=typeof t;if("boolean"!=typeof t){d.logIfDebug("Expected consent status of type 'boolean' instead got type: \""+v+"\", value: \""+t+"\"");break}return{events:[{When:0,Kind:a.EVENT_SYS_SETCONSENT,Args:[t]}],consent:t};case o.account:l.push.apply(l,i(this.rawEventsFromApi(s.account,_,t,r)));break;case o.user:if("object"!=typeof t)d.logIfDebug("Expected argument of type 'object' instead got type: '"+typeof t+"', value: "+c.stringify(t));else if("uid"in t){var y=t.uid;if(!1===y)this._identity.clearAppId()&&(h=!0),delete t.uid;else{var m=n(x(y,this._identity),2),E=m[0],w=m[1];if(!E){switch(w){case u.HighlightTypeFsId:case void 0:break;default:d.logIfDebug("unexpected failReason returned from setAppId: "+w);}return{events:l}}t.uid=E,this._identity.setAppId(t.uid),w==u.HighlightTypeNewUid&&(h=!0)}}l.push.apply(l,i(this.rawEventsFromApi(s.user,g,t,r)));break;case o.customEvent:var S=t.n,b=t.p;l.push.apply(l,i(this.rawEventsFromApi(s.event,{},b,r,S)));break;default:d.logIfDebug("invalid operation \""+e+"\"; only \"rec\", \"account\", and \"user\" are supported at present");}}catch(t){d.logIfDebug("unexpected exception handling "+e+" API call: "+t.message)}return{events:l,reidentify:h}},e.prototype.rawEventsFromApi=function(e,t,r,i,o){var u=function e(t,r,i){var o={PayloadToSend:{},ValidationErrors:[]};var a=function(n){var i=e(t,r,n);return o.ValidationErrors=o.ValidationErrors.concat(i.ValidationErrors),i.PayloadToSend};c.forIn(i,function(e,i){var u=function(e,t,r,i){var o=t,s=typeof r;if("undefined"===s)return d.logIfDebug("Cannot infer type of "+s+" "+r),i.push({Type:"vartype",FieldName:t,ValueType:s+" (unsupported)"}),null;if(l.windex.objectHasOwnProp(e,t))return{name:t,type:e[t]};var a=t.lastIndexOf("_");if(-1==a||!k(t.substring(a+1))){var u=function(e){for(var t in v)if(v[t](e))return t;return null}(r);if(null==u)return d.logIfDebug("Cannot infer type of "+s+" "+r),r?i.push({Type:"vartype",FieldName:t}):i.push({Type:"vartype",FieldName:t,ValueType:"null (unsupported)"}),null;a=t.length,d.logIfDebug("Warning: Inferring user variable \""+t+"\" to be of type \""+u+"\""),t=t+"_"+u}var h=n([t.substring(0,a),t.substring(a+1)],2),f=h[0],p=h[1];if("object"===s&&!r)return d.logIfDebug("null is not a valid object type"),i.push({Type:"vartype",FieldName:o,ValueType:"null (unsupported)"}),null;if(!I.test(f)){f=f.replace(/[^a-zA-Z0-9_]/g,"").replace(/^[0-9]+/,""),/[0-9]/.test(f[0])&&(f=f.substring(1)),i.push({Type:"varname",FieldName:o});var _=f+"_"+p;if(d.logIfDebug("Warning: variable \""+o+"\" has invalid characters. It should match /"+I.source+"/. Converted name to \""+_+"\"."),""==f)return null;t=_}if(!k(p))return d.logIfDebug("Variable \""+o+"\" has invalid type \""+p+"\""),i.push({Type:"varname",FieldName:o}),null;if(!function(e,t){return v[e](t)}(p,r))return d.logIfDebug("illegal value "+c.stringify(r)+" for type "+p),"number"===s?s=r%1==0?"integer":"real":"object"==s&&null!=r&&r.constructor==Date&&(s=isNaN(r)?"invalid date":"date"),i.push({Type:"vartype",FieldName:o,ValueType:s}),null;return{name:t,type:p}}(r,i,e,o.ValidationErrors);if(u){var h=u.name,f=u.type;if("obj"!=f){if("objs"!=f)o.PayloadToSend[h]=R(f,e);else{t!=s.event&&o.ValidationErrors.push({Type:"vartype",FieldName:h,ValueType:"Array<Object> (unsupported)"});for(var p=e,_=[],g=0;g<p.length;g++){var y=a(p[g]);y&&_.push(y)}_.length>0&&(o.PayloadToSend[h]=_)}}else{var y=a(e),m=c.hasSuffix(i,"_obj")?h:h.substring(0,h.length-"_obj".length);o.PayloadToSend[m]=y}}else o.PayloadToSend[i]=R("",e)});return o}(e,t,r),h=[],f=e==s.event,p=[e,c.stringify(u.PayloadToSend)],_=a.EVENT_SYS_SETVAR;return f&&(_=a.EVENT_SYS_CUSTOM,p[0]=o),i&&"fs"!=i&&p.push(i),h.push({When:0,Kind:_,Args:p}),h},e}();function R(e,t){return"str"==e&&null!=t&&(t=t.trim()),null==t||"date"!=e&&t.constructor!=Date||(t=function(e){var t,r=e.constructor===Date?e:new Date(e);try{t=r.toISOString()}catch(e){t=null}return t}(t)),t}function x(e,t){if("number"==typeof e&&Math.floor(e)==e&&(d.logIfDebug("Expected appId of type 'string' instead got value: "+e+" of type: "+typeof e),e=""+e),"string"!=typeof e)return d.logIfDebug("blocking FS.identify API call; uid value ("+e+") must be a string"),[void 0,u.HighlightTypeFsId];var r=e.trim();if(h.BAD_APP_IDS.indexOf(r.toLowerCase())>=0)return d.logIfDebug("blocking FS.identify API call; uid value ("+r+") is illegal"),[void 0,u.HighlightTypeFsId];var n=p.hashString32Blocking(r),i=void 0;return t&&t._cookie.appKeyHash&&t._cookie.appKeyHash!==n&&t._cookie.appKeyHash!==r&&(d.logIfDebug("user re-identified; existing uid hash ("+t._cookie.appKeyHash+") does not match provided uid ("+r+")"),i=u.HighlightTypeNewUid),[r,i]}function k(e){return!!v[e]}t.Vars=N,t.transformValidateAppId=x},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=r(1),o=r(19),s=r(4),a=r(3),u=r(2);t.cmdReqPage=1,t.cmdReqBundle=2,t.cmdRspError=3,t.cmdRspPage=4,t.cmdRspBundle=5;var c=function(){function e(e,t){void 0===t&&(t=function(e){return new WebSocket(e)}),this._newSock=t,this._connecting=!1,this._connected=!1,this._queue={},this._seq=1,this._wnd=e.window,this._scheme=e.options.scheme,this._host=e.options.recHost}return e.isSupported=function(){return"WebSocket"in window},e.prototype.page=function(e,r,n){this.request({Cmd:t.cmdReqPage,Page:e},function(e){return r(e.Page)},n)},e.prototype.bundle=function(e){var r=e.deltaT,n=e.serverPageStart,i=e.serverBundleTime;return this.request({Cmd:t.cmdReqBundle,Bundle:{OrgId:e.orgId,UserId:e.userId,SessionId:e.sessionId,PageId:e.pageId,Seq:e.bundle.Seq,DeltaT:null===r?void 0:r,PageStart:null==n?void 0:n,PrevBundleTime:null==i?void 0:i,Bundle:e.bundle}},function(t){return e.win(t.Bundle)},e.lose)},e.prototype.bundleBeacon=function(e){return o.bundleBeacon(this._scheme,this._host,e)},e.prototype.exponentialBackoffMs=function(e,t){var r=Math.min(n.BackoffMax,5e3*Math.pow(2,e));return t?r+.25*Math.random()*r:r},e.prototype.request=function(e,t,r){e.Seq=this._seq++;var n=i.stringify(e);return this._queue[e.Seq]={payload:n,win:t,lose:r},this.maybeConnect(),n.length},e.prototype.handleMessage=function(e){var r;try{r=i.parseJson(e)}catch(e){return void a.logIfDebug("socket: error parsing frame: "+e.toString())}var n=this._queue[r.Seq];delete this._queue[r.Seq],n?r.Cmd==t.cmdRspError?(a.logIfDebug(r.Fail.Error),n.lose(r.Fail.Status)):n.win(r):a.logIfDebug("socket: mismatched request seq "+r.Seq+"; ignoring")},e.prototype.drainQueue=function(){if(this._connected)for(var e in this._queue){var t=this._queue[e];t.sent||(this._sock.send(t.payload),t.sent=!0)}else a.logIfDebug("socket: attempt to drain queue when disconnected.")},e.prototype.reconnect=function(){var e=this;if(!this._connected){for(var t in this._queue)this._queue[t].sent=!1;var r=0;s.windex.setWindowTimeout(this._wnd,u.FsBugSnag.wrap(function(){return e.maybeConnect()}),this.exponentialBackoffMs(r++,!0))}},e.prototype.maybeConnect=function(){var e=this;if(this._connected)this.drainQueue();else if(!this._connecting){this._connecting=!0;var t=("https:"==this._scheme?"wss:":"ws:")+"//"+this._host+"/rec/sock";this._sock=this._newSock(t),this._sock.onopen=function(t){e._connecting=!1,e._connected=!0,e.drainQueue()},this._sock.onmessage=function(t){e.handleMessage(t.data),e.drainQueue()},this._sock.onclose=function(t){a.logIfDebug("socket: closed; reconnecting"),e._connecting=e._connected=!1,e.reconnect()},this._sock.onerror=function(t){a.logIfDebug("socket: error; reconnecting"),e._connecting=e._connected=!1,e.reconnect()}}},e}();t.SockProtocol=c}]);
//# sourceMappingURL=fs.js.map